!function(){var e={757:function(e,t,n){e.exports=n(666)},666:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),i=new C(r||[]);return a._invoke=function(e,t,n){var r=d;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===g){if("throw"===o)throw a;return E()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=L(i,n);if(c){if(c===v)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?g:f,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=g,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",g="completed",v={};function h(){}function m(){}function y(){}var w={};s(w,a,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(T([])));k&&k!==n&&r.call(k,a)&&(w=k);var S=y.prototype=h.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,a,i,c){var s=l(e[o],e,a);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function L(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,L(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var o=l(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function T(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:E}}function E(){return{value:t,done:!0}}return m.prototype=y,s(S,"constructor",y),s(y,"constructor",m),m.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,i,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new I(u(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(S),s(S,c,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function c(e){i(a,r,o,c,s,"next",e)}function s(e){i(a,r,o,c,s,"throw",e)}c(void 0)}))}}var s=n(757),u=n.n(s);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var p="https://europe-west3-nextday-34eb3.cloudfunctions.net/api/logResponse",g="(max-width: 440px)",v="__nextday_session_id",h="ND_SessionTimestamp",m="BN_SessionHistory",y="ND_PageViews",w="ND_PopupDisplayFlag",b="ND_SkuList",k="ND_CABasketPrice",S="ND_Debug",x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nextday Client SDK";l(this,e),this.origin=t,this.DEBUG=window.localStorage.getItem(S)}return f(e,[{key:"info",value:function(){for(var e,t=this.origin,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).info.apply(e,["[".concat(t,"]")].concat(r))}},{key:"log",value:function(){var e=this.DEBUG,t=this.origin;if(e){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];(n=console).log.apply(n,["[".concat(t,"]")].concat(o))}}},{key:"warn",value:function(){for(var e,t=this.origin,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).warn.apply(e,["[".concat(t,"]")].concat(r))}},{key:"error",value:function(){for(var e,t=this.origin,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).error.apply(e,["[".concat(t,"]")].concat(r))}}]),e}(),I=x;function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var P=new I("Nextday DataLayer Checker"),C=function(e){P.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value,o=T(t);return J(o,n,r)},T=function(e){P.log("Searching beagleInfoLayer for key ",e);var t,n=L(window.beagleInfoLayer.dataPoints);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Object.keys(r).includes(e))return P.log("Found key ".concat(e," with value ").concat(r[e])),r[e]}}catch(e){n.e(e)}finally{n.f()}P.log("Key ".concat(e," not found in beagleInfoLayer")),P.log("Searching dataLayer for key ",e);var o,a=L(window.dataLayer);try{for(a.s();!(o=a.n()).done;){var i=o.value;if(Object.keys(i).includes(e))return P.log("Found key ".concat(e," with value ").concat(i[e])),i[e]}}catch(e){a.e(e)}finally{a.f()}return P.log("Key ".concat(e," not found in dataLayer")),null},E=new I("Nextday Url Checker"),_=function(e){E.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;if("path"===t){var o=window.location.href,a=o.includes("ajax/mobile-search/loadOtherPages.php")?decodeURIComponent(new URL(o).search.replace("?originalPath=","")):new URL(o).pathname;return E.log("Checking path ".concat(a," matches rule path ").concat(r)),J(a,n,r)}};function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=new I("Nextday Utils");"randomUUID"in crypto||G();var R=function(){document.documentElement.classList.remove("nextDay-hide")},q=function(){var e=c(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.log("Fetching treatments"),e.next=3,fetch("https://host-b96.pages.dev/treatments.json");case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e,t){if(!e)return null;var n=e.split(";").map((function(e){return e.split("=")})).reduce((function(e,t){return t[0]&&t[1]&&(e[decodeURIComponent(t[0].trim())]=decodeURIComponent(t[1].trim())),e}),{})[t];return n?("_ga"===t&&(n=n.split(".")[2]),n):null},V=function(){var e=c(u().mark((function e(t){var n,r,o,a,i,c,s;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=8+(n=9),t){e.next=5;break}return e.abrupt("return",-1);case 5:return o=(new TextEncoder).encode(t),e.next=8,crypto.subtle.digest("SHA-1",o);case 8:return a=e.sent,i=Array.from(new Uint8Array(a)),c=i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),s=parseInt(c.substring(n,r),16),e.abrupt("return",s%100);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(e){var t=document.documentElement.scrollTop,n=setInterval((function(){var r=document.documentElement.scrollTop;t-400>r?(clearInterval(n),e()):t=r}),500)},M=function(e,t){j.log("Applying style changes",t,"to elements",e);for(var n=0;n<e.length;n++)for(var r=e[n],a=0,i=Object.entries(t);a<i.length;a++){var c=o(i[a],2),s=c[0],u=c[1];r.style[s]=u}},B=function(){var e=c(u().mark((function e(){var t;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.href="https://host-b96.pages.dev/nd-styless.css",document.head.appendChild(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(e,t){var n,r=JSON.parse(JSON.stringify(e)),o=O(r);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=a.subVariants;if(i){var c,s=O(i);try{for(s.s();!(c=s.n()).done;){var u=c.value;if(u.id===t)for(var l in u)"id"!==l&&(a[l]=u[l])}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){o.e(e)}finally{o.f()}return r},J=function(e,t,n){if("notExist"===t)return e?(j.log("conditionChecker: -not satisfied- target does exist"),!1):(j.log("conditionChecker: -satisfied- target does not exist"),!0);if(null==e||null==t)return j.log("conditionChecker: runTimeValue or condition is not defined"),!1;switch(t){case"exist":return e?(j.log("conditionChecker: -satisfied- target does exist"),!0):(j.log("conditionChecker: -not satisfied- target does not exist"),!1);case"contains":return e.includes(n)?(j.log("conditionChecker: -satisfied- target contains value"),!0):(j.log("conditionChecker: -not satisfied- target does not contain value"),!1);case"notContains":return e.includes(n)?(j.log("conditionChecker: -not satisfied- target contains value"),!1):(j.log("conditionChecker: -satisfied- target does not contain value"),!0);case"equal":return e===n?(j.log("conditionChecker: -satisfied- target equals value"),!0):(j.log("conditionChecker: -not satisfied- target does not equal value"),!1);case"notEqual":return e!==n?(j.log("conditionChecker: -satisfied- target does not equal value"),!0):(j.log("conditionChecker: -not satisfied- target equals value"),!1);case"greaterThan":return e>n?(j.log("conditionChecker: -satisfied- target is greater than value"),!0):(j.log("conditionChecker: -not satisfied- target is not greater than value"),!1);case"lessThan":return e<n?(j.log("conditionChecker: -satisfied- target is less than value"),!0):(j.log("conditionChecker: -not satisfied- target is not less than value"),!1);case"greaterEquals":return e>=n?(j.log("conditionChecker: -satisfied- target is greater or equal than value"),!0):(j.log("conditionChecker: -not satisfied- target is not greater or equal than value"),!1);case"lessEquals":return e<=n?(j.log("conditionChecker: -satisfied- target is less or equal than value"),!0):(j.log("conditionChecker: -not satisfied- target is not less or equal than value"),!1);case"between":var r=o(n.split(","),2),a=r[0],i=r[1];return a=parseInt(a),i=parseInt(i),e>=a&&e<=i?(j.log("conditionChecker: -satisfied- target is between min and max"),!0):(j.log("conditionChecker: -not satisfied- target is not between min and max"),!1);default:return j.log("conditionChecker: condition is not defined ",t),!1}},G=function(){crypto.randomUUID=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}},z=function t(n,r){if(n===r)return!0;if("object"!==e(n)||"object"!==e(r)||null==n||null==r)return!1;var o=Object.keys(n),a=Object.keys(r);if(o.length!==a.length)return!1;var i=!0;return o.forEach((function(e){a.includes(e)||(i=!1),"function"!=typeof n[e]&&"function"!=typeof r[e]||n[e].toString()!==r[e].toString()&&(i=!1),t(n[e],r[e])||(i=!1)})),i},H=function(){var e=c(u().mark((function e(){var t,n=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"_ga",e.abrupt("return",new Promise((function(e,n){var r=D(document.cookie,t);if(r)e(r);else{var o=setInterval((function(){(r=D(document.cookie,t))&&(clearInterval(o),e(r))}),10);setTimeout((function(){clearInterval(o),n(new Error("Could not extract cookie identifier"))}),1e3)}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),K=function(e){return new Promise((function(t){return setTimeout(t,e)}))},Q=function(){var e=b,t=[],n={operator:"PageType",condition:"equal",value:"Homepage"};if(C(n))return null;if(n.value="Listingpage",C(n))return Array.from(document.querySelectorAll(".product-card")).forEach((function(e){t.push(e.getAttribute("data-product-sku"))})),t.length?(sessionStorage.setItem(e,JSON.stringify(t)),t):(j.log("Product SKUs not found on Listingpage"),null);if(n.value="Productpage",C(n)){var r=document.querySelector(".product-sku");return r?(t.push(r.getAttribute("data-sku")),sessionStorage.setItem(e,JSON.stringify(t)),t):(j.log("Product SKU not found on Productpage"),null)}return n.operator="path",n.value="/siparis-listesi.html",_(n)?(Array.from(document.querySelectorAll(".cart-inside")).forEach((function(e){t.push(e.getAttribute("data-sku"))})),t.length?(sessionStorage.setItem(e,JSON.stringify(t)),t):(j.log("Product SKUs not found on basket page"),null)):(j.log("Unidentified page type"),null)};function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(){return X=c(u().mark((function e(t,n){var r,o,a,i,s,l,d,f;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=new I("Nextday Apply Treatments"),o=w,a=function(e){r.log("Applying treatment: ",JSON.stringify(e));var t=e.operator,a=e.type,c=e.applyEvent,s=e.contentSelector,u=e.selector,p=e.selectorFallback,v=e.mdCondition,h=e.move_selector_1,m=e.move_selector_2,y=e.replaceFn,w=e.value,b=$(u);if(!v||window.matchMedia(v).matches)if(h&&!m||m&&!h)r.log("Both move selectors are required");else{if(h&&m){if(!$(h).length)return void r.log("Move selector 1 not found: ",h);if(!$(m).length)return void r.log("Move selector 2 not found: ",m)}else{if(!u)return void r.log("Selector not specified");if(!b.length&&"no-selector"!==u&&(r.log("Selector not found: ",u),r.log("Trying fallback selector: ",p),p&&(b=$(p)),!b.length))return void r.log("Fallback selector not found")}var k=function(e,t){if(e&&t.includes("{{REPLACE}}")){r.log("Executing replace function: ",e);var o={dataLayerFinder:T,productInfo:n},a=Function(e).bind(o);t=t.replaceAll("{{REPLACE}}",a())}return t};if(Array.isArray(w)?w.forEach((function(e,t){var n=y?y[t]||y:"";w[t]=k(n,e)})):w=k(y,w),"remove"===t)b&&(r.log("Removing: ",u),b.remove()),r.log("Cannot found element with selector: ",u);else if("insert"===t)switch(a){case"before":r.log("Inserting before: ",w),String(w).includes("nd-add-to-win")&&$(".nd-add-to-win").remove(),b.before(w);break;case"after":r.log("Inserting after: ",w),b.after(w);break;case"popup":if(0!==parseInt(sessionStorage.getItem(o))){r.log("Popup already displayed in session");break}if(r.log("Creating Popup: ",w),d(w,s),c){var S,x=window.matchMedia(g).matches,I=W(c);try{for(I.s();!(S=I.n()).done;)switch(S.value){case"exitIntent":r.log("Adding exit intent listener"),x?U(l):document.documentElement.addEventListener("mouseleave",l,{once:!0});break;case"copyIntent":r.log("Adding copy intent listener"),document.documentElement.addEventListener("copy",l,{once:!0})}}catch(e){I.e(e)}finally{I.f()}}else setTimeout((function(){l()}),timeout)}else if("edit"===t)switch(a){case"text":r.log("Editing text: ",w),b.text(w);break;case"html":r.log("Editing html: ",w),b.html(w);break;case"styleApplicator":r.log("Applying style: ",w);var L=JSON.parse(w);r.log("Style Changes Map: ",L),M(b,L);break;case"addClass":r.log("addding class to ".concat(b," named ").concat(w)),b.addClass(w);break;case"removeClass":r.log("remove class from ".concat(b," named ").concat(w)),b.removeClass(w);break;case"documentTitle":if(r.log("changing document title from ".concat(b," to ").concat(w)),c){var A,P=W(c);try{for(P.s();!(A=P.n()).done;)"tabChange"==A.value&&function(){r.log("catching event tabchange..");var e=document.title;document.addEventListener("visibilitychange",(function(t){return i(t,w,e)}))}()}catch(e){P.e(e)}finally{P.f()}}break;case"addBanner":if(!n){r.log("Product info unavailable");break}r.log("Adding banner: ",w);var C=JSON.parse(sessionStorage.getItem("ND_SkuList"))[0];if(!C){r.log("Could not find product sku");break}Object.keys(n).includes(C)&&b.before(w);break;default:r.log("Unknown edit type: ",a)}else if("setattribute"===t)switch(r.log("Setting attribute: ",attribute,w),attribute){case"src":b.css("content","url(".concat(w.trim(),")"));break;case"style":var E=w.split(":")[0].trim(),_=w.split(":")[1].trim();b.css(E,_,"!important")}else if("replace"===t)r.log("Replacing: ",w),b.replaceAll(w);else if("swap"===t){r.log("Swapping: ",h,m);var O=document.querySelector(h),N=document.querySelector(m);f(O,N)}else if("injectscript"===t)r.log("Injecting script: ",w),b.append("<script>".concat(w,"<\/script>"));else if("move"===t){r.log("Moving ".concat(h," to ").concat(m));var j=document.querySelector(h),R=document.querySelector(m);j.remove(),R.prepend(j)}else"noop"===t?r.log("Noop Operator: No operation is applied on target "):r.log("No such operator exists yet",t)}else r.log("Media condition mismatch: ",v)},i=function(){var e=c(u().mark((function e(t,n,r){var o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Array.isArray(n)?n:[n],a=0;case 2:if(!(a<o.length)){e.next=16;break}if(!document.hidden){e.next=12;break}return document.title=o[a],e.next=7,K(3e3);case 7:return document.title=r,e.next=10,K(3e3);case 10:e.next=13;break;case 12:document.title=r;case 13:a++,e.next=2;break;case 16:if(document.hidden){e.next=21;break}return document.title=r,e.abrupt("return");case 21:i(t,n,r);case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),s=function e(t){var n=t.target.id;n&&"nd-popup__wrapper"===n&&($("#nd-popup__wrapper").remove(),window.removeEventListener("click",e,!0))},l=function e(){sessionStorage.setItem(o,1);var t=document.querySelector("#grt-shadow-host");t&&(t.style.display="none"),document.getElementById("nd-popup__wrapper").style.display="block",window.addEventListener("click",s,!0),document.documentElement.removeEventListener("mouseleave",e,{once:!0}),document.documentElement.removeEventListener("copy",e,{once:!0}),setTimeout((function(){$("#nd-popup__wrapper").remove(),window.removeEventListener("click",s,!0)}),15e3)},d=function(e,t){var n=document.createElement("div");n.classList.add("nd-popup__wrapper"),n.id="nd-popup__wrapper";var r=document.createElement("button");if(r.classList.add("nd-popup__button-close"),r.innerText="X",r.onclick=function(){$("#nd-popup__wrapper").remove(),window.removeEventListener("click",s,!0)},t)for(var o=Array.from(document.querySelectorAll(t));e.includes("{{REPLACE}}")&&o.length>0;)e=e.replace("{{REPLACE}}",o.shift().src);var a=document.createElement("template");a.innerHTML=e.trim();var i=a.content.firstChild;i.appendChild(r),n.appendChild(i),$("#nd-popup__wrapper").remove(),document.body.appendChild(n)},f=function(e,t){var n,r,o=e.parentNode,a=t.parentNode;if(o&&a&&!o.isEqualNode(t)&&!a.isEqualNode(e)){for(var i=0;i<o.children.length;i++)o.children[i].isEqualNode(e)&&(n=i);for(var c=0;c<a.children.length;c++)a.children[c].isEqualNode(t)&&(r=c);o.isEqualNode(a)&&n<r&&r++,o.insertBefore(t,o.children[n]),a.insertBefore(e,a.children[r])}},function e(t){if(window.jQuery){var n,o=W(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;try{a(i)}catch(e){r.log("Couldn't apply treatment ".concat(i.id," with error ").concat(e.message));continue}}}catch(e){o.e(e)}finally{o.f()}}else setTimeout((function(){e(t)}),10)}(t);case 10:case"end":return e.stop()}}),e)}))),X.apply(this,arguments)}var Z=function(e,t){return X.apply(this,arguments)},ee=new I("BeagleCheckpoint"),te={BeagleLoaded:1,Initialized:2,UserOnOff:3,ScriptTimeOut:7,TreatmentRepositoryCreated:4,TreatmentsApplied:5,ReapplyTreatmentListeners:6,TimeoutThresholdReached:8};window.beagleInfoLayer=window.beagleInfoLayer||{checkpoints:[],dataPoints:[]};var ne=function(e){try{ee.log("Checkpoint: '".concat(e,"' Reached!")),window.beagleInfoLayer.checkpoints.push({checkpoint:Object.keys(te).find((function(t){return te[t]===e})),id:e,time:Date.now()})}catch(e){ee.warn(e)}};function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var se=function(){function e(t){l(this,e),this.logger=new I("Nextday Monitor"),this.sessionId=sessionStorage.getItem(v),this.logger.log("Initializing monitor with session id: "+this.sessionId),this.appliedTreatmentIds=null,this.eligibleNotAppliedTreatments=null,this.latestChanges=null,this.eligibleNotAppliedChanges=null,this.viewId=crypto.randomUUID(),this.headers={type:"application/json"},this.debugMode=t?"on":"off",this.isLogged=!1,this.initializeExitEventListener()}var t;return f(e,[{key:"updateTreatments",value:function(e,t){this.appliedTreatmentIds=e,this.eligibleNotAppliedTreatments=t}},{key:"sendLogs",value:(t=c(u().mark((function e(t){var n,r,o,a=this,i=arguments;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.length>1&&void 0!==i[1]?i[1]:null,r=i.length>2&&void 0!==i[2]&&i[2],(o=this.logger).log("Sending logs"),"complete"!==document.readyState?(o.log("Document ready state is not complete"),window.addEventListener("beforeunload",(function(){o.log("In beforeunload event"),a.handleQueueLogs(a.packageLogData(t,n,r))}),!0),window.addEventListener("pagehide",(function(){o.log("In onpagehide event"),a.handleQueueLogs(a.packageLogData(t,n,r))}),!0),window.addEventListener("load",(function(){o.log("In onload event"),a.handleQueueLogs(a.packageLogData(t,n,r))}),!0)):this.handleQueueLogs(this.packageLogData(t,n,r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"handleQueueLogs",value:function(e){if(!this.isLogged){var t=this.logger;e?(t.log("Request blob to send: ",e),this.queueLogs(e),this.isLogged=!0):t.log("Could not create request blob")}}},{key:"updateLatestChanges",value:function(e,t){var n=this.appliedTreatmentIds,r=this.eligibleNotAppliedTreatments,o=this.logger;o.log("Updating latest changes");var a=this.latestChanges||n;z(a,e)||(o.log("Changes detected"),o.log("Changes: ",e),this.latestChanges=e),a=this.eligibleNotAppliedChanges||r,z(a,t)||(o.log("Changes detected"),o.log("Changes: ",e),this.eligibleNotAppliedChanges=t)}},{key:"packageLogData",value:function(e,t,n){var r=this.appliedTreatmentIds,o=this.eligibleNotAppliedTreatments,a=this.debugMode,i=this.headers,c=this.viewId,s=t||(Object.keys(r).length?"Treatments applied":"No treatments applied"),u=this.prepareLogBody();return u.vId=n?null:c,u.m=s,u.dbm=a,u.isOn=e,u.a=n?{}:r,u.e=n?{}:o,new Blob([JSON.stringify(u)],i)}},{key:"packageUpdateLogData",value:function(){var e=this.headers,t=this.eligibleNotAppliedChanges,n=this.latestChanges,r=this.viewId;if(!n&&!t)return!1;var o={t:Date.now(),a:n||{},e:t||{},vId:r,beagleInfoLayer:window.beagleInfoLayer||{}};return new Blob([JSON.stringify(o)],e)}},{key:"prepareLogBody",value:function(){var e,t,n,r,o,a,i,c,s,u,l,d,f,p,g,v,h,m,y,w,b,k,S,x,I,L,A,P,C,T,E,_,O,N,j,R,q,V,U,M,B=new URL(window.location.href),F=(null===(e=window.navigator)||void 0===e||null===(t=e.userAgentData)||void 0===t?void 0:t.platform)||(null===(n=window.navigator)||void 0===n?void 0:n.platform)||(null===(r=window.navigator)||void 0===r?void 0:r.userAgent),J={},G=ie(window.dataLayer);try{for(G.s();!(M=G.n()).done;){var $=M.value;J=ae(ae({},J),$)}}catch(e){G.e(e)}finally{G.f()}var z=JSON.parse(D(document.cookie,"VL_CM_0")),H={};if(z&&z.Items){var K,Q=ie(z.Items);try{for(Q.s();!(K=Q.n()).done;){var W=K.value;H[W.K]=decodeURIComponent(W.V)}}catch(e){Q.e(e)}finally{Q.f()}}var Y={};if(Y.cookieVLPVinVisit=H.VL_PVCountInVisit,Y.cookieVLVisitDuration=H.VL_TotalDuration,Y.cookieVLTotalPV=H.VL_TotalPV,Y.cookieVLTotalVisit=H.VL_TotalVisit,Y.gaPageType=J.PageType,Y.gaProductName=J.content_name,Y.gaViewType=J.content_type,Y.gaProductCategory=J.content_category,Y.gaProductID=J.content_ids,Y.vvsProductCategory=J.vivense_category,Y.gaListingName=null===(o=J.ecommerce)||void 0===o||null===(a=o.detail)||void 0===a||null===(i=a.actionField)||void 0===i?void 0:i.list,Y.vvsIsShowroom=void 0===window.isAdmin?J.isAdmin:window.isAdmin,Y.vvsProductGroup=J.productGroup,Y.vvsUserId=J.userId,Y.vvsCategory=J.vivense_category,Y.gaCategoryProductCont=J.category_product_count,Y.gaCartProducts=(null===(c=J.ecommerce)||void 0===c||null===(s=c.checkout)||void 0===s?void 0:s.products)||(null===(u=J.ecommerce)||void 0===u||null===(l=u.purchase)||void 0===l?void 0:l.products),Y.vvsPDPProduct=null===(d=J.vivenseProducts)||void 0===d?void 0:d.pop(),Y.gaPurchaseId=null===(f=J.ecommerce)||void 0===f||null===(p=f.purchase)||void 0===p||null===(g=p.actionField)||void 0===g?void 0:g.id,Y.gaPurchaseRevenue=null===(v=J.ecommerce)||void 0===v||null===(h=v.purchase)||void 0===h||null===(m=h.actionField)||void 0===m?void 0:m.revenue,Y.gaPurchasePayType=null===(y=J.ecommerce)||void 0===y||null===(w=y.purchase)||void 0===w||null===(b=w.actionField)||void 0===b?void 0:b.dimension15,Y.windowParams=window.location.search,Y.windowPRatio=window.devicePixelRatio,Y.windowInner=window.innerWidth,Y.windowScreen={},Y.windowScreen.availHeight=null===(k=window.screen)||void 0===k?void 0:k.availHeight,Y.windowScreen.availLeft=null===(S=window.screen)||void 0===S?void 0:S.availLeft,Y.windowScreen.availTop=null===(x=window.screen)||void 0===x?void 0:x.availTop,Y.windowScreen.availWidth=null===(I=window.screen)||void 0===I?void 0:I.availWidth,Y.windowScreen.colorDepth=null===(L=window.screen)||void 0===L?void 0:L.colorDepth,Y.windowScreen.height=null===(A=window.screen)||void 0===A?void 0:A.height,Y.windowScreen.pixelDepth=null===(P=window.screen)||void 0===P?void 0:P.pixelDepth,Y.windowScreen.width=null===(C=window.screen)||void 0===C?void 0:C.width,Y.windowVPort={},Y.windowVPort.height=null===(T=window.visualViewport)||void 0===T?void 0:T.height,Y.windowVPort.offsetLeft=null===(E=window.visualViewport)||void 0===E?void 0:E.offsetLeft,Y.windowVPort.offsetTop=null===(_=window.visualViewport)||void 0===_?void 0:_.offsetTop,Y.windowVPort.onresize=null===(O=window.visualViewport)||void 0===O?void 0:O.onresize,Y.windowVPort.onscroll=null===(N=window.visualViewport)||void 0===N?void 0:N.onscroll,Y.windowVPort.pageLeft=null===(j=window.visualViewport)||void 0===j?void 0:j.pageLeft,Y.windowVPort.pageTop=null===(R=window.visualViewport)||void 0===R?void 0:R.pageTop,Y.windowVPort.scale=null===(q=window.visualViewport)||void 0===q?void 0:q.scale,Y.windowVPort.width=null===(V=window.visualViewport)||void 0===V?void 0:V.width,screen.width){var X=parseInt(screen.width),Z=screen.height?parseInt(screen.height):0;if(0!==X&&0!==Z){if(/iPad|iPhone|iPod/.test(F)&&window.devicePixelRatio)X=Math.round(X*window.devicePixelRatio),Z=Math.round(Z*window.devicePixelRatio);else if(90===Math.abs(window.orientation)){var ee=X;X=Z,Z=ee}Y.window=X+"x"+Z}}if(Y.navHistSize=null===(U=window.history)||void 0===U?void 0:U.length,Y.navAgent=navigator.userAgent,Y.navAgent||navigator.userAgentData&&(Y.navAgent=navigator.userAgentData.brands.map((function(e){return e.brand+":"+e.version})).join(),Y.navAgent+=navigator.userAgentData.mobile?" mobi ":" ",Y.navAgent+=F),Y.navHWCores=navigator.hardwareConcurrency,Y.navLanguage=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage,Y.navTouch=navigator.maxTouchPoints,Y.navPlatform=navigator.platform,Y.navVendor=navigator.vendor,Y.cookieGaId=D(document.cookie,"_ga"),Y.cookieLastBreadCrumb=D(document.cookie,"lastbreadcrumb"),Y.cookieLastCategory=D(document.cookie,"lastcategory"),Y.cookieFirstEntry=decodeURIComponent(D(document.cookie,"vivensefirst")),Y.perfMetrics={},window.performance&&window.performance.getEntriesByType("navigation")[0]){var te=window.performance.getEntriesByType("navigation")[0];Y.perfMetrics.pld=Math.round(te.domContentLoadedEventEnd-te.connectStart),Y.perfMetrics.net=Math.round(te.connectEnd-te.fetchStart),Y.perfMetrics.srv=Math.round(te.responseStart-te.requestStart),Y.perfMetrics.tfr=Math.round(te.responseEnd-te.responseStart),Y.perfMetrics.dmi=Math.round(te.domInteractive-te.responseEnd),Y.perfMetrics.dcp=Math.round(te.domComplete-te.domInteractive),Y.perfMetrics.onl=Math.round(te.loadEventEnd-te.loadEventStart)}var ne,re=ie(document.querySelectorAll('[type="application/ld+json"]'));try{for(re.s();!(ne=re.n()).done;){var oe=ne.value;try{var ce=oe.textContent,se=JSON.parse(ce),ue="@";switch(se["@type"]){case"Organization":case"WebSite":break;case"CollectionPage":var le,de=ie(se.breadcrumb.itemListElement);try{for(de.s();!(le=de.n()).done;)ue+=" | "+le.value.item.name}catch(e){de.e(e)}finally{de.f()}Y.sorgBreadcrumb=ue,Y.sorgProduct||(Y.sorgListing={}),Y.sorgListing.name=se.mainEntity.name,Y.sorgListing.countItems=se.mainEntity.numberOfItems;break;case"BreadcrumbList":var fe,pe=ie(se.itemListElement);try{for(pe.s();!(fe=pe.n()).done;)ue+=" | "+fe.value.name}catch(e){pe.e(e)}finally{pe.f()}Y.sorgBreadcrumb=ue;break;case"Product":Y.sorgProduct||(Y.sorgProduct={}),Y.sorgProduct.sku=se.sku,Y.sorgProduct.name=se.name,Y.sorgProduct.price=se.offers.price,Y.sorgProduct.priceCurrency=se.offers.priceCurrency,Y.sorgProduct.priceValidUntil=se.offers.priceValidUntil;break;default:console.log(se)}}catch(e){this.logger.warn(e.message)}}}catch(e){re.e(e)}finally{re.f()}var ge,ve=document.getElementsByTagName("script"),he={vvsScrGAPageType:"(?:PageType'[ ]*:[ ]*')(.*)(?:')",vvsScrGAOrderId:"(?:purchase[\\s\\S]*actionField[\\s\\S]*'id'[ ]*:[ ]*')(.*)(?:')",vvsScrGAOrderRev:"(?:purchase[\\s\\S]*actionField[\\s\\S]*'revenue'[ ]*:[ ]*')(.*)(?:')",vvsScrGAOrderType:"(?:purchase[\\s\\S]*actionField[\\s\\S]*'dimension15'[ ]*:[ ]*')(.*)(?:')",vvsScrGAIsAdmin:"(?:dataLayer[\\s\\S]*'isAdmin'[ ]*:[ ]*\")(.*)(?:\")"};found=0;for(var me=ve.length-1;me>=0;me--){var ye=ve[me].innerText;for(var we in he)if(Object.prototype.hasOwnProperty.call(he,we))try{if(!Y[we]){var be=new RegExp(he[we],"i");Y[we]=be.exec(ye),Y[we]&&(found++,Y[we].length>0&&(Y[we]=Y[we][1]))}}catch(e){this.logger.warn(e.message)}if(found==he.length)break}return Y.v="0.0.25",Y.n="nextday-session_id-".concat(this.sessionId),Y.t=Date.now(),Y.sr=50,Y.donttrack=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Y.u=B.href,Y.d=B.hostname,Y.r=document.referrer,Y.beagleInfoLayer=window.beagleInfoLayer||{},Y.vvsCntFavProds=window.favoriteProducts&&window.favoriteProducts.split(",").length>0?window.favoriteProducts.split(",").length:0,Y.vvsHasSetEmail=window.userEmail.length>0,Y.vvsLoginType=window.userId>0?"member":"guest",ge=document.querySelector('[class*="basket_summary_total"], [class*="total_row"]'),Y.vvsPurcPriceElt=ge?ge.innerText:null,ge=document.querySelector('[class*="order_follow_numb"], [class*="cart-title-bottom"]'),Y.vvsPurchaseOrderID=ge?ge.innerText:null,ge=document.querySelector('[class*="payment_type_title"], [class*="cart-title-info"]'),Y.vvsPurcTypeElt=ge?ge.innerText:null,ge=document.querySelector('[id*="breadcrumb-ol"], [class*="long-breadcrumb"]'),Y.vvsViewCrumb=ge?ge.innerText:null,ge=document.querySelector('[class*="order-final-number"]'),Y.vvsCartTotal=ge?ge.innerText:null,ge=document.querySelector('[class*="basket_total_price"]'),Y.vvsViewBasketTotal=ge?ge.innerText:null,ge=document.querySelector('[id*="cart_quantity"], [class*="basket_length"]'),Y.vvsViewBasketCount=ge&&ge.length>0?ge.length:0,ge=document.querySelector('[class*="welcome_username"]'),Y.vvsViewLoggedin=!!ge&&ge.innerText.length>0,ge=document.querySelectorAll('[class*="vivense-showrooms"] > *'),Y.vvsPDPShowroomCount=ge?ge.length:null,ge=document.querySelector('[class*="delivery-date"]'),Y.vvsPDPDeliveryDate=ge?ge.innerText:null,ge=document.querySelector('[class*="product-title"], [class*="header-bottom"]'),Y.vvsPDPTitle=ge?ge.innerText:null,ge=document.querySelector('[class*="count-of-product"]'),Y.vvsPLPItemCount=ge?ge.innerText:null,ge=document.querySelector('[class*="subcategories-title"]'),Y.vvsPLPName=ge?ge.innerText:null,Y}},{key:"initializeExitEventListener",value:function(){var e=this,t=this.logger,n=!1;t.log("Initializing exit event listener"),window.addEventListener("beforeunload",(function(){if(!n){n=!0,t.log("In beforeunload event");var r=e.packageUpdateLogData();r?e.queueLogs(r):t.log("No changes to log")}}),{capture:!0}),window.addEventListener("pagehide",(function(){if(!n){n=!0,t.log("In pagehide event");var r=e.packageUpdateLogData();r?e.queueLogs(r):t.log("No changes to log")}}),{capture:!0})}},{key:"queueLogs",value:function(e){var t=this.logger,n=navigator.sendBeacon(p,e),r=setInterval((function(){n?(clearInterval(r),t.log("Logs queued successfully")):n=navigator.sendBeacon(p,e)}),10);setTimeout((function(){clearInterval(r),n||t.log("Logs not queued")}),1e3)}}]),e}(),ue=se,le=new I("Nextday Treatment Repository"),de=function(){function e(t){l(this,e);var n=t.cookiePct,r=t.treatments;this.treatments=r,this.cookiePct=n}var t;return f(e,[{key:"getMatchedTreatments",value:function(){var e=this.getUserSegment(),t=this.treatments.filter((function(t){return t.apply_on_user_segment==e||"*"===t.apply_on_user_segment}));return le.log("".concat(t.length," treatments segment matched")),t.length?t:[]}},{key:"getUserSegment",value:function(){if(-1===this.cookiePct)throw le.log("New user has no segment"),new Error("New User");return this.cookiePct<50?"A":"B"}}],[{key:"getTreatments",value:(t=c(u().mark((function e(){var t,n,r,o,a,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(le.log("Loading treatments"),t="ND_Treatments",n=JSON.parse(window.sessionStorage.getItem(t)),r=null==n?void 0:n.treatments,o=null==n?void 0:n.timestamp,r&&o){e.next=13;break}return le.log("Treatments not found in local storage"),e.next=9,q();case 9:return r=e.sent,a={timestamp:Date.now(),treatments:r},window.sessionStorage.setItem(t,JSON.stringify(a)),e.abrupt("return",r);case 13:if(!o){e.next=23;break}if(!((Date.now()-o)/864e5>1)){e.next=23;break}return le.log("Treatments are expired"),e.next=19,q();case 19:return r=e.sent,i={timestamp:Date.now(),treatments:r},window.sessionStorage.setItem(t,JSON.stringify(i)),e.abrupt("return",r);case 23:return le.log("Treatments are loaded from local storage"),e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),fe=de,pe=new I("Nextday Counter Checker"),ge=function(e){pe.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;switch(t){case"pageView":return he(n,r);case"CABasketPrice":return me(n,r);default:return pe.log("No such operator",t),!1}},ve=function(e,t){try{switch(t){case"session":return sessionStorage.getItem(e);case"local":return localStorage.getItem(e);default:return pe.log("No such type",t),null}}catch(t){return pe.log("Could not get counter ".concat(e),t),null}},he=function(e,t){var n=parseInt(ve(y,"session"));return pe.log("Page views counter value: ",n),null===n?(pe.log("Pageviews counter not found in session storage"),!1):J(n,e,parseInt(t))},me=function(e,t){var n=parseInt(ve(k,"local"));return pe.log("Coupon applicable basket price counter value: ",n),null===n?(pe.log("Coupon applicable basket price counter not found in local storage"),!1):J(n,e,parseInt(t))},ye=new I("Nextday Element Checker"),we=function(e){ye.log("Checking rule",JSON.stringify(e));var t,n=e.operator,r=e.condition,o=e.value,a=e.selector,i=e.selectorAll,c=e.selectorFallback,s=void 0===c?null:c,u=a;if(u&&!document.querySelector(u)&&(u=s||u),null===n)return J(document.querySelector(u),r,o);if(u&&!document.querySelector(u))return ye.log("Selector not found on page"),!1;if(i&&!document.querySelectorAll(i))return ye.log("Selector not found on page"),!1;switch(u?t=document.querySelector(u):i&&(t=Array.from(document.querySelectorAll(i))),n){case"text-number":var l;l=Array.isArray(t)?t.reduce((function(e,t){return e+parseInt(t.textContent.replace("TL","").replace(".",""))}),0):parseInt(document.querySelector(u).textContent.replace("TL","").replace(".",""));var d=parseInt(l);return J(d,r,o);case"classList":return J(Array.from(t.classList),r,o);case"count":var f=Array.isArray(t)?t.length:t?1:0;return J(f,r,o);default:return ye.log("Operator not defined"),!1}},be=new I("Nextday Function Checker"),ke=function(e,t){be.log("Checking rule",JSON.stringify(e));var n=t.productInfo,r=e.operator,o=e.condition,a=e.value,i=e.bindings;if(!r)return be.log("Rule function not defined"),!1;var c={};"productInfo"==i&&(c={productInfo:n});var s=Function(r).bind(c)();return J(s,o,a)},Se=new I("Nextday Session Checker"),xe=function(e){Se.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;switch(t){case"duration":return Ie(n,r);case"history":return Le(n,r);default:return null}},Ie=function(e,t){var n=(Date.now()-function(){try{return new Date(parseInt(window.sessionStorage.getItem(h)))}catch(e){return Se.log("Could not get session timestamp",e),Date.now()}}())/1e3;return J(n,e,parseInt(t))},Le=function(e,t){var n,r=null===(n=window.sessionStorage.getItem(m))||void 0===n?void 0:n.split(",");return J(r,e,t)},Ae=new I("Nextday Env Checker"),Pe=function(e){Ae.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;if("device_type"===t){var o=window.matchMedia(g).matches?"mobile":"desktop";return J(o,n,r)}},Ce=new I("Nextday RandomPct Checker"),Te=function(){var e=c(u().mark((function e(t){var n,r,o,a,i,c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ce.log("Checking rule",JSON.stringify(t)),n=t.condition,r=t.value,o=t.salt){e.next=5;break}return Ce.log("Salt is not defined"),e.abrupt("return",!1);case 5:return e.next=7,H();case 7:return a=e.sent,e.next=10,V(a+o);case 10:return i=e.sent,c=i,e.abrupt("return",J(c,n,r));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ee(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_e(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Oe=new I("Nextday Rule Engine"),Ne=function(){function e(t){l(this,e);var n=t.baseRuleSet,r=t.subVariantRuleSet,o=t.bindings,a=t.callback,i=void 0===a?null:a;this.baseRuleSet=n,this.subVariantRuleSet=r,this.callback=i,this.bindings=o}var t,n,r;return f(e,[{key:"checkRules",value:(r=c(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ee(this.baseRuleSet),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=12;break}return r=n.value,e.next=7,this.checkRule(r);case 7:if(e.sent){e.next=10;break}return e.abrupt("return",!1);case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,this,[[1,14,17,20]])}))),function(){return r.apply(this,arguments)})},{key:"checkSubVariantRules",value:(n=c(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Ee(this.subVariantRuleSet),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=12;break}return r=n.value,e.next=7,this.checkRule(r);case 7:if(!e.sent){e.next=10;break}return e.abrupt("return",r.subVariantId);case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this,[[1,14,17,20]])}))),function(){return n.apply(this,arguments)})},{key:"checkRule",value:(t=c(u().mark((function e(t){var n,r,o,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.chain,r=t.chain_condition,o=t.type,a=null,e.t0=o,e.next="session"===e.t0?5:"counter"===e.t0?7:"element"===e.t0?9:"dataLayer"===e.t0?11:"url"===e.t0?13:"function"===e.t0?15:"environment"===e.t0?17:"random"===e.t0?19:23;break;case 5:return a=xe(t),e.abrupt("break",25);case 7:return a=ge(t),e.abrupt("break",25);case 9:return a=we(t),e.abrupt("break",25);case 11:return a=C(t),e.abrupt("break",25);case 13:return a=_(t),e.abrupt("break",25);case 15:return a=ke(t,this.bindings),e.abrupt("break",25);case 17:return a=Pe(t),e.abrupt("break",25);case 19:return e.next=21,Te(t);case 21:return a=e.sent,e.abrupt("break",25);case 23:return Oe.log("No such rule type: ".concat(o)),e.abrupt("return",null);case 25:if(!n){e.next=51;break}e.t1=r,e.next="and"===e.t1?29:"or"===e.t1?36:"xor"===e.t1?43:49;break;case 29:if(e.t2=a,!e.t2){e.next=34;break}return e.next=33,this.checkRule(n);case 33:e.t2=e.sent;case 34:return a=e.t2,e.abrupt("break",51);case 36:if(e.t3=a,e.t3){e.next=41;break}return e.next=40,this.checkRule(n);case 40:e.t3=e.sent;case 41:return a=e.t3,e.abrupt("break",51);case 43:return e.t4=a,e.next=46,this.checkRule(n);case 46:return e.t5=e.sent,a=e.t4!=e.t5,e.abrupt("break",51);case 49:return Oe.log("No such chain condition"),e.abrupt("break",51);case 51:return e.abrupt("return",a);case 52:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})}]),e}(),je=new I("Nextday Api"),Re=function(){var e=c(u().mark((function e(){var t,n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(je.log("Starting product info lookup"),t=Q()){e.next=5;break}return je.log("No sku found"),e.abrupt("return",null);case 5:return(n=new Headers).append("Content-Type","application/json"),e.prev=7,e.next=10,fetch("https://catalog-api.adoraai.com",{method:"POST",body:JSON.stringify(t),headers:n,mode:"cors"});case 10:r=e.sent,e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(7),je.warn("Fetch to catalog api failed"),e.abrupt("return",null);case 17:if(r.ok){e.next=20;break}return je.log("Product info lookup failed"),e.abrupt("return",null);case 20:return e.next=22,r.json();case 22:if(r=e.sent){e.next=26;break}return je.log("Product info extraction from response failed"),e.abrupt("return",null);case 26:return je.log("Product info lookup successful"),e.abrupt("return",r);case 28:case"end":return e.stop()}}),e,null,[[7,13]])})));return function(){return e.apply(this,arguments)}}(),qe={PageType:/(?:PageType'[ ]*:[ ]*')(.*)(?:')/,content_name:/(?:content_name[ ]*:[ ]*")(.*)(?:")/},De=new I("BeagleInfoLayer"),Ve=function(){De.log("Initializing beagleInfoLayer"),window.beagleInfoLayer=window.beagleInfoLayer||{checkpoints:[],dataPoints:[]};var e=document.getElementsByTagName("script");if(e&&e.length)for(var t=e.length-1;t>-1;t--)for(var n=e[t].textContent,r=0,o=Object.keys(qe);r<o.length;r++){var a=o[r],i=qe[a].exec(n)?qe[a].exec(n)[1]:null;if(i){var c={};if(c[a]=decodeURIComponent(JSON.parse('"'+i+'"')),window.beagleInfoLayer.dataPoints.push(c),2===window.beagleInfoLayer.dataPoints.length)return}}else De.warn("Could not parse body")};function Ue(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}c(u().mark((function t(){var n,r,i,s,l,d;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ne(te.BeagleLoaded),n=null,r=null,i=new I,s="ND_TimeoutCount",l=null,i.info("Nextday initializing"),t.prev=7,t.delegateYield(u().mark((function e(){var t,d,f,p,b,x,I,L,A,P,C,T,E,_,O,N,j,q,D,U,M,J,G,$,z,K,Q,W;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ve(),t=Re(),void 0,pe=void 0,de=S,pe=window.location.search,d=pe.includes("nd_debug=1")?(window.localStorage.setItem(de,1),1):pe.includes("nd_debug=2")?(window.localStorage.setItem(de,2),2):pe.includes("nd_debug=0")?(window.localStorage.removeItem(de),0):parseInt(window.localStorage.getItem(de))||0,r=new ue(d),ne(te.Initialized),e.next=7,H();case 7:return f=e.sent,i.log("Found cookie identifier: ",f),e.next=11,V(f);case 11:if(p=e.sent,d){e.next=27;break}if(!(p<50)){e.next=19;break}if(-1!==p){e.next=16;break}throw new Error("Could not determine cookie pct");case 16:n=!1,e.next=20;break;case 19:n=!0;case 20:if(ne(te.UserOnOff),!((l=parseInt(sessionStorage.getItem(s))||0)>1)){e.next=25;break}throw ne(te.TimeoutThresholdReached),new Error("Nextday timeout threshold reached");case 25:e.next=28;break;case 27:i.info("Debug mode on: all applicable treatments will be applied");case 28:if(b=window.location.search,x=d&&b.includes("filter=")?b.slice(b.indexOf("[")+1,b.lastIndexOf("]")).split(",").map((function(e){return parseInt(e,10)})):null,document.documentElement.classList.contains("nextDay-hide")){e.next=34;break}throw ne(te.ScriptTimeOut),sessionStorage.setItem(s,l+1),new Error("Nextday script timed out");case 34:if(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"GLOV",GLOV_ON:n?"true":"false"}),!1!==n){e.next=38;break}throw new Error("Control group: no treatments applied");case 38:return B(),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Y=y,X=w,ee=v,re=h,oe=m,ae=sessionStorage.getItem(Y),ie=sessionStorage.getItem(X),ce=sessionStorage.getItem(ee),se=sessionStorage.getItem(re),le=sessionStorage.getItem(oe),ae?sessionStorage.setItem(Y,parseInt(ae)+1):sessionStorage.setItem(Y,1),null===ie&&sessionStorage.setItem(X,0),ce||sessionStorage.setItem(ee,crypto.randomUUID()),se||sessionStorage.setItem(re,Date.now()),le?sessionStorage.setItem(oe,[window.location.pathname,le]):sessionStorage.setItem(oe,[window.location.pathname]),setTimeout((function(){R()}),2e3),I=fe.getTreatments(),L=window.matchMedia(g).matches,A={subtree:!0,childList:!0,attributes:!0},P=function(){var e=c(u().mark((function e(t){var n,r,o,c,s,l,p,g,v,h,m,y,w,b,k,S,I,A,P,C,T;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,r=t.actions,o=t.baseRuleSet,c=t.device,s=t.dependant_on_treatment,l=t.reapply_event,p=t.subVariantRuleSet,g=t.weight,!x||x.includes(n)){e.next=3;break}return e.abrupt("return");case 3:if("mobile"!==c||L){e.next=6;break}return i.log("Treatment device 'mobile' mismatch"),e.abrupt("return");case 6:if("desktop"!==c||!L){e.next=9;break}return i.log("Treatment device 'desktop' mismatch"),e.abrupt("return");case 9:if(l){v=l,Array.isArray(l)||(v=[l]),i.log("Reapply event '".concat(l,"' found for treatment: ").concat(n)),h=Ue(v);try{for(h.s();!(m=h.n()).done;)y=m.value,(w=J[y]?J[y]:[]).includes(n)?i.log("Treatment already added for reapply event"):J[y]=[].concat(a(w),[n])}catch(e){h.e(e)}finally{h.f()}}if(b=new Ne({baseRuleSet:o,subVariantRuleSet:p,bindings:{productInfo:j}}),i.log("Starting base rule set check for treatment: "+n),e.t0=!o,e.t0){e.next=18;break}return e.next=17,b.checkRules();case 17:e.t0=e.sent;case 18:if(!e.t0){e.next=49;break}if(k=100===g?0:100-g||50,s&&(I=null===(S=D.find((function(e){return e.id===s})))||void 0===S?void 0:S.weight,k=100===I?0:100-I||50),i.log("Treatment skip ratio: "+k),A=s||n,1!==d){e.next=27;break}e.t1=100,e.next=30;break;case 27:return e.next=29,V(f+A);case 29:e.t1=e.sent;case 30:if(P=e.t1,i.log("TreatmentPct: "+P+" with debug mode ".concat(d?"on":"off")),C=null,T=r,!p){e.next=40;break}return i.log("Starting sub variant rule set check for treatment: "+n),e.next=38,b.checkSubVariantRules();case 38:(C=e.sent)?(i.log("Applying sub variant with id: ",C),T=F(r,C)):i.log("Applying treatment with default values");case 40:if(!(P<k)){e.next=46;break}return i.log("Treatment ".concat(n," skipped due to treatment split ratio")),M[n]={dependant_on_treatment:s||null,subVariantId:C},e.abrupt("return");case 46:return Z(T,j),U[n]={subVariantId:C},e.abrupt("return");case 49:i.log("Rule check failed for treatment: ",n);case 50:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(C=function(){var e=k;if(window.location.href.includes("/siparis-listesi.html")){var t=Array.from(document.querySelectorAll(".price"));if(t.push.apply(t,a(Array.from(document.querySelectorAll(".new-price")))),!t.length)return i.log("Price elements not found"),void window.localStorage.setItem(e,0);i.log("Price elements: ",t);var n=t.reduce((function(e,t){return e+parseInt(t.textContent.replace("TL","").replace(".",""))}),0);i.log("Coupon applicable total price: ",n),n>=0&&window.localStorage.setItem(e,n)}else(window.location.href.includes("/siparis-ozeti.html")||null===window.localStorage.getItem(e))&&window.localStorage.setItem(e,0)})(),window.location.href.includes("/siparis-listesi.html")&&(T=new MutationObserver((function(){i.log("Mutation observed, calling collectCABasketPrice"),C()})),(E=document.querySelector("#checkoutForm"))&&T.observe(E,A)),e.next=50,Promise.all([I,t]);case 50:if(_=e.sent,O=o(_,2),N=O[0],j=O[1],i.log("Found treatments: ",N),i.log("Found cookie percentage: ",p),i.log("Split_ratio: ",50),i.log("cookiePct < SPLIT_RATIO",p<50),i.info("Control group ratio: ".concat(50,"%")),q=new fe({treatments:N,cookiePct:p}),ne(te.TreatmentRepositoryCreated),(D=q.getMatchedTreatments()).length){e.next=67;break}return i.log("No treatments matched, returning without further action"),R(),r.sendLogs(n,"No treatments matched",!0),e.abrupt("return",{v:void 0});case 67:U={},M={},J={},G=Ue(D),e.prev=71,G.s();case 73:if(($=G.n()).done){e.next=85;break}return z=$.value,e.prev=75,e.next=78,P(z);case 78:e.next=83;break;case 80:e.prev=80,e.t0=e.catch(75),i.log("Error executing rules",e.t0);case 83:e.next=73;break;case 85:e.next=90;break;case 87:e.prev=87,e.t1=e.catch(71),G.e(e.t1);case 90:return e.prev=90,G.f(),e.finish(90);case 93:for(R(),ne(te.TreatmentsApplied),i.log("Applied treatments: ",U),r.updateTreatments(U,M),r.sendLogs(n),setInterval((function(){r.updateLatestChanges(U,M)}),1e3),K=function(){var e=W[Q],t=J[e],n=D.filter((function(e){return t.includes(e.id)}));switch(e){case"infinite_scroll":var r=new ResizeObserver((function(){var e,t=Ue(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;i.log("Retrying treatment ".concat(r.id," from infinite_scroll")),P(r)}}catch(e){t.e(e)}finally{t.f()}}));r.observe(document.documentElement);break;case"timeout":setTimeout((function(){var e,t=Ue(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;i.log("Retrying treatment ".concat(r.id," from timeout")),P(r)}}catch(e){t.e(e)}finally{t.f()}}),500);break;case"element_change":var o,a=Ue(n);try{var c=function(){var e,t=o.value,n=Ue(Array.isArray(t.reapply_selector)?t.reapply_selector:[t.reapply_selector]);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=document.querySelector(r);a&&new MutationObserver((function(){i.log("Retrying treatment ".concat(t.id," from element_change")),P(t)})).observe(a,A)}}catch(e){n.e(e)}finally{n.f()}};for(a.s();!(o=a.n()).done;)c()}catch(e){a.e(e)}finally{a.f()}break;case"on_scroll":window.onscroll=function(){var e,t=Ue(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;i.log("Retrying treatment ".concat(r.id," from on_scroll")),P(r)}}catch(e){t.e(e)}finally{t.f()}};break;case"query_search_change":var s=window.location.search,u=new MutationObserver((function(){if(window.location.search!==s){s=window.location.search;var e,t=Ue(n);try{for(t.s();!(e=t.n()).done;){var r=e.value;i.log("Retrying treatment ".concat(r.id," from query_search_change")),P(r)}}catch(e){t.e(e)}finally{t.f()}}}));u.observe(document,A);break;case"on_popstate":window.onpopstate=function(e){var t,r=Ue(n);try{for(r.s();!(t=r.n()).done;){var o=t.value;i.log("Retrying treatment ".concat(o.id," from on_popstate")),P(o)}}catch(e){r.e(e)}finally{r.f()}};break;default:i.log("Reapply event not found: ",e)}},Q=0,W=Object.keys(J);Q<W.length;Q++)K();ne(te.ReapplyTreatmentListeners);case 102:case"end":return e.stop()}var Y,X,ee,re,oe,ae,ie,ce,se,le,de,pe}),e,null,[[71,87,90,93],[75,80]])}))(),"t0",9);case 9:if("object"!==e(d=t.t0)){t.next=12;break}return t.abrupt("return",d.v);case 12:t.next=19;break;case 14:t.prev=14,t.t1=t.catch(7),R(),console.warn("Nextday: ",t.t1.message),r.sendLogs(n,t.t1.message,!0);case 19:case"end":return t.stop()}}),t,null,[[7,14]])})))()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWEsQ0FDMUNBLEVBQWNqZixPQUFPc0IsU0FBU0ssT0FEWSxXQUVsQjRnQixHQUZrQixJQUUxQywyQkFBMkMsS0FBaEN4YSxFQUFnQyxRQUN6Q3pILEVBQU9GLElBQVAsNkJBQWlDMkgsRUFBVS9CLEdBQTNDLDhCQUNBc2EsRUFBZ0J2WSxJQUp3QixtQ0FROUM2WixFQUFTRyxRQUFROWYsU0FBVWllLEdBRTNCLE1BQ0YsSUFBSyxjQUNIbGdCLE9BQU8waUIsV0FBYSxTQUFDbmIsR0FBTSxXQUNEZ2IsR0FEQyxJQUN6QiwyQkFBMkMsS0FBaEN4YSxFQUFnQyxRQUN6Q3pILEVBQU9GLElBQVAsNkJBQWlDMkgsRUFBVS9CLEdBQTNDLHNCQUNBc2EsRUFBZ0J2WSxJQUhPLGdDQU8zQixNQUNGLFFBQ0V6SCxFQUFPRixJQUFJLDRCQUE2QjlMLEtBekU5QyxNQUFrQmQsT0FBT21ILEtBQUttbUIsR0FBOUIsZUFBcUQsSUE2RXJEclQsR0FBV1QsR0FBWU8sMkJBN1MxQixtQ2ZzSHNDLElBQzlCbVMsRUFBWTdYLEVBQW9COFgsR0FBWUMsR0FBbUJDLEdBRWhFekQsR0FDQTBELEdBQ0E3UixHQUNBOFIsR0FDQUMsR0E2S0NoQixHQUNEQyxLZTNTUCxxTEErU0dqZCxJQUNBN0IsUUFBUUUsS0FBSyxZQUFhLEtBQUl5TSxTQUM5QjhSLEVBQVF1RCxTQUFTelQsRUFBTSxLQUFJNUIsU0FBUyxHQWpUdkMseURBQUQsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FycmF5TGlrZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhIb2xlcy5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vbm9uSXRlcmFibGVSZXN0LmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hcnJheVdpdGhvdXRIb2xlcy5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2l0ZXJhYmxlVG9BcnJheS5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL25vbkl0ZXJhYmxlU3ByZWFkLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9sb2dnZXIuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5UnVsZUVuZ2luZS9kYXRhTGF5ZXJDaGVja2VyLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheVJ1bGVFbmdpbmUvdXJsQ2hlY2tlci5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL3V0aWxzLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheUFwcGx5VHJlYXRtZW50cy9pbmRleC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL0JlYWdsZUNoZWNrcG9pbnQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlNb25pdG9yL2luZGV4LmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheVRyZWF0bWVudFJlcG9zaXRvcnkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5UnVsZUVuZ2luZS9jb3VudGVyQ2hlY2tlci5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlSdWxlRW5naW5lL2VsZW1lbnRDaGVja2VyLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheVJ1bGVFbmdpbmUvZnVuY3Rpb25DaGVja2VyLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheVJ1bGVFbmdpbmUvc2Vzc2lvbkNoZWNrZXIuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5UnVsZUVuZ2luZS9lbnZDaGVja2VyLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheVJ1bGVFbmdpbmUvcmFuZG9tTnVtYmVyQ2hlY2tlci5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlSdWxlRW5naW5lL2luZGV4LmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheUFwaS9pbmRleC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL0JlYWdsZUluZm9MYXllci9pbmRleC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlDbGllbnRTREsvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBJRSA4IGhhcyBhIGJyb2tlbiBPYmplY3QuZGVmaW5lUHJvcGVydHkgdGhhdCBvbmx5IHdvcmtzIG9uIERPTSBvYmplY3RzLlxuICAgIGRlZmluZSh7fSwgXCJcIik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIGRlZmluZShJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgZGVmaW5lKEdwLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgZGVmaW5lKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoXG4gICAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsXG4gICAgdG9TdHJpbmdUYWdTeW1ib2wsXG4gICAgXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICk7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgZGVmaW5lKHByb3RvdHlwZSwgbWV0aG9kLCBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIik7XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBkZWZpbmUoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUsIGFzeW5jSXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIGRlZmluZShHcCwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yXCIpO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgZGVmaW5lKEdwLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuXG4gIGRlZmluZShHcCwgXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgaW4gbW9kZXJuIGVuZ2luZXNcbiAgLy8gd2UgY2FuIGV4cGxpY2l0bHkgYWNjZXNzIGdsb2JhbFRoaXMuIEluIG9sZGVyIGVuZ2luZXMgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiKSB7XG4gICAgZ2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xuICB9IGVsc2Uge1xuICAgIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG4gIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH0sIF90eXBlb2Yob2JqKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59IiwiaW1wb3J0IGFycmF5TGlrZVRvQXJyYXkgZnJvbSBcIi4vYXJyYXlMaWtlVG9BcnJheS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn0iLCJpbXBvcnQgYXJyYXlXaXRoSG9sZXMgZnJvbSBcIi4vYXJyYXlXaXRoSG9sZXMuanNcIjtcbmltcG9ydCBpdGVyYWJsZVRvQXJyYXlMaW1pdCBmcm9tIFwiLi9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qc1wiO1xuaW1wb3J0IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IGZyb20gXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5LmpzXCI7XG5pbXBvcnQgbm9uSXRlcmFibGVSZXN0IGZyb20gXCIuL25vbkl0ZXJhYmxlUmVzdC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3NsaWNlZFRvQXJyYXkoYXJyLCBpKSB7XG4gIHJldHVybiBhcnJheVdpdGhIb2xlcyhhcnIpIHx8IGl0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBub25JdGVyYWJsZVJlc3QoKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGFycikpIHJldHVybiBhcnI7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheUxpbWl0KGFyciwgaSkge1xuICB2YXIgX2kgPSBhcnIgPT0gbnVsbCA/IG51bGwgOiB0eXBlb2YgU3ltYm9sICE9PSBcInVuZGVmaW5lZFwiICYmIGFycltTeW1ib2wuaXRlcmF0b3JdIHx8IGFycltcIkBAaXRlcmF0b3JcIl07XG5cbiAgaWYgKF9pID09IG51bGwpIHJldHVybjtcbiAgdmFyIF9hcnIgPSBbXTtcbiAgdmFyIF9uID0gdHJ1ZTtcbiAgdmFyIF9kID0gZmFsc2U7XG5cbiAgdmFyIF9zLCBfZTtcblxuICB0cnkge1xuICAgIGZvciAoX2kgPSBfaS5jYWxsKGFycik7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIF9kID0gdHJ1ZTtcbiAgICBfZSA9IGVycjtcbiAgfSBmaW5hbGx5IHtcbiAgICB0cnkge1xuICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSAhPSBudWxsKSBfaVtcInJldHVyblwiXSgpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBfYXJyO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxcbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC5cIik7XG59IiwiaW1wb3J0IGFycmF5V2l0aG91dEhvbGVzIGZyb20gXCIuL2FycmF5V2l0aG91dEhvbGVzLmpzXCI7XG5pbXBvcnQgaXRlcmFibGVUb0FycmF5IGZyb20gXCIuL2l0ZXJhYmxlVG9BcnJheS5qc1wiO1xuaW1wb3J0IHVuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IGZyb20gXCIuL3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5LmpzXCI7XG5pbXBvcnQgbm9uSXRlcmFibGVTcHJlYWQgZnJvbSBcIi4vbm9uSXRlcmFibGVTcHJlYWQuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF90b0NvbnN1bWFibGVBcnJheShhcnIpIHtcbiAgcmV0dXJuIGFycmF5V2l0aG91dEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5KGFycikgfHwgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBub25JdGVyYWJsZVNwcmVhZCgpO1xufSIsImltcG9ydCBhcnJheUxpa2VUb0FycmF5IGZyb20gXCIuL2FycmF5TGlrZVRvQXJyYXkuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkoYXJyKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5KGl0ZXIpIHtcbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgaXRlcltTeW1ib2wuaXRlcmF0b3JdICE9IG51bGwgfHwgaXRlcltcIkBAaXRlcmF0b3JcIl0gIT0gbnVsbCkgcmV0dXJuIEFycmF5LmZyb20oaXRlcik7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkge1xuICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn0iLCJmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7XG4gIHRyeSB7XG4gICAgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpO1xuICAgIHZhciB2YWx1ZSA9IGluZm8udmFsdWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmVqZWN0KGVycm9yKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoaW5mby5kb25lKSB7XG4gICAgcmVzb2x2ZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7XG5cbiAgICAgIGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJuZXh0XCIsIHZhbHVlKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gX3Rocm93KGVycikge1xuICAgICAgICBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIFwidGhyb3dcIiwgZXJyKTtcbiAgICAgIH1cblxuICAgICAgX25leHQodW5kZWZpbmVkKTtcbiAgICB9KTtcbiAgfTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufSIsImZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTtcbiAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gIGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuICBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShDb25zdHJ1Y3RvciwgXCJwcm90b3R5cGVcIiwge1xuICAgIHdyaXRhYmxlOiBmYWxzZVxuICB9KTtcbiAgcmV0dXJuIENvbnN0cnVjdG9yO1xufSIsIi8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbmV4cG9ydCBjb25zdCBDT09LSUVfTkFNRSA9IFwiX2dhXCI7XG4vLyBUT0RPIHJldmVydCB0aGUgZm9sbG93aW5nIHN0YWdpbmcgZW52IGNoZWNrIGFmdGVyIG1vdmluZyB0byBuZXcgYnJhbmNoIHN0cnVjdHVyZVxuZXhwb3J0IGNvbnN0IFRSRUFUTUVOVFNfTE9DQVRJT04gPSBcImh0dHBzOi8vaG9zdC1iOTYucGFnZXMuZGV2L3RyZWF0bWVudHMuanNvblwiO1xuZXhwb3J0IGNvbnN0IFNUWUxFU0hFRVRfTE9DQVRJT04gPSBcImh0dHBzOi8vaG9zdC1iOTYucGFnZXMuZGV2L25kLXN0eWxlc3MuY3NzXCI7XG5leHBvcnQgY29uc3QgTE9HX0FQSV9VUkwgPSBcImh0dHBzOi8vZXVyb3BlLXdlc3QzLW5leHRkYXktMzRlYjMuY2xvdWRmdW5jdGlvbnMubmV0L2FwaS9sb2dSZXNwb25zZVwiO1xuZXhwb3J0IGNvbnN0IExPT0tVUF9BUElfVVJMID0gXCJodHRwczovL2NhdGFsb2ctYXBpLmFkb3JhYWkuY29tXCI7XG5leHBvcnQgY29uc3QgTU9CSUxFX01FRElBX1FVRVJZID0gXCIobWF4LXdpZHRoOiA0NDBweClcIjtcbi8vIENvbnRyb2wgZ3JvdXAgcGVyY2VudGFnZVxuZXhwb3J0IGNvbnN0IFNQTElUX1JBVElPID0gNTA7XG4vLyBTa2lwcGVkIHRyZWF0bWVudCBwZXJjZW50YWdlXG5leHBvcnQgY29uc3QgVFJFQVRNRU5UX1JBVElPID0gNTA7XG5leHBvcnQgY29uc3QgVFJFQVRNRU5UU19EVVJBVElPTiA9IDE7XG5leHBvcnQgY29uc3QgTUFYX1RJTUVPVVRfUEVSX1NFU1NJT04gPSAxO1xuXG5cbmV4cG9ydCBjb25zdCBTRVNTSU9OX1NUT1JBR0VfS0VZUyA9IHtcbiAgU0VTU0lPTl9JRDogXCJfX25leHRkYXlfc2Vzc2lvbl9pZFwiLFxuICBTRVNTSU9OX1RJTUVTVEFNUDogXCJORF9TZXNzaW9uVGltZXN0YW1wXCIsXG4gIFNFU1NJT05fSElTVE9SWTogXCJCTl9TZXNzaW9uSGlzdG9yeVwiLFxuICBUUkVBVE1FTlRTOiBcIk5EX1RyZWF0bWVudHNcIixcbiAgUEFHRV9WSUVXUzogXCJORF9QYWdlVmlld3NcIixcbiAgUE9QVVBfRElTUExBWV9GTEFHOiBcIk5EX1BvcHVwRGlzcGxheUZsYWdcIixcbiAgTkRfU0tVX0xJU1Q6IFwiTkRfU2t1TGlzdFwiLFxuICBUSU1FT1VUX0NPVU5UOiBcIk5EX1RpbWVvdXRDb3VudFwiLFxufTtcbmV4cG9ydCBjb25zdCBMT0NBTF9TVE9SQUdFX0tFWVMgPSB7XG4gIENPVVBPTl9BUFBMSUNBQkxFX0JBU0tFVF9QUklDRTogXCJORF9DQUJhc2tldFByaWNlXCIsXG4gIE5EX0RFQlVHX01PREU6IFwiTkRfRGVidWdcIixcbn07XG4iLCJpbXBvcnQge0xPQ0FMX1NUT1JBR0VfS0VZU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5jbGFzcyBMb2dnZXIge1xuICBjb25zdHJ1Y3RvcihvcmlnaW4gPSBcIk5leHRkYXkgQ2xpZW50IFNES1wiKSB7XG4gICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgdGhpcy5ERUJVRyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuTkRfREVCVUdfTU9ERSk7XG4gIH1cblxuICBpbmZvKC4uLmFyZ3MpIHtcbiAgICBjb25zdCB7b3JpZ2lufSA9IHRoaXM7XG4gICAgY29uc29sZS5pbmZvKGBbJHtvcmlnaW59XWAsIC4uLmFyZ3MpO1xuICB9XG5cbiAgbG9nKC4uLmFyZ3MpIHtcbiAgICBjb25zdCB7REVCVUcsIG9yaWdpbn0gPSB0aGlzO1xuICAgIGlmIChERUJVRykge1xuICAgICAgY29uc29sZS5sb2coYFske29yaWdpbn1dYCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgd2FybiguLi5hcmdzKSB7XG4gICAgY29uc3Qge29yaWdpbn0gPSB0aGlzO1xuICAgIGNvbnNvbGUud2FybihgWyR7b3JpZ2lufV1gLCAuLi5hcmdzKTtcbiAgfVxuXG4gIGVycm9yKC4uLmFyZ3MpIHtcbiAgICBjb25zdCB7b3JpZ2lufSA9IHRoaXM7XG4gICAgY29uc29sZS5lcnJvcihgWyR7b3JpZ2lufV1gLCAuLi5hcmdzKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2dnZXI7XG4iLCJpbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBEYXRhTGF5ZXIgQ2hlY2tlclwiKTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrRGF0YUxheWVyUnVsZSA9IChydWxlKSA9PntcbiAgbG9nZ2VyLmxvZyhcIkNoZWNraW5nIHJ1bGVcIiwgSlNPTi5zdHJpbmdpZnkocnVsZSkpO1xuICBjb25zdCB7b3BlcmF0b3IsIGNvbmRpdGlvbiwgdmFsdWV9ID0gcnVsZTtcbiAgY29uc3QgcnVudGltZVZhbHVlID0gZGF0YUxheWVyRmluZGVyKG9wZXJhdG9yKTtcbiAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIocnVudGltZVZhbHVlLCBjb25kaXRpb24sIHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkYXRhTGF5ZXJGaW5kZXIgPSAoa2V5KSA9PiB7XG4gIGxvZ2dlci5sb2coXCJTZWFyY2hpbmcgYmVhZ2xlSW5mb0xheWVyIGZvciBrZXkgXCIsIGtleSk7XG4gIGZvciAoY29uc3Qgb2JqIG9mIHdpbmRvdy5iZWFnbGVJbmZvTGF5ZXIuZGF0YVBvaW50cykge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgIGlmIChrZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIGxvZ2dlci5sb2coYEZvdW5kIGtleSAke2tleX0gd2l0aCB2YWx1ZSAke29ialtrZXldfWApO1xuICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH1cbiAgfVxuICBsb2dnZXIubG9nKGBLZXkgJHtrZXl9IG5vdCBmb3VuZCBpbiBiZWFnbGVJbmZvTGF5ZXJgKTtcblxuICBsb2dnZXIubG9nKFwiU2VhcmNoaW5nIGRhdGFMYXllciBmb3Iga2V5IFwiLCBrZXkpO1xuICBmb3IgKGNvbnN0IG9iaiBvZiB3aW5kb3cuZGF0YUxheWVyKSB7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgaWYgKGtleXMuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgbG9nZ2VyLmxvZyhgRm91bmQga2V5ICR7a2V5fSB3aXRoIHZhbHVlICR7b2JqW2tleV19YCk7XG4gICAgICByZXR1cm4gb2JqW2tleV07XG4gICAgfVxuICB9XG4gIGxvZ2dlci5sb2coYEtleSAke2tleX0gbm90IGZvdW5kIGluIGRhdGFMYXllcmApO1xuICByZXR1cm4gbnVsbDtcbn07XG4iLCJpbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBVcmwgQ2hlY2tlclwiKTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrVXJsUnVsZSA9IChydWxlKSA9PntcbiAgbG9nZ2VyLmxvZyhcIkNoZWNraW5nIHJ1bGVcIiwgSlNPTi5zdHJpbmdpZnkocnVsZSkpO1xuICBjb25zdCB7b3BlcmF0b3IsIGNvbmRpdGlvbiwgdmFsdWV9ID0gcnVsZTtcblxuICBzd2l0Y2ggKG9wZXJhdG9yKSB7XG4gICAgY2FzZSBcInBhdGhcIjoge1xuICAgICAgY29uc3QgcmVxdWVzdFVSTD0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgICBjb25zdCBpc0FqYXggPSByZXF1ZXN0VVJMLmluY2x1ZGVzKFwiYWpheC9tb2JpbGUtc2VhcmNoL2xvYWRPdGhlclBhZ2VzLnBocFwiKTtcbiAgICAgIGNvbnN0IHBhdGggPSAhaXNBamF4ID8gbmV3IFVSTChyZXF1ZXN0VVJMKS5wYXRobmFtZSA6XG4gICAgICBkZWNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgbmV3IFVSTChyZXF1ZXN0VVJMKS5zZWFyY2gucmVwbGFjZShcIj9vcmlnaW5hbFBhdGg9XCIsIFwiXCIpLFxuICAgICAgKTtcbiAgICAgIGxvZ2dlci5sb2coYENoZWNraW5nIHBhdGggJHtwYXRofSBtYXRjaGVzIHJ1bGUgcGF0aCAke3ZhbHVlfWApO1xuICAgICAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIocGF0aCwgY29uZGl0aW9uLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IHtjaGVja0RhdGFMYXllclJ1bGV9IGZyb20gXCIuL05leHRkYXlSdWxlRW5naW5lL2RhdGFMYXllckNoZWNrZXJcIjtcbmltcG9ydCB7Y2hlY2tVcmxSdWxlfSBmcm9tIFwiLi9OZXh0ZGF5UnVsZUVuZ2luZS91cmxDaGVja2VyXCI7XG5pbXBvcnQge1xuICBDT09LSUVfTkFNRSxcbiAgTE9DQUxfU1RPUkFHRV9LRVlTLFxuICBTRVNTSU9OX1NUT1JBR0VfS0VZUyxcbiAgU1RZTEVTSEVFVF9MT0NBVElPTixcbiAgVFJFQVRNRU5UU19MT0NBVElPTn0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgTG9nZ2VyIGZyb20gXCIuL2xvZ2dlclwiO1xuXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBVdGlsc1wiKTtcblxuaWYgKCEoXCJyYW5kb21VVUlEXCIgaW4gY3J5cHRvKSkge1xuICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjExNzUyMy8yODAwMjE4XG4gIC8vIExJQ0VOU0U6IGh0dHBzOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS80LjAvbGVnYWxjb2RlXG4gIHtcbiAgICByYW5kb21VVUlERmFsbGJhY2soKTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgcmVtb3ZlRG9jdW1lbnRIaWRlID0gKCkgPT4ge1xuICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm5leHREYXktaGlkZVwiKTtcbn07XG5cbmV4cG9ydCBjb25zdCBmZXRjaFRyZWF0bWVudHMgPSBhc3luYyAoKSA9PiB7XG4gIGxvZ2dlci5sb2coXCJGZXRjaGluZyB0cmVhdG1lbnRzXCIpO1xuICBjb25zdCB0cmVhdG1lbnRzID0gYXdhaXQgZmV0Y2goVFJFQVRNRU5UU19MT0NBVElPTik7XG4gIHJldHVybiBhd2FpdCB0cmVhdG1lbnRzLmpzb24oKTtcbn07XG5cbmV4cG9ydCBjb25zdCBleHRyYWN0Q29va2llSWRlbnRpZmllciA9IChjb29raWVTdHJpbmcsIGNvb2tpZU5hbWUpID0+IHtcbiAgaWYgKCFjb29raWVTdHJpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGNvbnN0IHBhcnNlZCA9IGNvb2tpZVN0cmluZ1xuICAgICAgLnNwbGl0KFwiO1wiKVxuICAgICAgLm1hcCgodikgPT4gdi5zcGxpdChcIj1cIikpXG4gICAgICAucmVkdWNlKChhY2MsIHYpID0+IHtcbiAgICAgICAgaWYgKHZbMF0gJiYgdlsxXSkge1xuICAgICAgICAgIGFjY1tkZWNvZGVVUklDb21wb25lbnQodlswXS50cmltKCkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2WzFdLnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9KTtcblxuICBsZXQgaWRlbnRpZmllciA9IHBhcnNlZFtjb29raWVOYW1lXTtcbiAgaWYgKCFpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGNvb2tpZU5hbWUgPT09IFwiX2dhXCIpIHtcbiAgICAvLyBleHRyYWN0IHVuaXF1ZSBpZGVudGlmaWVyIGZyb20gR0EgY29va2llXG4gICAgY29uc3QgaWRlbnRpZmllckluZGV4ID0gMjtcbiAgICBpZGVudGlmaWVyID0gaWRlbnRpZmllci5zcGxpdChcIi5cIilbaWRlbnRpZmllckluZGV4XTtcbiAgfVxuICByZXR1cm4gaWRlbnRpZmllcjtcbn07XG5cbmV4cG9ydCBjb25zdCBkZXRlcm1pbmVQY3QgPSBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuICBjb25zdCBzdWJzdHJpbmdTdGFydFBvc2l0aW9uID0gOTtcbiAgY29uc3Qgc3Vic3RyaW5nTGVuZ3RoID0gODtcbiAgY29uc3Qgc3Vic3RyaW5nRW5kUG9zaXRpb24gPSBzdWJzdHJpbmdTdGFydFBvc2l0aW9uICsgc3Vic3RyaW5nTGVuZ3RoO1xuICBpZiAoIWlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgLy8gZW5jb2RlIHN0cmluZyB0byBhbiBhcnJheSBvZiA4LWJpdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlc1xuICBjb25zdCBlbmNvZGVkID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlkZW50aWZpZXIpO1xuXG4gIC8vIGhhc2ggdGhlIGVuY29kZWQgY29va2llIGludG8gYSBidWZmZXJcbiAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTFcIiwgZW5jb2RlZCk7XG5cbiAgLy8gY29udmVydCBidWZmZXIgdG8gYnl0ZSBhcnJheVxuICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcblxuICAvLyBjb252ZXJ0IGJ5dGVzIHRvIGhleCBzdHJpbmdcbiAgY29uc3QgaGFzaFN0cmluZyA9IGhhc2hBcnJheVxuICAgICAgLm1hcCgoYikgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpKVxuICAgICAgLmpvaW4oXCJcIik7XG5cbiAgLy8gTWFwIHRoZSBjb29raWUgaGFzaCB0byBhIG51bWJlciBiZXR3ZWVuIDAgLT4gOTksXG4gIC8vIHRoaXMgbnVtYmVyIGlzIHRoZSBvblJhdGlvblxuICBjb25zdCBoYXNoTnVtYmVyID0gcGFyc2VJbnQoaGFzaFN0cmluZy5zdWJzdHJpbmcoc3Vic3RyaW5nU3RhcnRQb3NpdGlvbiwgc3Vic3RyaW5nRW5kUG9zaXRpb24pLCAxNik7XG5cbiAgcmV0dXJuIGhhc2hOdW1iZXIgJSAxMDA7XG59O1xuXG5leHBvcnQgY29uc3QgZXhpdFNjcm9sbExpc3RlbmVyID0gKGNhbGxCYWNrKSA9PiB7XG4gIGNvbnN0IGxvb3AgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2Nyb2xsVG9wID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcbiAgICBpZiAobGFzdFNjcm9sbFRvcCAtIDQwMCA+IHNjcm9sbFRvcCkge1xuICAgICAgY2xlYXJJbnRlcnZhbChleGl0U2Nyb2xsSW50ZXJ2YWwpO1xuICAgICAgY2FsbEJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGFzdFNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgbGV0IGxhc3RTY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICBjb25zdCBleGl0U2Nyb2xsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChsb29wLCA1MDApO1xufTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHRvIGFwcGx5IHRyZWF0bWVudHMgdG8gdGhlIHBhZ2Ugb24gc3BlY2lmaWMgbWVkaWEgdHlwZS5cbiAqIEBwYXJhbSB7TWVkaWFRdWVyeUxpc3R9IG1lZGlhUXVlcnlDb25kaXRpb24gd2luZG93Lm1hdGNoTWVkaWEoXCIobWF4LXdpZHRoOiA1MDBweClcIilcbiAqIEBwYXJhbSB7RE9NTm9kZUxpc3QgfSBlbGVtZW50cyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiZGl2LnByb2R1Y3RfaW5mb1wiKVxuICogQHBhcmFtIHtPYmplY3R9IHN0eWxlQ2hhbmdlc01hcCB7IFwibWFyZ2luLXRvcFwiIDogXCIxMHJlbVwifVxuICogQHJldHVybnNcbiAqL1xuZXhwb3J0IGNvbnN0IHN0eWxlQXBwbGljYXRvciA9IChlbGVtZW50cywgc3R5bGVDaGFuZ2VzTWFwKSA9PiB7XG4gIGxvZ2dlci5sb2coXCJBcHBseWluZyBzdHlsZSBjaGFuZ2VzXCIsIHN0eWxlQ2hhbmdlc01hcCwgXCJ0byBlbGVtZW50c1wiLCBlbGVtZW50cyk7XG4gIGZvciAobGV0IGk9MDsgaTxlbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBlbGVtZW50c1tpXTtcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzdHlsZUNoYW5nZXNNYXApKSB7XG4gICAgICBlbGVtZW50LnN0eWxlW2tleV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpbmplY3RTdHlsZVNoZWV0ID0gYXN5bmMgKCkgPT4ge1xuICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gIHN0eWxlU2hlZXQucmVsID0gXCJzdHlsZXNoZWV0XCI7XG4gIHN0eWxlU2hlZXQudHlwZSA9IFwidGV4dC9jc3NcIjtcbiAgc3R5bGVTaGVldC5ocmVmID0gU1RZTEVTSEVFVF9MT0NBVElPTjtcbiAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVNoZWV0KTtcbn07XG5cbmV4cG9ydCBjb25zdCBwcmVwYXJlQWN0aW9ucyA9IChhY3Rpb25zVG9QcmVwYXJlLCBzdWJWYXJpYW50SWQpID0+IHtcbiAgY29uc3QgYWN0aW9ucyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYWN0aW9uc1RvUHJlcGFyZSkpO1xuICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XG4gICAgY29uc3Qge3N1YlZhcmlhbnRzfSA9IGFjdGlvbjtcbiAgICBpZiAoIXN1YlZhcmlhbnRzKSBjb250aW51ZTtcbiAgICBmb3IgKGNvbnN0IHN1YlZhcmlhbnQgb2Ygc3ViVmFyaWFudHMpIHtcbiAgICAgIGlmIChzdWJWYXJpYW50LmlkID09PSBzdWJWYXJpYW50SWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gc3ViVmFyaWFudCkge1xuICAgICAgICAgIGlmIChrZXkgIT09IFwiaWRcIikge1xuICAgICAgICAgICAgYWN0aW9uW2tleV0gPSBzdWJWYXJpYW50W2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBhY3Rpb25zO1xufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYXRlU2Vzc2lvblN0b3JhZ2VzID0gKCkgPT4ge1xuICBjb25zdCB7UEFHRV9WSUVXUywgUE9QVVBfRElTUExBWV9GTEFHLCBTRVNTSU9OX0lELCBTRVNTSU9OX1RJTUVTVEFNUCwgU0VTU0lPTl9ISVNUT1JZfSA9IFNFU1NJT05fU1RPUkFHRV9LRVlTO1xuXG4gIGNvbnN0IHBhZ2VWaWV3cyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUEFHRV9WSUVXUyk7XG4gIGNvbnN0IHBvcHVwRGlzcGxheUZsYWcgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFBPUFVQX0RJU1BMQVlfRkxBRyk7XG4gIGNvbnN0IHNlc3Npb25JZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oU0VTU0lPTl9JRCk7XG4gIGNvbnN0IHNlc3Npb25UaW1lc3RhbXAgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFNFU1NJT05fVElNRVNUQU1QKTtcbiAgY29uc3Qgc2Vzc2lvbkhpc3RvcnkgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFNFU1NJT05fSElTVE9SWSk7XG5cbiAgaWYgKCFwYWdlVmlld3MpIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBBR0VfVklFV1MsIDEpO1xuICB9IGVsc2Uge1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEFHRV9WSUVXUywgcGFyc2VJbnQocGFnZVZpZXdzKSArIDEpO1xuICB9XG4gIGlmIChwb3B1cERpc3BsYXlGbGFnID09PSBudWxsKSB7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQT1BVUF9ESVNQTEFZX0ZMQUcsIDApO1xuICB9XG4gIGlmICghc2Vzc2lvbklkKSB7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShTRVNTSU9OX0lELCBjcnlwdG8ucmFuZG9tVVVJRCgpKTtcbiAgfVxuICBpZiAoIXNlc3Npb25UaW1lc3RhbXApIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFNFU1NJT05fVElNRVNUQU1QLCBEYXRlLm5vdygpKTtcbiAgfVxuICBpZiAoIXNlc3Npb25IaXN0b3J5KSB7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShTRVNTSU9OX0hJU1RPUlksIFt3aW5kb3cubG9jYXRpb24ucGF0aG5hbWVdKTtcbiAgfSBlbHNlIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFNFU1NJT05fSElTVE9SWSwgW3dpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSwgc2Vzc2lvbkhpc3RvcnldKTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNvbmRpdGlvbkNoZWNrZXIgPSAocnVuVGltZVZhbHVlLCBjb25kaXRpb24sIHZhbHVlKSA9PiB7XG4gIGlmIChjb25kaXRpb24gPT09IFwibm90RXhpc3RcIikge1xuICAgIGlmICghcnVuVGltZVZhbHVlKSB7XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLXNhdGlzZmllZC0gdGFyZ2V0IGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtbm90IHNhdGlzZmllZC0gdGFyZ2V0IGRvZXMgZXhpc3RcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChydW5UaW1lVmFsdWUgPT09IG51bGwgfHxcbiAgICBydW5UaW1lVmFsdWUgPT09IHVuZGVmaW5lZCB8fFxuICAgIGNvbmRpdGlvbiA9PT0gbnVsbCB8fFxuICAgIGNvbmRpdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IHJ1blRpbWVWYWx1ZSBvciBjb25kaXRpb24gaXMgbm90IGRlZmluZWRcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN3aXRjaCAoY29uZGl0aW9uKSB7XG4gICAgY2FzZSBcImV4aXN0XCI6XG4gICAgICBpZiAocnVuVGltZVZhbHVlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgZG9lcyBleGlzdFwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLW5vdCBzYXRpc2ZpZWQtIHRhcmdldCBkb2VzIG5vdCBleGlzdFwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlIFwiY29udGFpbnNcIjpcbiAgICAgIGlmIChydW5UaW1lVmFsdWUuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgY29udGFpbnMgdmFsdWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgZG9lcyBub3QgY29udGFpbiB2YWx1ZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlIFwibm90Q29udGFpbnNcIjpcbiAgICAgIGlmICghcnVuVGltZVZhbHVlLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLXNhdGlzZmllZC0gdGFyZ2V0IGRvZXMgbm90IGNvbnRhaW4gdmFsdWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgY29udGFpbnMgdmFsdWVcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgY2FzZSBcImVxdWFsXCI6XG4gICAgICBpZiAocnVuVGltZVZhbHVlID09PSB2YWx1ZSkge1xuICAgICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLXNhdGlzZmllZC0gdGFyZ2V0IGVxdWFscyB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLW5vdCBzYXRpc2ZpZWQtIHRhcmdldCBkb2VzIG5vdCBlcXVhbCB2YWx1ZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlIFwibm90RXF1YWxcIjpcbiAgICAgIGlmIChydW5UaW1lVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgZG9lcyBub3QgZXF1YWwgdmFsdWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgZXF1YWxzIHZhbHVlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgXCJncmVhdGVyVGhhblwiOlxuICAgICAgaWYgKHJ1blRpbWVWYWx1ZSA+IHZhbHVlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgaXMgZ3JlYXRlciB0aGFuIHZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtbm90IHNhdGlzZmllZC0gdGFyZ2V0IGlzIG5vdCBncmVhdGVyIHRoYW4gdmFsdWVcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgY2FzZSBcImxlc3NUaGFuXCI6XG4gICAgICBpZiAocnVuVGltZVZhbHVlIDwgdmFsdWUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1zYXRpc2ZpZWQtIHRhcmdldCBpcyBsZXNzIHRoYW4gdmFsdWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgaXMgbm90IGxlc3MgdGhhbiB2YWx1ZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlIFwiZ3JlYXRlckVxdWFsc1wiOlxuICAgICAgaWYgKHJ1blRpbWVWYWx1ZSA+PSB2YWx1ZSkge1xuICAgICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLXNhdGlzZmllZC0gdGFyZ2V0IGlzIGdyZWF0ZXIgb3IgZXF1YWwgdGhhbiB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLW5vdCBzYXRpc2ZpZWQtIHRhcmdldCBpcyBub3QgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHZhbHVlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgXCJsZXNzRXF1YWxzXCI6XG4gICAgICBpZiAocnVuVGltZVZhbHVlIDw9IHZhbHVlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgaXMgbGVzcyBvciBlcXVhbCB0aGFuIHZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtbm90IHNhdGlzZmllZC0gdGFyZ2V0IGlzIG5vdCBsZXNzIG9yIGVxdWFsIHRoYW4gdmFsdWVcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgY2FzZSBcImJldHdlZW5cIjoge1xuICAgICAgbGV0IFttaW4sIG1heF0gPSB2YWx1ZS5zcGxpdChcIixcIik7XG4gICAgICBtaW4gPSBwYXJzZUludChtaW4pO1xuICAgICAgbWF4ID0gcGFyc2VJbnQobWF4KTtcbiAgICAgIGlmIChydW5UaW1lVmFsdWUgPj0gbWluICYmIHJ1blRpbWVWYWx1ZSA8PSBtYXgpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1zYXRpc2ZpZWQtIHRhcmdldCBpcyBiZXR3ZWVuIG1pbiBhbmQgbWF4XCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtbm90IHNhdGlzZmllZC0gdGFyZ2V0IGlzIG5vdCBiZXR3ZWVuIG1pbiBhbmQgbWF4XCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBkZWZhdWx0OlxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IGNvbmRpdGlvbiBpcyBub3QgZGVmaW5lZCBcIiwgY29uZGl0aW9uKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHJhbmRvbVVVSURGYWxsYmFjayA9ICgpID0+IHtcbiAgY3J5cHRvLnJhbmRvbVVVSUQgPSBmdW5jdGlvbiByYW5kb21VVUlEKCkge1xuICAgIHJldHVybiAoXG4gICAgICBbMWU3XSstMWUzKy00ZTMrLThlMystMWUxMSkucmVwbGFjZSgvWzAxOF0vZyxcbiAgICAgICAgKGMpID0+IChjIF4gY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxKSlbMF0gJiAxNSA+PiBjIC8gNCkudG9TdHJpbmcoMTYpLFxuICAgICk7XG4gIH07XG59O1xuXG5leHBvcnQgY29uc3QgY29tcGFyZU9iamVjdHMgPSAob2JqMSwgb2JqMikgPT4ge1xuICBpZiAob2JqMSA9PT0gb2JqMikgcmV0dXJuIHRydWU7XG5cbiAgaWYgKFxuICAgIHR5cGVvZiBvYmoxICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICB0eXBlb2Ygb2JqMiAhPT0gXCJvYmplY3RcIiB8fFxuICAgICAgb2JqMSA9PSBudWxsIHx8XG4gICAgICBvYmoyID09IG51bGxcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3Qga2V5c0EgPSBPYmplY3Qua2V5cyhvYmoxKTtcbiAgY29uc3Qga2V5c0IgPSBPYmplY3Qua2V5cyhvYmoyKTtcblxuICBpZiAoa2V5c0EubGVuZ3RoICE9PSBrZXlzQi5sZW5ndGgpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBsZXQgcmVzdWx0ID0gdHJ1ZTtcblxuICBrZXlzQS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoIWtleXNCLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBvYmoxW2tleV0gPT09IFwiZnVuY3Rpb25cIiB8fFxuICAgICAgICAgIHR5cGVvZiBvYmoyW2tleV0gPT09IFwiZnVuY3Rpb25cIlxuICAgICkge1xuICAgICAgaWYgKG9iajFba2V5XS50b1N0cmluZygpICE9PSBvYmoyW2tleV0udG9TdHJpbmcoKSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNvbXBhcmVPYmplY3RzKG9iajFba2V5XSwgb2JqMltrZXldKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldERlYnVnTW9kZSA9ICgpID0+IHtcbiAgY29uc3Qge05EX0RFQlVHX01PREV9ID0gTE9DQUxfU1RPUkFHRV9LRVlTO1xuICBjb25zdCBxdWVyeVN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gIGlmIChxdWVyeVN0cmluZy5pbmNsdWRlcyhcIm5kX2RlYnVnPTFcIikpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oTkRfREVCVUdfTU9ERSwgMSk7XG4gICAgcmV0dXJuIDE7XG4gIH1cbiAgaWYgKHF1ZXJ5U3RyaW5nLmluY2x1ZGVzKFwibmRfZGVidWc9MlwiKSkge1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShORF9ERUJVR19NT0RFLCAyKTtcbiAgICByZXR1cm4gMjtcbiAgfVxuICBpZiAocXVlcnlTdHJpbmcuaW5jbHVkZXMoXCJuZF9kZWJ1Zz0wXCIpKSB7XG4gICAgd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKE5EX0RFQlVHX01PREUpO1xuICAgIHJldHVybiAwO1xuICB9XG4gIGNvbnN0IGN1cnJlbnQgPSBwYXJzZUludCh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oTkRfREVCVUdfTU9ERSkpO1xuICByZXR1cm4gKGN1cnJlbnQgfHwgMCk7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0SWRlbnRpZmllciA9IGFzeW5jIChjb29raWVOYW1lID0gQ09PS0lFX05BTUUpID0+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBsZXQgaWQgPSBleHRyYWN0Q29va2llSWRlbnRpZmllcihkb2N1bWVudC5jb29raWUsIGNvb2tpZU5hbWUpO1xuICAgIGlmIChpZCkgcmVzb2x2ZShpZCk7XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBleHRyYWN0SWRlbnRpZmllckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZCA9IGV4dHJhY3RDb29raWVJZGVudGlmaWVyKGRvY3VtZW50LmNvb2tpZSwgY29va2llTmFtZSk7XG4gICAgICAgIGlmIChpZCkge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZXh0cmFjdElkZW50aWZpZXJJbnRlcnZhbCk7XG4gICAgICAgICAgcmVzb2x2ZShpZCk7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjbGVhckludGVydmFsKGV4dHJhY3RJZGVudGlmaWVySW50ZXJ2YWwpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKFwiQ291bGQgbm90IGV4dHJhY3QgY29va2llIGlkZW50aWZpZXJcIikpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBkZWxheSA9IChtcykgPT4gbmV3IFByb21pc2UoKHJlcykgPT4gc2V0VGltZW91dChyZXMsIG1zKSk7XG5cbi8vIENvbGxlY3QgcHJvZHVjdCBTS1VzIGZyb20gcGFnZVxuZXhwb3J0IGNvbnN0IHNrdUNvbGxlY3RvciA9ICgpID0+IHtcbiAgY29uc3Qge05EX1NLVV9MSVNUfSA9IFNFU1NJT05fU1RPUkFHRV9LRVlTO1xuICBjb25zdCBza3VMaXN0ID0gW107XG5cbiAgLy8gQ2hlY2sgaWYgcGFnZSBpcyBob21lIHBhZ2VcbiAgY29uc3QgcnVsZSA9IHtcbiAgICBvcGVyYXRvcjogXCJQYWdlVHlwZVwiLFxuICAgIGNvbmRpdGlvbjogXCJlcXVhbFwiLFxuICAgIHZhbHVlOiBcIkhvbWVwYWdlXCIsXG4gIH07XG4gIGlmIChjaGVja0RhdGFMYXllclJ1bGUocnVsZSkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHBhZ2UgaXMgbGlzdGluZyBwYWdlXG4gIHJ1bGUudmFsdWUgPSBcIkxpc3RpbmdwYWdlXCI7XG4gIGlmIChjaGVja0RhdGFMYXllclJ1bGUocnVsZSkpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9kdWN0LWNhcmRcIikpO1xuICAgIGVsZW1lbnRzLmZvckVhY2goKGUpID0+IHtcbiAgICAgIHNrdUxpc3QucHVzaChlLmdldEF0dHJpYnV0ZShcImRhdGEtcHJvZHVjdC1za3VcIikpO1xuICAgIH0pO1xuICAgIGlmICghc2t1TGlzdC5sZW5ndGgpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJQcm9kdWN0IFNLVXMgbm90IGZvdW5kIG9uIExpc3RpbmdwYWdlXCIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oTkRfU0tVX0xJU1QsIEpTT04uc3RyaW5naWZ5KHNrdUxpc3QpKTtcblxuICAgIHJldHVybiBza3VMaXN0O1xuICB9XG5cbiAgLy8gQ2hlY2sgaWYgcGFnZSBpcyBwcm9kdWN0IHBhZ2VcbiAgcnVsZS52YWx1ZSA9IFwiUHJvZHVjdHBhZ2VcIjtcbiAgaWYgKGNoZWNrRGF0YUxheWVyUnVsZShydWxlKSkge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2R1Y3Qtc2t1XCIpO1xuICAgIGlmICghZWxlbWVudCkge1xuICAgICAgbG9nZ2VyLmxvZyhcIlByb2R1Y3QgU0tVIG5vdCBmb3VuZCBvbiBQcm9kdWN0cGFnZVwiKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBza3VMaXN0LnB1c2goZWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJkYXRhLXNrdVwiKSk7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShORF9TS1VfTElTVCwgSlNPTi5zdHJpbmdpZnkoc2t1TGlzdCkpO1xuXG4gICAgcmV0dXJuIHNrdUxpc3Q7XG4gIH1cblxuICAvLyBDaGVjayBpZiBwYWdlIGlzIGJhc2tldCBwYWdlXG4gIHJ1bGUub3BlcmF0b3IgPSBcInBhdGhcIjtcbiAgcnVsZS52YWx1ZSA9IFwiL3NpcGFyaXMtbGlzdGVzaS5odG1sXCI7XG4gIGlmIChjaGVja1VybFJ1bGUocnVsZSkpIHtcbiAgICBjb25zdCBlbGVtZW50cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jYXJ0LWluc2lkZVwiKSk7XG4gICAgZWxlbWVudHMuZm9yRWFjaCgoZSkgPT4ge1xuICAgICAgc2t1TGlzdC5wdXNoKGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1za3VcIikpO1xuICAgIH0pO1xuICAgIGlmICghc2t1TGlzdC5sZW5ndGgpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJQcm9kdWN0IFNLVXMgbm90IGZvdW5kIG9uIGJhc2tldCBwYWdlXCIpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oTkRfU0tVX0xJU1QsIEpTT04uc3RyaW5naWZ5KHNrdUxpc3QpKTtcblxuICAgIHJldHVybiBza3VMaXN0O1xuICB9XG5cbiAgbG9nZ2VyLmxvZyhcIlVuaWRlbnRpZmllZCBwYWdlIHR5cGVcIik7XG4gIHJldHVybiBudWxsO1xufTtcblxuIiwiLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuaW1wb3J0IHtleGl0U2Nyb2xsTGlzdGVuZXIsIHN0eWxlQXBwbGljYXRvciwgZGVsYXl9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHtNT0JJTEVfTUVESUFfUVVFUlksIFNFU1NJT05fU1RPUkFHRV9LRVlTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge2RhdGFMYXllckZpbmRlcn0gZnJvbSBcIi4uL05leHRkYXlSdWxlRW5naW5lL2RhdGFMYXllckNoZWNrZXJcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuXG5hc3luYyBmdW5jdGlvbiBhcHBseVRyZWF0bWVudHModHJlYXRtZW50cywgcHJvZHVjdEluZm8pIHtcbiAgY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIk5leHRkYXkgQXBwbHkgVHJlYXRtZW50c1wiKTtcbiAgY29uc3Qge1BPUFVQX0RJU1BMQVlfRkxBR30gPSBTRVNTSU9OX1NUT1JBR0VfS0VZUztcblxuICBjb25zdCB0cmFuc2Zvcm1lciA9IGZ1bmN0aW9uIHRyYW5zZm9ybWVyKHRyZWF0bWVudCkge1xuICAgIGxvZ2dlci5sb2coXCJBcHBseWluZyB0cmVhdG1lbnQ6IFwiLCBKU09OLnN0cmluZ2lmeSh0cmVhdG1lbnQpKTtcbiAgICBjb25zdCB7XG4gICAgICBvcGVyYXRvcixcbiAgICAgIHR5cGUsXG4gICAgICBhcHBseUV2ZW50LFxuICAgICAgY29udGVudFNlbGVjdG9yLFxuICAgICAgc2VsZWN0b3IsXG4gICAgICBzZWxlY3RvckZhbGxiYWNrLFxuICAgICAgbWRDb25kaXRpb24sXG4gICAgICBtb3ZlX3NlbGVjdG9yXzEsXG4gICAgICBtb3ZlX3NlbGVjdG9yXzIsXG4gICAgICByZXBsYWNlRm4sXG4gICAgfSA9IHRyZWF0bWVudDtcbiAgICBsZXQge3ZhbHVlfSA9IHRyZWF0bWVudDtcbiAgICBsZXQgZWxlbWVudCA9ICQoc2VsZWN0b3IpO1xuXG4gICAgY29uc3QgbWMgPSBtZENvbmRpdGlvbiA/IHdpbmRvdy5tYXRjaE1lZGlhKG1kQ29uZGl0aW9uKS5tYXRjaGVzIDogdHJ1ZTtcbiAgICBpZiAoIW1jKSB7XG4gICAgICBsb2dnZXIubG9nKFwiTWVkaWEgY29uZGl0aW9uIG1pc21hdGNoOiBcIiwgbWRDb25kaXRpb24pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICAobW92ZV9zZWxlY3Rvcl8xICYmICFtb3ZlX3NlbGVjdG9yXzIpIHx8XG4gICAgICAobW92ZV9zZWxlY3Rvcl8yICYmICFtb3ZlX3NlbGVjdG9yXzEpXG4gICAgKSB7XG4gICAgICBsb2dnZXIubG9nKFwiQm90aCBtb3ZlIHNlbGVjdG9ycyBhcmUgcmVxdWlyZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChtb3ZlX3NlbGVjdG9yXzEgJiYgbW92ZV9zZWxlY3Rvcl8yKSB7XG4gICAgICBpZiAoISQobW92ZV9zZWxlY3Rvcl8xKS5sZW5ndGgpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIk1vdmUgc2VsZWN0b3IgMSBub3QgZm91bmQ6IFwiLCBtb3ZlX3NlbGVjdG9yXzEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoISQobW92ZV9zZWxlY3Rvcl8yKS5sZW5ndGgpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIk1vdmUgc2VsZWN0b3IgMiBub3QgZm91bmQ6IFwiLCBtb3ZlX3NlbGVjdG9yXzIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghc2VsZWN0b3IpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJTZWxlY3RvciBub3Qgc3BlY2lmaWVkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIWVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgIGlmIChzZWxlY3RvciAhPT0gXCJuby1zZWxlY3RvclwiKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIlNlbGVjdG9yIG5vdCBmb3VuZDogXCIsIHNlbGVjdG9yKTtcbiAgICAgICAgICBsb2dnZXIubG9nKFwiVHJ5aW5nIGZhbGxiYWNrIHNlbGVjdG9yOiBcIiwgc2VsZWN0b3JGYWxsYmFjayk7XG4gICAgICAgICAgaWYgKHNlbGVjdG9yRmFsbGJhY2spIGVsZW1lbnQgPSAkKHNlbGVjdG9yRmFsbGJhY2spO1xuICAgICAgICAgIGlmICghZWxlbWVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJGYWxsYmFjayBzZWxlY3RvciBub3QgZm91bmRcIik7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVwbGFjZUZuRXhlY3V0b3IgPSAocmVwbGFjZUZuLCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHJlcGxhY2VGbiAmJiB2YWx1ZS5pbmNsdWRlcyhcInt7UkVQTEFDRX19XCIpKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJFeGVjdXRpbmcgcmVwbGFjZSBmdW5jdGlvbjogXCIsIHJlcGxhY2VGbik7XG4gICAgICAgIGNvbnN0IGNvbnRleHQgPSB7XG4gICAgICAgICAgZGF0YUxheWVyRmluZGVyLFxuICAgICAgICAgIHByb2R1Y3RJbmZvLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCByZXBsYWNlRnVuY3Rpb24gPSBGdW5jdGlvbihyZXBsYWNlRm4pLmJpbmQoY29udGV4dCk7XG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZUFsbChcInt7UkVQTEFDRX19XCIsIHJlcGxhY2VGdW5jdGlvbigpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9O1xuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICB2YWx1ZS5mb3JFYWNoKCh2YWwsIGkpID0+IHtcbiAgICAgICAgY29uc3QgY3VycmVudFJlcGxhY2VGbiA9IHJlcGxhY2VGbiA/IHJlcGxhY2VGbltpXSB8fCByZXBsYWNlRm4gOiBcIlwiO1xuICAgICAgICB2YWx1ZVtpXSA9IHJlcGxhY2VGbkV4ZWN1dG9yKGN1cnJlbnRSZXBsYWNlRm4sIHZhbCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgPSByZXBsYWNlRm5FeGVjdXRvcihyZXBsYWNlRm4sIHZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAob3BlcmF0b3IgPT09IFwicmVtb3ZlXCIpIHtcbiAgICAgIGlmIChlbGVtZW50KSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJSZW1vdmluZzogXCIsIHNlbGVjdG9yKTtcbiAgICAgICAgZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5sb2coXCJDYW5ub3QgZm91bmQgZWxlbWVudCB3aXRoIHNlbGVjdG9yOiBcIiwgc2VsZWN0b3IpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwiaW5zZXJ0XCIpIHtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwiYmVmb3JlXCI6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIkluc2VydGluZyBiZWZvcmU6IFwiLCB2YWx1ZSk7XG4gICAgICAgICAgaWYgKFN0cmluZyh2YWx1ZSkuaW5jbHVkZXMoXCJuZC1hZGQtdG8td2luXCIpKSB7XG4gICAgICAgICAgICAkKFwiLm5kLWFkZC10by13aW5cIikucmVtb3ZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsZW1lbnQuYmVmb3JlKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImFmdGVyXCI6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIkluc2VydGluZyBhZnRlcjogXCIsIHZhbHVlKTtcbiAgICAgICAgICBlbGVtZW50LmFmdGVyKHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInBvcHVwXCI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgaWYgKHBhcnNlSW50KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUE9QVVBfRElTUExBWV9GTEFHKSkgIT09IDApIHtcbiAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIlBvcHVwIGFscmVhZHkgZGlzcGxheWVkIGluIHNlc3Npb25cIik7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIkNyZWF0aW5nIFBvcHVwOiBcIiwgdmFsdWUpO1xuICAgICAgICAgICAgY3JlYXRlUG9wdXAodmFsdWUsIGNvbnRlbnRTZWxlY3Rvcik7XG5cbiAgICAgICAgICAgIGlmIChhcHBseUV2ZW50KSB7XG4gICAgICAgICAgICAgIGNvbnN0IG1vYmlsZSA9IHdpbmRvdy5tYXRjaE1lZGlhKE1PQklMRV9NRURJQV9RVUVSWSkubWF0Y2hlcztcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBldmVudCBvZiBhcHBseUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImV4aXRJbnRlbnRcIjpcbiAgICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIkFkZGluZyBleGl0IGludGVudCBsaXN0ZW5lclwiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICAgIGV4aXRTY3JvbGxMaXN0ZW5lcihkaXNwbGF5UG9wdXApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcIm1vdXNlbGVhdmVcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheVBvcHVwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICB7b25jZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJjb3B5SW50ZW50XCI6XG4gICAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXCJBZGRpbmcgY29weSBpbnRlbnQgbGlzdGVuZXJcIik7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJjb3B5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5UG9wdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7b25jZTogdHJ1ZX0sXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gYXBwZW5kIHBvcHVwIHRvIGJvZHkgYWZ0ZXIgdGltZW91dCBleHBpcmVzXG4gICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlQb3B1cCgpO1xuICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gXCJlZGl0XCIpIHtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFwidGV4dFwiOlxuICAgICAgICAgIGxvZ2dlci5sb2coXCJFZGl0aW5nIHRleHQ6IFwiLCB2YWx1ZSk7XG4gICAgICAgICAgZWxlbWVudC50ZXh0KHZhbHVlKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcImh0bWxcIjpcbiAgICAgICAgICBsb2dnZXIubG9nKFwiRWRpdGluZyBodG1sOiBcIiwgdmFsdWUpO1xuICAgICAgICAgIGVsZW1lbnQuaHRtbCh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzdHlsZUFwcGxpY2F0b3JcIjpcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsb2dnZXIubG9nKFwiQXBwbHlpbmcgc3R5bGU6IFwiLCB2YWx1ZSk7XG4gICAgICAgICAgICBjb25zdCBzdHlsZUNoYW5nZXNNYXAgPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJTdHlsZSBDaGFuZ2VzIE1hcDogXCIsIHN0eWxlQ2hhbmdlc01hcCk7XG4gICAgICAgICAgICBzdHlsZUFwcGxpY2F0b3IoZWxlbWVudCwgc3R5bGVDaGFuZ2VzTWFwKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhZGRDbGFzc1wiOlxuICAgICAgICAgIGxvZ2dlci5sb2coYGFkZGRpbmcgY2xhc3MgdG8gJHtlbGVtZW50fSBuYW1lZCAke3ZhbHVlfWApO1xuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3ModmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmVtb3ZlQ2xhc3NcIjpcbiAgICAgICAgICBsb2dnZXIubG9nKGByZW1vdmUgY2xhc3MgZnJvbSAke2VsZW1lbnR9IG5hbWVkICR7dmFsdWV9YCk7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkb2N1bWVudFRpdGxlXCI6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgY2hhbmdpbmcgZG9jdW1lbnQgdGl0bGUgZnJvbSAke2VsZW1lbnR9IHRvICR7dmFsdWV9YCk7XG4gICAgICAgICAgaWYgKGFwcGx5RXZlbnQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgYXBwbHlFdmVudCkge1xuICAgICAgICAgICAgICBpZiAoZXZlbnQgPT0gXCJ0YWJDaGFuZ2VcIikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXCJjYXRjaGluZyBldmVudCB0YWJjaGFuZ2UuLlwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFRpdGxlID0gZG9jdW1lbnQudGl0bGU7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgKGUpID0+XG4gICAgICAgICAgICAgICAgICBoYW5kbGVEb2N1bWVudFRpdGxlVGFiQ2hhbmdlKGUsIHZhbHVlLCBvcmlnaW5hbFRpdGxlKSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiYWRkQmFubmVyXCI6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3Qge05EX1NLVV9MSVNUfSA9IFNFU1NJT05fU1RPUkFHRV9LRVlTO1xuICAgICAgICAgICAgaWYgKCFwcm9kdWN0SW5mbykge1xuICAgICAgICAgICAgICBsb2dnZXIubG9nKFwiUHJvZHVjdCBpbmZvIHVuYXZhaWxhYmxlXCIpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJBZGRpbmcgYmFubmVyOiBcIiwgdmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudFNrdSA9IEpTT04ucGFyc2Uoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShORF9TS1VfTElTVCkpWzBdO1xuICAgICAgICAgICAgaWYgKCFlbGVtZW50U2t1KSB7XG4gICAgICAgICAgICAgIGxvZ2dlci5sb2coXCJDb3VsZCBub3QgZmluZCBwcm9kdWN0IHNrdVwiKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIE9iamVjdC5rZXlzKHByb2R1Y3RJbmZvKS5pbmNsdWRlcyhlbGVtZW50U2t1KVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGVsZW1lbnQuYmVmb3JlKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIlVua25vd24gZWRpdCB0eXBlOiBcIiwgdHlwZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gXCJzZXRhdHRyaWJ1dGVcIikge1xuICAgICAgbG9nZ2VyLmxvZyhcIlNldHRpbmcgYXR0cmlidXRlOiBcIiwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICBzd2l0Y2ggKGF0dHJpYnV0ZSkge1xuICAgICAgICBjYXNlIFwic3JjXCI6XG4gICAgICAgICAgZWxlbWVudC5jc3MoXCJjb250ZW50XCIsIGB1cmwoJHt2YWx1ZS50cmltKCl9KWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnNcbiAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHZhbHVlLnNwbGl0KFwiOlwiKVswXS50cmltKCk7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zXG4gICAgICAgICAgY29uc3QgcHJvcGVydHlWYWx1ZSA9IHZhbHVlLnNwbGl0KFwiOlwiKVsxXS50cmltKCk7XG5cbiAgICAgICAgICBlbGVtZW50LmNzcyhwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZSwgXCIhaW1wb3J0YW50XCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwicmVwbGFjZVwiKSB7XG4gICAgICBsb2dnZXIubG9nKFwiUmVwbGFjaW5nOiBcIiwgdmFsdWUpO1xuICAgICAgZWxlbWVudC5yZXBsYWNlQWxsKHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBcInN3YXBcIikge1xuICAgICAgbG9nZ2VyLmxvZyhcIlN3YXBwaW5nOiBcIiwgbW92ZV9zZWxlY3Rvcl8xLCBtb3ZlX3NlbGVjdG9yXzIpO1xuICAgICAgY29uc3QgbjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vdmVfc2VsZWN0b3JfMSk7XG4gICAgICBjb25zdCBuMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW92ZV9zZWxlY3Rvcl8yKTtcbiAgICAgIHN3YXBOb2RlcyhuMSwgbjIpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwiaW5qZWN0c2NyaXB0XCIpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJJbmplY3Rpbmcgc2NyaXB0OiBcIiwgdmFsdWUpO1xuICAgICAgZWxlbWVudC5hcHBlbmQoYDxzY3JpcHQ+JHt2YWx1ZX08L3NjcmlwdD5gKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBcIm1vdmVcIikge1xuICAgICAgbG9nZ2VyLmxvZyhgTW92aW5nICR7bW92ZV9zZWxlY3Rvcl8xfSB0byAke21vdmVfc2VsZWN0b3JfMn1gKTtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW92ZV9zZWxlY3Rvcl8xKTtcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb3ZlX3NlbGVjdG9yXzIpO1xuICAgICAgc291cmNlLnJlbW92ZSgpO1xuICAgICAgZGVzdGluYXRpb24ucHJlcGVuZChzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwibm9vcFwiKSB7XG4gICAgICBsb2dnZXIubG9nKFwiTm9vcCBPcGVyYXRvcjogTm8gb3BlcmF0aW9uIGlzIGFwcGxpZWQgb24gdGFyZ2V0IFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmxvZyhcIk5vIHN1Y2ggb3BlcmF0b3IgZXhpc3RzIHlldFwiLCBvcGVyYXRvcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZURvY3VtZW50VGl0bGVUYWJDaGFuZ2UgPSBhc3luYyAoZXZlbnQsIHRpdGxlcywgb3JpZ2luYWxUaXRsZSkgPT4ge1xuICAgIGNvbnN0IHBhcnNlZFRpdGxlcyA9ICFBcnJheS5pc0FycmF5KHRpdGxlcykgPyBbdGl0bGVzXSA6IHRpdGxlcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnNlZFRpdGxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY3VtZW50LmhpZGRlbikge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHBhcnNlZFRpdGxlc1tpXTtcbiAgICAgICAgYXdhaXQgZGVsYXkoMzAwMCk7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gb3JpZ2luYWxUaXRsZTtcbiAgICAgICAgYXdhaXQgZGVsYXkoMzAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IG9yaWdpbmFsVGl0bGU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IG9yaWdpbmFsVGl0bGU7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZURvY3VtZW50VGl0bGVUYWJDaGFuZ2UoZXZlbnQsIHRpdGxlcywgb3JpZ2luYWxUaXRsZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVBvcHVwQ2xpY2sgPSAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBpZCA9IGV2ZW50LnRhcmdldC5pZDtcbiAgICBpZiAoaWQgJiYgaWQgPT09IFwibmQtcG9wdXBfX3dyYXBwZXJcIikge1xuICAgICAgJChcIiNuZC1wb3B1cF9fd3JhcHBlclwiKS5yZW1vdmUoKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUG9wdXBDbGljaywgdHJ1ZSk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGRpc3BsYXlQb3B1cCA9ICgpID0+IHtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBPUFVQX0RJU1BMQVlfRkxBRywgMSk7XG4gICAgY29uc3QgcVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNncnQtc2hhZG93LWhvc3RcIik7XG4gICAgaWYgKHFQb3B1cCkgcVBvcHVwLnN0eWxlW1wiZGlzcGxheVwiXSA9IFwibm9uZVwiO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmQtcG9wdXBfX3dyYXBwZXJcIikuc3R5bGVbXCJkaXNwbGF5XCJdID0gXCJibG9ja1wiO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUG9wdXBDbGljaywgdHJ1ZSk7XG5cbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlbGVhdmVcIiwgZGlzcGxheVBvcHVwLCB7XG4gICAgICBvbmNlOiB0cnVlLFxuICAgIH0pO1xuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY29weVwiLCBkaXNwbGF5UG9wdXAsIHtcbiAgICAgIG9uY2U6IHRydWUsXG4gICAgfSk7XG5cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICQoXCIjbmQtcG9wdXBfX3dyYXBwZXJcIikucmVtb3ZlKCk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVBvcHVwQ2xpY2ssIHRydWUpO1xuICAgIH0sIDE1MDAwKTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVQb3B1cCA9ICh2YWx1ZSwgY29udGVudFNlbGVjdG9yKSA9PiB7XG4gICAgLy8gQ3JlYXRlIHBvcHVwIHdyYXBwZXJcbiAgICBjb25zdCBwb3B1cFdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG4gICAgcG9wdXBXcmFwcGVyLmNsYXNzTGlzdC5hZGQoXCJuZC1wb3B1cF9fd3JhcHBlclwiKTtcbiAgICBwb3B1cFdyYXBwZXIuaWQgPSBcIm5kLXBvcHVwX193cmFwcGVyXCI7XG5cbiAgICAvLyBDcmVhdGUgcG9wdXAgY2xvc2UgYnV0dG9uXG4gICAgY29uc3QgcG9wdXBDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gICAgcG9wdXBDbG9zZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwibmQtcG9wdXBfX2J1dHRvbi1jbG9zZVwiKTtcbiAgICBwb3B1cENsb3NlQnV0dG9uLmlubmVyVGV4dCA9IFwiWFwiO1xuICAgIHBvcHVwQ2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICQoXCIjbmQtcG9wdXBfX3dyYXBwZXJcIikucmVtb3ZlKCk7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVBvcHVwQ2xpY2ssIHRydWUpO1xuICAgIH07XG5cbiAgICBpZiAoY29udGVudFNlbGVjdG9yKSB7XG4gICAgICBjb25zdCBjb250ZW50cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb250ZW50U2VsZWN0b3IpKTtcbiAgICAgIHdoaWxlICh2YWx1ZS5pbmNsdWRlcyhcInt7UkVQTEFDRX19XCIpICYmIGNvbnRlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKFwie3tSRVBMQUNFfX1cIiwgY29udGVudHMuc2hpZnQoKS5zcmMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENyZWF0ZSBwb3B1cCBmcm9tIHRyZWF0bWVudCBhbmQgYXBwZW5kIGNsb3NlIGJ1dHRvblxuICAgIGNvbnN0IHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgIHRlbXBsYXRlLmlubmVySFRNTCA9IHZhbHVlLnRyaW0oKTtcbiAgICBjb25zdCBwb3B1cCA9IHRlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZDtcbiAgICBwb3B1cC5hcHBlbmRDaGlsZChwb3B1cENsb3NlQnV0dG9uKTtcbiAgICBwb3B1cFdyYXBwZXIuYXBwZW5kQ2hpbGQocG9wdXApO1xuXG4gICAgLy8gUmVtb3ZlIG9sZCBwb3B1cCBpZiBleGlzdHMgYmVmb3JlIGFwcGVuZGluZyBuZXcgb25lXG4gICAgJChcIiNuZC1wb3B1cF9fd3JhcHBlclwiKS5yZW1vdmUoKTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHBvcHVwV3JhcHBlcik7XG4gIH07XG5cbiAgY29uc3Qgc3dhcE5vZGVzID0gZnVuY3Rpb24gc3dhcE5vZGVzKG4xLCBuMikge1xuICAgIGNvbnN0IHAxID0gbjEucGFyZW50Tm9kZTtcbiAgICBjb25zdCBwMiA9IG4yLnBhcmVudE5vZGU7XG4gICAgbGV0IGkxO1xuICAgIGxldCBpMjtcblxuICAgIGlmICghcDEgfHwgIXAyIHx8IHAxLmlzRXF1YWxOb2RlKG4yKSB8fCBwMi5pc0VxdWFsTm9kZShuMSkpIHJldHVybjtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDEuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwMS5jaGlsZHJlbltpXS5pc0VxdWFsTm9kZShuMSkpIHtcbiAgICAgICAgaTEgPSBpO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHAyLmNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocDIuY2hpbGRyZW5baV0uaXNFcXVhbE5vZGUobjIpKSB7XG4gICAgICAgIGkyID0gaTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocDEuaXNFcXVhbE5vZGUocDIpICYmIGkxIDwgaTIpIHtcbiAgICAgIGkyKys7XG4gICAgfVxuICAgIHAxLmluc2VydEJlZm9yZShuMiwgcDEuY2hpbGRyZW5baTFdKTtcbiAgICBwMi5pbnNlcnRCZWZvcmUobjEsIHAyLmNoaWxkcmVuW2kyXSk7XG4gIH07XG5cbiAgY29uc3QgdHJlYXRtZW50QXBwbGljYXRvciA9ICh0cmVhdG1lbnRMaXN0KSA9PiB7XG4gICAgaWYgKCF3aW5kb3cualF1ZXJ5KSB7XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICB0cmVhdG1lbnRBcHBsaWNhdG9yKHRyZWF0bWVudExpc3QpO1xuICAgICAgfSwgMTApO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IHRyZWF0bWVudCBvZiB0cmVhdG1lbnRMaXN0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdHJhbnNmb3JtZXIodHJlYXRtZW50KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcbiAgICAgICAgICAgICAgYENvdWxkbid0IGFwcGx5IHRyZWF0bWVudCAke3RyZWF0bWVudC5pZH0gd2l0aCBlcnJvciAke2Vyci5tZXNzYWdlfWAsXG4gICAgICAgICAgKTtcbiAgICAgICAgICAvLyBTZXQgaWQgb2YgZmFpbGVkIHRyZWF0bWVudCB0byAtMSxcbiAgICAgICAgICAvLyBzbyB3ZSBrbm93IG5vdCB0byBsaXN0IGluIHRoZSBjdXN0b20gR0EgZXZlbnRcbiAgICAgICAgICAvLyB0cmVhdG1lbnRMaXN0W3RyZWF0bWVudF0uaWQgPSAtMTtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvLyBBcHBseSB0cmVhdG1lbnRzXG4gIHRyZWF0bWVudEFwcGxpY2F0b3IodHJlYXRtZW50cyk7XG59XG5leHBvcnQgZGVmYXVsdCBhcHBseVRyZWF0bWVudHM7XG4iLCJpbXBvcnQgTG9nZ2VyIGZyb20gXCIuLi9sb2dnZXJcIjtcblxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIkJlYWdsZUNoZWNrcG9pbnRcIik7XG5leHBvcnQgY29uc3QgY2hlY2twb2ludHMgPSB7XG4gIEJlYWdsZUxvYWRlZDogMSxcbiAgSW5pdGlhbGl6ZWQ6IDIsXG4gIFVzZXJPbk9mZjogMyxcbiAgU2NyaXB0VGltZU91dDogNyxcbiAgVHJlYXRtZW50UmVwb3NpdG9yeUNyZWF0ZWQ6IDQsXG4gIFRyZWF0bWVudHNBcHBsaWVkOiA1LFxuICBSZWFwcGx5VHJlYXRtZW50TGlzdGVuZXJzOiA2LFxuICBUaW1lb3V0VGhyZXNob2xkUmVhY2hlZDogOCxcbn07XG53aW5kb3cuYmVhZ2xlSW5mb0xheWVyID0gd2luZG93LmJlYWdsZUluZm9MYXllciB8fCB7Y2hlY2twb2ludHM6IFtdLCBkYXRhUG9pbnRzOiBbXX07XG5cbmV4cG9ydCBjb25zdCBjaGVja3BvaW50ID0gKGNoZWNrcG9pbnQpID0+e1xuICB0cnkge1xuICAgIGxvZ2dlci5sb2coYENoZWNrcG9pbnQ6ICcke2NoZWNrcG9pbnR9JyBSZWFjaGVkIWApO1xuICAgIHdpbmRvdy5iZWFnbGVJbmZvTGF5ZXIuY2hlY2twb2ludHMucHVzaCh7XG4gICAgICBjaGVja3BvaW50OiBPYmplY3Qua2V5cyhjaGVja3BvaW50cykuZmluZCgoa2V5KSA9PiBjaGVja3BvaW50c1trZXldID09PSBjaGVja3BvaW50KSxcbiAgICAgIGlkOiBjaGVja3BvaW50LFxuICAgICAgdGltZTogRGF0ZS5ub3coKSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGxvZ2dlci53YXJuKGUpO1xuICB9XG4gIHJldHVybjtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7XG4gIGlmIChrZXkgaW4gb2JqKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBvYmpba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgcmV0dXJuIG9iajtcbn0iLCJpbXBvcnQge0xPR19BUElfVVJMLCBTRVNTSU9OX1NUT1JBR0VfS0VZUywgU1BMSVRfUkFUSU99IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7Y29tcGFyZU9iamVjdHMsIGV4dHJhY3RDb29raWVJZGVudGlmaWVyfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuXG5leHBvcnQgY2xhc3MgTW9uaXRvciB7XG4gIGNvbnN0cnVjdG9yKGRlYnVnTW9kZSkge1xuICAgIHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcihcIk5leHRkYXkgTW9uaXRvclwiKTtcbiAgICB0aGlzLnNlc3Npb25JZCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oU0VTU0lPTl9TVE9SQUdFX0tFWVMuU0VTU0lPTl9JRCk7XG4gICAgdGhpcy5sb2dnZXIubG9nKFwiSW5pdGlhbGl6aW5nIG1vbml0b3Igd2l0aCBzZXNzaW9uIGlkOiBcIiArIHRoaXMuc2Vzc2lvbklkKTtcblxuICAgIHRoaXMuYXBwbGllZFRyZWF0bWVudElkcyA9IG51bGw7XG4gICAgdGhpcy5lbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzID0gbnVsbDtcbiAgICB0aGlzLmxhdGVzdENoYW5nZXMgPSBudWxsO1xuICAgIHRoaXMuZWxpZ2libGVOb3RBcHBsaWVkQ2hhbmdlcyA9IG51bGw7XG4gICAgdGhpcy52aWV3SWQgPSBjcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIHRoaXMuaGVhZGVycyA9IHtcbiAgICAgIHR5cGU6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIH07XG4gICAgdGhpcy5kZWJ1Z01vZGUgPSBkZWJ1Z01vZGUgPyBcIm9uXCIgOiBcIm9mZlwiO1xuICAgIHRoaXMuaXNMb2dnZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuaW5pdGlhbGl6ZUV4aXRFdmVudExpc3RlbmVyKCk7XG4gIH1cblxuICB1cGRhdGVUcmVhdG1lbnRzKGFwcGxpZWRUcmVhdG1lbnRJZHMsIGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHMpIHtcbiAgICB0aGlzLmFwcGxpZWRUcmVhdG1lbnRJZHMgPSBhcHBsaWVkVHJlYXRtZW50SWRzO1xuICAgIHRoaXMuZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cyA9IGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHM7XG4gIH1cblxuICBhc3luYyBzZW5kTG9ncyhpc09uLCBtZXNzYWdlID0gbnVsbCwgZW1wdHkgPSBmYWxzZSkge1xuICAgIGNvbnN0IHtsb2dnZXJ9ID0gdGhpcztcbiAgICBsb2dnZXIubG9nKFwiU2VuZGluZyBsb2dzXCIpO1xuXG4gICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwiY29tcGxldGVcIikge1xuICAgICAgbG9nZ2VyLmxvZyhcIkRvY3VtZW50IHJlYWR5IHN0YXRlIGlzIG5vdCBjb21wbGV0ZVwiKTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiYmVmb3JldW5sb2FkXCIsICgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkluIGJlZm9yZXVubG9hZCBldmVudFwiKTtcbiAgICAgICAgdGhpcy5oYW5kbGVRdWV1ZUxvZ3ModGhpcy5wYWNrYWdlTG9nRGF0YShpc09uLCBtZXNzYWdlLCBlbXB0eSkpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkluIG9ucGFnZWhpZGUgZXZlbnRcIik7XG4gICAgICAgIHRoaXMuaGFuZGxlUXVldWVMb2dzKHRoaXMucGFja2FnZUxvZ0RhdGEoaXNPbiwgbWVzc2FnZSwgZW1wdHkpKTtcbiAgICAgIH0sIHRydWUpO1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsICgpID0+IHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkluIG9ubG9hZCBldmVudFwiKTtcbiAgICAgICAgdGhpcy5oYW5kbGVRdWV1ZUxvZ3ModGhpcy5wYWNrYWdlTG9nRGF0YShpc09uLCBtZXNzYWdlLCBlbXB0eSkpO1xuICAgICAgfSwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlUXVldWVMb2dzKHRoaXMucGFja2FnZUxvZ0RhdGEoaXNPbiwgbWVzc2FnZSwgZW1wdHkpKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVRdWV1ZUxvZ3MocmVxdWVzdEJsb2IpIHtcbiAgICBpZiAodGhpcy5pc0xvZ2dlZCkgcmV0dXJuO1xuICAgIGNvbnN0IHtsb2dnZXJ9ID0gdGhpcztcblxuICAgIGlmICghcmVxdWVzdEJsb2IpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJDb3VsZCBub3QgY3JlYXRlIHJlcXVlc3QgYmxvYlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbG9nZ2VyLmxvZyhcIlJlcXVlc3QgYmxvYiB0byBzZW5kOiBcIiwgcmVxdWVzdEJsb2IpO1xuICAgIHRoaXMucXVldWVMb2dzKHJlcXVlc3RCbG9iKTtcblxuICAgIHRoaXMuaXNMb2dnZWQgPSB0cnVlO1xuICB9XG5cbiAgdXBkYXRlTGF0ZXN0Q2hhbmdlcyhjaGFuZ2VzLCBlbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzKSB7XG4gICAgY29uc3Qge2FwcGxpZWRUcmVhdG1lbnRJZHMsIGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHMsIGxvZ2dlcn0gPSB0aGlzO1xuICAgIGxvZ2dlci5sb2coXCJVcGRhdGluZyBsYXRlc3QgY2hhbmdlc1wiKTtcblxuICAgIGxldCBjb21wYXJlVG8gPSB0aGlzLmxhdGVzdENoYW5nZXMgfHwgYXBwbGllZFRyZWF0bWVudElkcztcbiAgICBpZiAoIWNvbXBhcmVPYmplY3RzKGNvbXBhcmVUbywgY2hhbmdlcykpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJDaGFuZ2VzIGRldGVjdGVkXCIpO1xuICAgICAgbG9nZ2VyLmxvZyhcIkNoYW5nZXM6IFwiLCBjaGFuZ2VzKTtcbiAgICAgIHRoaXMubGF0ZXN0Q2hhbmdlcyA9IGNoYW5nZXM7XG4gICAgfVxuXG4gICAgY29tcGFyZVRvID0gdGhpcy5lbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzIHx8IGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHM7XG4gICAgaWYgKCFjb21wYXJlT2JqZWN0cyhjb21wYXJlVG8sIGVsaWdpYmxlTm90QXBwbGllZENoYW5nZXMpKSB7XG4gICAgICBsb2dnZXIubG9nKFwiQ2hhbmdlcyBkZXRlY3RlZFwiKTtcbiAgICAgIGxvZ2dlci5sb2coXCJDaGFuZ2VzOiBcIiwgY2hhbmdlcyk7XG4gICAgICB0aGlzLmVsaWdpYmxlTm90QXBwbGllZENoYW5nZXMgPSBlbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzO1xuICAgIH1cbiAgfVxuXG4gIHBhY2thZ2VMb2dEYXRhKGlzT24sIG1lc3NhZ2UsIGVtcHR5KSB7XG4gICAgY29uc3Qge2FwcGxpZWRUcmVhdG1lbnRJZHMsXG4gICAgICBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzLFxuICAgICAgZGVidWdNb2RlLFxuICAgICAgaGVhZGVycyxcbiAgICAgIHZpZXdJZH0gPSB0aGlzO1xuICAgIGNvbnN0IG0gPSBtZXNzYWdlID8gbWVzc2FnZSA6IE9iamVjdC5rZXlzKGFwcGxpZWRUcmVhdG1lbnRJZHMpLmxlbmd0aCA/IFwiVHJlYXRtZW50cyBhcHBsaWVkXCIgOlxuICAgICAgXCJObyB0cmVhdG1lbnRzIGFwcGxpZWRcIjtcbiAgICBjb25zdCBib2R5ID0gdGhpcy5wcmVwYXJlTG9nQm9keSgpO1xuICAgIGJvZHkudklkID0gZW1wdHkgPyBudWxsIDogdmlld0lkO1xuICAgIGJvZHkubSA9IG07XG4gICAgYm9keS5kYm0gPSBkZWJ1Z01vZGU7XG4gICAgYm9keS5pc09uID0gaXNPbjtcbiAgICBib2R5LmEgPSBlbXB0eSA/IHt9IDogYXBwbGllZFRyZWF0bWVudElkcztcbiAgICBib2R5LmUgPSBlbXB0eSA/IHt9IDogZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cztcblxuICAgIHJldHVybiBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoYm9keSldLCBoZWFkZXJzKTtcbiAgfVxuXG4gIHBhY2thZ2VVcGRhdGVMb2dEYXRhKCkge1xuICAgIGNvbnN0IHtoZWFkZXJzLCBlbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzLCBsYXRlc3RDaGFuZ2VzLCB2aWV3SWR9ID0gdGhpcztcbiAgICBpZiAoIWxhdGVzdENoYW5nZXMgJiYgIWVsaWdpYmxlTm90QXBwbGllZENoYW5nZXMpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgdDogRGF0ZS5ub3coKSxcbiAgICAgIGE6IGxhdGVzdENoYW5nZXMgPyBsYXRlc3RDaGFuZ2VzIDoge30sXG4gICAgICBlOiBlbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzID8gZWxpZ2libGVOb3RBcHBsaWVkQ2hhbmdlcyA6IHt9LFxuICAgICAgdklkOiB2aWV3SWQsXG4gICAgICBiZWFnbGVJbmZvTGF5ZXI6IHdpbmRvdy5iZWFnbGVJbmZvTGF5ZXIgfHwge30sXG4gICAgfTtcbiAgICByZXR1cm4gbmV3IEJsb2IoW0pTT04uc3RyaW5naWZ5KGJvZHkpXSwgaGVhZGVycyk7XG4gIH1cblxuICBwcmVwYXJlTG9nQm9keSgpIHtcbiAgICBjb25zdCBjdXJyZW50VVJMID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgY29uc3QgcGxhdGZvcm0gPSB3aW5kb3cubmF2aWdhdG9yPy51c2VyQWdlbnREYXRhPy5wbGF0Zm9ybSB8fCB3aW5kb3cubmF2aWdhdG9yPy5wbGF0Zm9ybSB8fFxuICAgIHdpbmRvdy5uYXZpZ2F0b3I/LnVzZXJBZ2VudDtcblxuICAgIGxldCBnYU9iamVjdHMgPSB7fTtcblxuICAgIGZvciAoY29uc3QgZ2FETEVsZW1lbnQgb2Ygd2luZG93LmRhdGFMYXllcikge1xuICAgICAgZ2FPYmplY3RzID0gey4uLmdhT2JqZWN0cywgLi4uZ2FETEVsZW1lbnR9O1xuICAgIH1cblxuICAgIGNvbnN0IHZpc2lsYWJzY2sgPSBKU09OLnBhcnNlKGV4dHJhY3RDb29raWVJZGVudGlmaWVyKGRvY3VtZW50LmNvb2tpZSwgXCJWTF9DTV8wXCIpKTtcblxuICAgIGNvbnN0IHZsT2JqZWN0cyA9IHt9O1xuXG4gICAgaWYgKHZpc2lsYWJzY2sgJiYgdmlzaWxhYnNjay5JdGVtcykge1xuICAgICAgZm9yIChjb25zdCB2bEVsZW1lbnQgb2YgdmlzaWxhYnNjay5JdGVtcykge1xuICAgICAgICB2bE9iamVjdHNbdmxFbGVtZW50LktdID0gZGVjb2RlVVJJQ29tcG9uZW50KHZsRWxlbWVudC5WKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBuZERhdGEgPSB7fTtcblxuICAgIC8qIFZJU0lMQUJTICovXG5cbiAgICBuZERhdGEuY29va2llVkxQVmluVmlzaXQgPSB2bE9iamVjdHMuVkxfUFZDb3VudEluVmlzaXQ7XG4gICAgbmREYXRhLmNvb2tpZVZMVmlzaXREdXJhdGlvbiA9IHZsT2JqZWN0cy5WTF9Ub3RhbER1cmF0aW9uO1xuICAgIG5kRGF0YS5jb29raWVWTFRvdGFsUFYgPSB2bE9iamVjdHMuVkxfVG90YWxQVjtcbiAgICBuZERhdGEuY29va2llVkxUb3RhbFZpc2l0ID0gdmxPYmplY3RzLlZMX1RvdGFsVmlzaXQ7XG5cbiAgICAvKiBHQSAqL1xuXG4gICAgbmREYXRhLmdhUGFnZVR5cGUgPSBnYU9iamVjdHMuUGFnZVR5cGU7XG4gICAgbmREYXRhLmdhUHJvZHVjdE5hbWUgPSBnYU9iamVjdHMuY29udGVudF9uYW1lO1xuICAgIG5kRGF0YS5nYVZpZXdUeXBlID0gZ2FPYmplY3RzLmNvbnRlbnRfdHlwZTtcbiAgICBuZERhdGEuZ2FQcm9kdWN0Q2F0ZWdvcnkgPSBnYU9iamVjdHMuY29udGVudF9jYXRlZ29yeTtcbiAgICBuZERhdGEuZ2FQcm9kdWN0SUQgPSBnYU9iamVjdHMuY29udGVudF9pZHM7XG4gICAgbmREYXRhLnZ2c1Byb2R1Y3RDYXRlZ29yeSA9IGdhT2JqZWN0cy52aXZlbnNlX2NhdGVnb3J5O1xuICAgIG5kRGF0YS5nYUxpc3RpbmdOYW1lID0gZ2FPYmplY3RzLmVjb21tZXJjZT8uZGV0YWlsPy5hY3Rpb25GaWVsZD8ubGlzdDtcbiAgICBuZERhdGEudnZzSXNTaG93cm9vbSA9ICh3aW5kb3cuaXNBZG1pbj09PXVuZGVmaW5lZCkgPyBnYU9iamVjdHMuaXNBZG1pbiA6IHdpbmRvdy5pc0FkbWluO1xuICAgIG5kRGF0YS52dnNQcm9kdWN0R3JvdXAgPSBnYU9iamVjdHMucHJvZHVjdEdyb3VwO1xuICAgIG5kRGF0YS52dnNVc2VySWQgPSBnYU9iamVjdHMudXNlcklkO1xuICAgIG5kRGF0YS52dnNDYXRlZ29yeSA9IGdhT2JqZWN0cy52aXZlbnNlX2NhdGVnb3J5O1xuICAgIG5kRGF0YS5nYUNhdGVnb3J5UHJvZHVjdENvbnQgPSBnYU9iamVjdHMuY2F0ZWdvcnlfcHJvZHVjdF9jb3VudDtcbiAgICBuZERhdGEuZ2FDYXJ0UHJvZHVjdHMgPSBnYU9iamVjdHMuZWNvbW1lcmNlPy5jaGVja291dD8ucHJvZHVjdHMgfHwgZ2FPYmplY3RzLmVjb21tZXJjZT8ucHVyY2hhc2U/LnByb2R1Y3RzO1xuICAgIG5kRGF0YS52dnNQRFBQcm9kdWN0ID0gZ2FPYmplY3RzLnZpdmVuc2VQcm9kdWN0cz8ucG9wKCk7XG4gICAgbmREYXRhLmdhUHVyY2hhc2VJZCA9IGdhT2JqZWN0cy5lY29tbWVyY2U/LnB1cmNoYXNlPy5hY3Rpb25GaWVsZD8uaWQ7XG4gICAgbmREYXRhLmdhUHVyY2hhc2VSZXZlbnVlID0gZ2FPYmplY3RzLmVjb21tZXJjZT8ucHVyY2hhc2U/LmFjdGlvbkZpZWxkPy5yZXZlbnVlO1xuICAgIG5kRGF0YS5nYVB1cmNoYXNlUGF5VHlwZSA9IGdhT2JqZWN0cy5lY29tbWVyY2U/LnB1cmNoYXNlPy5hY3Rpb25GaWVsZD8uZGltZW5zaW9uMTU7XG5cbiAgICAvKiB3aW5kb3cgdmlldyBhcmVhICovXG4gICAgbmREYXRhLndpbmRvd1BhcmFtcyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XG4gICAgbmREYXRhLndpbmRvd1BSYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIG5kRGF0YS53aW5kb3dJbm5lciA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXG4gICAgbmREYXRhLndpbmRvd1NjcmVlbiA9IHt9O1xuICAgIG5kRGF0YS53aW5kb3dTY3JlZW4uYXZhaWxIZWlnaHQgPSB3aW5kb3cuc2NyZWVuPy5hdmFpbEhlaWdodDtcbiAgICBuZERhdGEud2luZG93U2NyZWVuLmF2YWlsTGVmdCA9IHdpbmRvdy5zY3JlZW4/LmF2YWlsTGVmdDtcbiAgICBuZERhdGEud2luZG93U2NyZWVuLmF2YWlsVG9wID0gd2luZG93LnNjcmVlbj8uYXZhaWxUb3A7XG4gICAgbmREYXRhLndpbmRvd1NjcmVlbi5hdmFpbFdpZHRoID0gd2luZG93LnNjcmVlbj8uYXZhaWxXaWR0aDtcbiAgICBuZERhdGEud2luZG93U2NyZWVuLmNvbG9yRGVwdGggPSB3aW5kb3cuc2NyZWVuPy5jb2xvckRlcHRoO1xuICAgIG5kRGF0YS53aW5kb3dTY3JlZW4uaGVpZ2h0ID0gd2luZG93LnNjcmVlbj8uaGVpZ2h0O1xuICAgIG5kRGF0YS53aW5kb3dTY3JlZW4ucGl4ZWxEZXB0aCA9IHdpbmRvdy5zY3JlZW4/LnBpeGVsRGVwdGg7XG4gICAgbmREYXRhLndpbmRvd1NjcmVlbi53aWR0aCA9IHdpbmRvdy5zY3JlZW4/LndpZHRoO1xuXG4gICAgbmREYXRhLndpbmRvd1ZQb3J0ID0ge307XG4gICAgbmREYXRhLndpbmRvd1ZQb3J0LmhlaWdodCA9IHdpbmRvdy52aXN1YWxWaWV3cG9ydD8uaGVpZ2h0O1xuICAgIG5kRGF0YS53aW5kb3dWUG9ydC5vZmZzZXRMZWZ0ID0gd2luZG93LnZpc3VhbFZpZXdwb3J0Py5vZmZzZXRMZWZ0O1xuICAgIG5kRGF0YS53aW5kb3dWUG9ydC5vZmZzZXRUb3AgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQ/Lm9mZnNldFRvcDtcbiAgICBuZERhdGEud2luZG93VlBvcnQub25yZXNpemUgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQ/Lm9ucmVzaXplO1xuICAgIG5kRGF0YS53aW5kb3dWUG9ydC5vbnNjcm9sbCA9IHdpbmRvdy52aXN1YWxWaWV3cG9ydD8ub25zY3JvbGw7XG4gICAgbmREYXRhLndpbmRvd1ZQb3J0LnBhZ2VMZWZ0ID0gd2luZG93LnZpc3VhbFZpZXdwb3J0Py5wYWdlTGVmdDtcbiAgICBuZERhdGEud2luZG93VlBvcnQucGFnZVRvcCA9IHdpbmRvdy52aXN1YWxWaWV3cG9ydD8ucGFnZVRvcDtcbiAgICBuZERhdGEud2luZG93VlBvcnQuc2NhbGUgPSB3aW5kb3cudmlzdWFsVmlld3BvcnQ/LnNjYWxlO1xuICAgIG5kRGF0YS53aW5kb3dWUG9ydC53aWR0aCA9IHdpbmRvdy52aXN1YWxWaWV3cG9ydD8ud2lkdGg7XG5cbiAgICBpZiAoc2NyZWVuLndpZHRoKSB7XG4gICAgICBsZXQgd2lkdGggPSBwYXJzZUludChzY3JlZW4ud2lkdGgpO1xuICAgICAgbGV0IGhlaWdodCA9IChzY3JlZW4uaGVpZ2h0KSA/IHBhcnNlSW50KHNjcmVlbi5oZWlnaHQpIDogMDtcbiAgICAgIGlmICh3aWR0aCAhPT0gMCAmJiBoZWlnaHQgIT09IDApIHtcbiAgICAgICAgY29uc3QgaU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QocGxhdGZvcm0pO1xuICAgICAgICBpZiAoaU9TICYmIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgICAgLy8gaW9zIHByb3ZpZGVzIGRwaXMsIG5lZWQgdG8gbXVsdGlwbHlcbiAgICAgICAgICB3aWR0aCA9IE1hdGgucm91bmQod2lkdGggKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgICAgaGVpZ2h0ID0gTWF0aC5yb3VuZChoZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKE1hdGguYWJzKHdpbmRvdy5vcmllbnRhdGlvbikgPT09IDkwKSB7XG4gICAgICAgICAgICAvLyB3ZSBoYXZlIGxhbmRzY2FwZSBvcmllbnRhdGlvblxuICAgICAgICAgICAgLy8gc3dpdGNoIHZhbHVlcyBmb3IgYWxsIGV4Y2VwdCBpb3NcbiAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB3aWR0aDtcbiAgICAgICAgICAgIHdpZHRoID0gaGVpZ2h0O1xuICAgICAgICAgICAgaGVpZ2h0ID0gdGVtcDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbmREYXRhLndpbmRvdyA9IHdpZHRoICsgXCJ4XCIgKyBoZWlnaHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogbmF2aWdhdG9yICovXG4gICAgbmREYXRhLm5hdkhpc3RTaXplID0gd2luZG93Lmhpc3Rvcnk/Lmxlbmd0aDtcbiAgICBuZERhdGEubmF2QWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuICAgIC8vIGNoZWNrIGlmIHVzZXJBZ2VudERhdGEgaXMgc3VwcG9ydGVkIGFuZCB1c2VyQWdlbnQgaXMgbm90IGF2YWlsYWJsZSwgdXNlIGl0XG4gICAgaWYgKCFuZERhdGEubmF2QWdlbnQpIHtcbiAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50RGF0YSkge1xuICAgICAgICAvLyB0dXJuIGJyYW5kcyBhcnJheSBpbnRvIHN0cmluZ1xuICAgICAgICBuZERhdGEubmF2QWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50RGF0YS5icmFuZHMubWFwKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICByZXR1cm4gZS5icmFuZCArIFwiOlwiICsgZS52ZXJzaW9uO1xuICAgICAgICB9KS5qb2luKCk7XG4gICAgICAgIC8vIGFkZCBtb2JpbGUgaW5mb1xuICAgICAgICBuZERhdGEubmF2QWdlbnQgKz0gKG5hdmlnYXRvci51c2VyQWdlbnREYXRhLm1vYmlsZSA/IFwiIG1vYmkgXCIgOiBcIiBcIik7XG4gICAgICAgIC8vIGFkZCBwbGF0Zm9ybSBpbmZvXG4gICAgICAgIG5kRGF0YS5uYXZBZ2VudCArPSBwbGF0Zm9ybTtcbiAgICAgIH1cbiAgICB9XG4gICAgbmREYXRhLm5hdkhXQ29yZXMgPSBuYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeTtcbiAgICBuZERhdGEubmF2TGFuZ3VhZ2UgPSBuYXZpZ2F0b3IubGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLmJyb3dzZXJMYW5ndWFnZSB8fFxuICAgICBuYXZpZ2F0b3Iuc3lzdGVtTGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLnVzZXJMYW5ndWFnZTtcbiAgICBuZERhdGEubmF2VG91Y2ggPSBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHM7XG4gICAgbmREYXRhLm5hdlBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtO1xuICAgIG5kRGF0YS5uYXZWZW5kb3IgPSBuYXZpZ2F0b3IudmVuZG9yO1xuXG4gICAgLyogY29va2llcyAqL1xuICAgIG5kRGF0YS5jb29raWVHYUlkID0gZXh0cmFjdENvb2tpZUlkZW50aWZpZXIoZG9jdW1lbnQuY29va2llLCBcIl9nYVwiKTtcbiAgICBuZERhdGEuY29va2llTGFzdEJyZWFkQ3J1bWIgPSBleHRyYWN0Q29va2llSWRlbnRpZmllcihkb2N1bWVudC5jb29raWUsIFwibGFzdGJyZWFkY3J1bWJcIik7XG4gICAgbmREYXRhLmNvb2tpZUxhc3RDYXRlZ29yeSA9IGV4dHJhY3RDb29raWVJZGVudGlmaWVyKGRvY3VtZW50LmNvb2tpZSwgXCJsYXN0Y2F0ZWdvcnlcIik7XG4gICAgbmREYXRhLmNvb2tpZUZpcnN0RW50cnkgPSBkZWNvZGVVUklDb21wb25lbnQoZXh0cmFjdENvb2tpZUlkZW50aWZpZXIoZG9jdW1lbnQuY29va2llLCBcInZpdmVuc2VmaXJzdFwiKSk7XG5cbiAgICAvKiBwZXJmb3JtYW5jZSBtZXRyaWNzICovXG4gICAgbmREYXRhLnBlcmZNZXRyaWNzID0ge307XG4gICAgaWYgKHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIilbMF0pIHtcbiAgICAgIGNvbnN0IHBlcmZOYXZpZ2F0aW9uTWV0cmljcyA9IHdpbmRvdy5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKVswXTtcbiAgICAgIG5kRGF0YS5wZXJmTWV0cmljcy5wbGQgPSBNYXRoLnJvdW5kKFxuICAgICAgICAgIHBlcmZOYXZpZ2F0aW9uTWV0cmljcy5kb21Db250ZW50TG9hZGVkRXZlbnRFbmQgLSBwZXJmTmF2aWdhdGlvbk1ldHJpY3MuY29ubmVjdFN0YXJ0LFxuICAgICAgKTtcbiAgICAgIG5kRGF0YS5wZXJmTWV0cmljcy5uZXQgPSBNYXRoLnJvdW5kKHBlcmZOYXZpZ2F0aW9uTWV0cmljcy5jb25uZWN0RW5kIC0gcGVyZk5hdmlnYXRpb25NZXRyaWNzLmZldGNoU3RhcnQpO1xuICAgICAgbmREYXRhLnBlcmZNZXRyaWNzLnNydiA9IE1hdGgucm91bmQocGVyZk5hdmlnYXRpb25NZXRyaWNzLnJlc3BvbnNlU3RhcnQgLSBwZXJmTmF2aWdhdGlvbk1ldHJpY3MucmVxdWVzdFN0YXJ0KTtcbiAgICAgIG5kRGF0YS5wZXJmTWV0cmljcy50ZnIgPSBNYXRoLnJvdW5kKHBlcmZOYXZpZ2F0aW9uTWV0cmljcy5yZXNwb25zZUVuZCAtIHBlcmZOYXZpZ2F0aW9uTWV0cmljcy5yZXNwb25zZVN0YXJ0KTtcbiAgICAgIG5kRGF0YS5wZXJmTWV0cmljcy5kbWkgPSBNYXRoLnJvdW5kKHBlcmZOYXZpZ2F0aW9uTWV0cmljcy5kb21JbnRlcmFjdGl2ZSAtIHBlcmZOYXZpZ2F0aW9uTWV0cmljcy5yZXNwb25zZUVuZCk7XG4gICAgICBuZERhdGEucGVyZk1ldHJpY3MuZGNwID0gTWF0aC5yb3VuZChwZXJmTmF2aWdhdGlvbk1ldHJpY3MuZG9tQ29tcGxldGUgLSBwZXJmTmF2aWdhdGlvbk1ldHJpY3MuZG9tSW50ZXJhY3RpdmUpO1xuICAgICAgbmREYXRhLnBlcmZNZXRyaWNzLm9ubCA9IE1hdGgucm91bmQocGVyZk5hdmlnYXRpb25NZXRyaWNzLmxvYWRFdmVudEVuZCAtIHBlcmZOYXZpZ2F0aW9uTWV0cmljcy5sb2FkRXZlbnRTdGFydCk7XG4gICAgfVxuXG4gICAgLyogc2NoZW1hLm9yZyBlbGVtZW50cyAqL1xuICAgIGNvbnN0IHNjaGVtYU9yZ0VsdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW3R5cGU9XFxcImFwcGxpY2F0aW9uL2xkK2pzb25cXFwiXVwiKTtcblxuICAgIGZvciAoY29uc3Qgc1RhZyBvZiBzY2hlbWFPcmdFbHRzKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjbnRudCA9IHNUYWcudGV4dENvbnRlbnQ7XG4gICAgICAgIGNvbnN0IGpzb25jb250ZW50ID0gSlNPTi5wYXJzZShjbnRudCk7XG4gICAgICAgIGxldCBiY3J1bWJfc3RyaW5nID0gXCJAXCI7XG4gICAgICAgIHN3aXRjaCAoanNvbmNvbnRlbnRbXCJAdHlwZVwiXSkge1xuICAgICAgICAgIC8vIEhPTUVQQUdFXG4gICAgICAgICAgY2FzZSBcIk9yZ2FuaXphdGlvblwiOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIldlYlNpdGVcIjpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gUExQXG4gICAgICAgICAgY2FzZSBcIkNvbGxlY3Rpb25QYWdlXCI6XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJjcnVtaXRlbSBvZiBqc29uY29udGVudFtcImJyZWFkY3J1bWJcIl1bXCJpdGVtTGlzdEVsZW1lbnRcIl0pIHtcbiAgICAgICAgICAgICAgYmNydW1iX3N0cmluZyArPSBcIiB8IFwiICsgYmNydW1pdGVtW1wiaXRlbVwiXVtcIm5hbWVcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZERhdGEuc29yZ0JyZWFkY3J1bWIgPSBiY3J1bWJfc3RyaW5nO1xuICAgICAgICAgICAgaWYgKCFuZERhdGEuc29yZ1Byb2R1Y3QpIG5kRGF0YS5zb3JnTGlzdGluZyA9IHt9O1xuICAgICAgICAgICAgbmREYXRhLnNvcmdMaXN0aW5nLm5hbWUgPSBqc29uY29udGVudFtcIm1haW5FbnRpdHlcIl1bXCJuYW1lXCJdO1xuICAgICAgICAgICAgbmREYXRhLnNvcmdMaXN0aW5nLmNvdW50SXRlbXMgPSBqc29uY29udGVudFtcIm1haW5FbnRpdHlcIl1bXCJudW1iZXJPZkl0ZW1zXCJdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyBQRFBcbiAgICAgICAgICBjYXNlIFwiQnJlYWRjcnVtYkxpc3RcIjpcbiAgICAgICAgICAgIGZvciAoY29uc3QgYmNydW1pdGVtIG9mIGpzb25jb250ZW50W1wiaXRlbUxpc3RFbGVtZW50XCJdKSB7XG4gICAgICAgICAgICAgIGJjcnVtYl9zdHJpbmcgKz0gXCIgfCBcIiArIGJjcnVtaXRlbVtcIm5hbWVcIl07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuZERhdGEuc29yZ0JyZWFkY3J1bWIgPSBiY3J1bWJfc3RyaW5nO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcIlByb2R1Y3RcIjpcbiAgICAgICAgICAgIGlmICghbmREYXRhLnNvcmdQcm9kdWN0KSBuZERhdGEuc29yZ1Byb2R1Y3QgPSB7fTtcbiAgICAgICAgICAgIG5kRGF0YS5zb3JnUHJvZHVjdC5za3UgPSBqc29uY29udGVudFtcInNrdVwiXTtcbiAgICAgICAgICAgIG5kRGF0YS5zb3JnUHJvZHVjdC5uYW1lID0ganNvbmNvbnRlbnRbXCJuYW1lXCJdO1xuICAgICAgICAgICAgbmREYXRhLnNvcmdQcm9kdWN0LnByaWNlID0ganNvbmNvbnRlbnRbXCJvZmZlcnNcIl1bXCJwcmljZVwiXTtcbiAgICAgICAgICAgIG5kRGF0YS5zb3JnUHJvZHVjdC5wcmljZUN1cnJlbmN5ID0ganNvbmNvbnRlbnRbXCJvZmZlcnNcIl1bXCJwcmljZUN1cnJlbmN5XCJdO1xuICAgICAgICAgICAgbmREYXRhLnNvcmdQcm9kdWN0LnByaWNlVmFsaWRVbnRpbCA9IGpzb25jb250ZW50W1wib2ZmZXJzXCJdW1wicHJpY2VWYWxpZFVudGlsXCJdO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGpzb25jb250ZW50KTtcbiAgICAgICAgfSAvLyBzd2l0Y2hcbiAgICAgIH0gY2F0Y2ggKGVycikgeyAvLyB0cnlcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybihlcnIubWVzc2FnZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyogU2NhbiB0aGlyZC1wYXJ0eSBzY3JpcHRzICovXG4gICAgY29uc3Qgc2NyaXB0VGFncyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXG4gICAgY29uc3QgcmVnZXhwTGlzdCA9IHtcbiAgICAgIFwidnZzU2NyR0FQYWdlVHlwZVwiOiBcIig/OlBhZ2VUeXBlJ1sgXSo6WyBdKicpKC4qKSg/OicpXCIsXG4gICAgICBcInZ2c1NjckdBT3JkZXJJZFwiOiBcIig/OnB1cmNoYXNlW1xcXFxzXFxcXFNdKmFjdGlvbkZpZWxkW1xcXFxzXFxcXFNdKidpZCdbIF0qOlsgXSonKSguKikoPzonKVwiLFxuICAgICAgXCJ2dnNTY3JHQU9yZGVyUmV2XCI6IFwiKD86cHVyY2hhc2VbXFxcXHNcXFxcU10qYWN0aW9uRmllbGRbXFxcXHNcXFxcU10qJ3JldmVudWUnWyBdKjpbIF0qJykoLiopKD86JylcIixcbiAgICAgIFwidnZzU2NyR0FPcmRlclR5cGVcIjogXCIoPzpwdXJjaGFzZVtcXFxcc1xcXFxTXSphY3Rpb25GaWVsZFtcXFxcc1xcXFxTXSonZGltZW5zaW9uMTUnWyBdKjpbIF0qJykoLiopKD86JylcIixcbiAgICAgIFwidnZzU2NyR0FJc0FkbWluXCI6IFwiKD86ZGF0YUxheWVyW1xcXFxzXFxcXFNdKidpc0FkbWluJ1sgXSo6WyBdKlxcXCIpKC4qKSg/OlxcXCIpXCIsXG4gICAgfTtcblxuICAgIGZvdW5kID0gMDtcblxuICAgIGZvciAobGV0IGkgPSBzY3JpcHRUYWdzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBjb25zdCBjbnRudCA9IHNjcmlwdFRhZ3NbaV0uaW5uZXJUZXh0O1xuICAgICAgZm9yIChjb25zdCBzY3JhcGVFbHQgaW4gcmVnZXhwTGlzdCkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlZ2V4cExpc3QsIHNjcmFwZUVsdCkpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFuZERhdGFbc2NyYXBlRWx0XSkge1xuICAgICAgICAgICAgICBjb25zdCByZWdleHAgPSBuZXcgUmVnRXhwKHJlZ2V4cExpc3Rbc2NyYXBlRWx0XSwgXCJpXCIpO1xuICAgICAgICAgICAgICBuZERhdGFbc2NyYXBlRWx0XSA9IHJlZ2V4cC5leGVjKGNudG50KTtcbiAgICAgICAgICAgICAgaWYgKG5kRGF0YVtzY3JhcGVFbHRdKSB7XG4gICAgICAgICAgICAgICAgZm91bmQrKztcbiAgICAgICAgICAgICAgICBpZiAobmREYXRhW3NjcmFwZUVsdF0ubGVuZ3RoID4gMCkgbmREYXRhW3NjcmFwZUVsdF0gPSBuZERhdGFbc2NyYXBlRWx0XVsxXTtcbiAgICAgICAgICAgICAgfSAvLyBpZiBhIHJ1bGUgaGFzIGJlZW4gZm91bmRcbiAgICAgICAgICAgIH0gLy8gaWYgYSBydWxlIGhhcyBub3QgYmVlbiBmb3VuZCB5ZXRcbiAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIHRoaXMubG9nZ2VyLndhcm4oZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSAvLyBmb3JlYWNoIHNlYXJjaFxuICAgICAgaWYgKGZvdW5kID09IHJlZ2V4cExpc3QubGVuZ3RoKSBicmVhaztcbiAgICB9IC8vIGZvcmVhY2ggdGFnXG5cbiAgICAvKiBOZXh0ZGF5IGRhdGEgKi9cbiAgICBuZERhdGEudiA9IFwiMC4wLjI1XCI7XG4gICAgbmREYXRhLm4gPSBgbmV4dGRheS1zZXNzaW9uX2lkLSR7dGhpcy5zZXNzaW9uSWR9YDtcbiAgICBuZERhdGEudCA9IERhdGUubm93KCk7XG4gICAgbmREYXRhLnNyID0gU1BMSVRfUkFUSU87XG5cbiAgICAvKiBtaXNjZWxsYW5lb3VzICovXG4gICAgbmREYXRhLmRvbnR0cmFjayA9IG5hdmlnYXRvci5kb05vdFRyYWNrIHx8IHdpbmRvdy5kb05vdFRyYWNrIHx8IG5hdmlnYXRvci5tc0RvTm90VHJhY2s7XG4gICAgbmREYXRhLnUgPSBjdXJyZW50VVJMLmhyZWY7XG4gICAgbmREYXRhLmQgPSBjdXJyZW50VVJMLmhvc3RuYW1lO1xuICAgIG5kRGF0YS5yID0gZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgLy8gbmREYXRhLmMgPSBkb2N1bWVudC5jb29raWU7XG4gICAgLy8gbmREYXRhLndkbCA9IHdpbmRvdy5kYXRhTGF5ZXI7XG4gICAgbmREYXRhLmJlYWdsZUluZm9MYXllciA9IHdpbmRvdy5iZWFnbGVJbmZvTGF5ZXIgfHwge307XG5cbiAgICAvKiBWaXZlbnNlIHNwZWNpZmljICovXG4gICAgbmREYXRhLnZ2c0NudEZhdlByb2RzID0gKHdpbmRvdy5mYXZvcml0ZVByb2R1Y3RzICYmIHdpbmRvdy5mYXZvcml0ZVByb2R1Y3RzLnNwbGl0KFwiLFwiKS5sZW5ndGggPiAwKSA/XG4gICAgd2luZG93LmZhdm9yaXRlUHJvZHVjdHMuc3BsaXQoXCIsXCIpLmxlbmd0aCA6IDA7XG4gICAgbmREYXRhLnZ2c0hhc1NldEVtYWlsID0gd2luZG93LnVzZXJFbWFpbC5sZW5ndGggPiAwO1xuICAgIG5kRGF0YS52dnNMb2dpblR5cGUgPSB3aW5kb3cudXNlcklkID4gMCA/IFwibWVtYmVyXCIgOiBcImd1ZXN0XCI7XG5cbiAgICBsZXQgc2VsZWN0ZWRFbGVtZW50O1xuXG4gICAgc2VsZWN0ZWRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltjbGFzcyo9XFxcImJhc2tldF9zdW1tYXJ5X3RvdGFsXFxcIl0sIFtjbGFzcyo9XFxcInRvdGFsX3Jvd1xcXCJdXCIpO1xuICAgIG5kRGF0YS52dnNQdXJjUHJpY2VFbHQgPSAoc2VsZWN0ZWRFbGVtZW50KSA/IHNlbGVjdGVkRWxlbWVudC5pbm5lclRleHQgOiBudWxsO1xuXG4gICAgc2VsZWN0ZWRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltjbGFzcyo9XFxcIm9yZGVyX2ZvbGxvd19udW1iXFxcIl0sIFtjbGFzcyo9XFxcImNhcnQtdGl0bGUtYm90dG9tXFxcIl1cIik7XG4gICAgbmREYXRhLnZ2c1B1cmNoYXNlT3JkZXJJRCA9IChzZWxlY3RlZEVsZW1lbnQpID8gc2VsZWN0ZWRFbGVtZW50LmlubmVyVGV4dCA6IG51bGw7XG5cbiAgICBzZWxlY3RlZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2NsYXNzKj1cXFwicGF5bWVudF90eXBlX3RpdGxlXFxcIl0sIFtjbGFzcyo9XFxcImNhcnQtdGl0bGUtaW5mb1xcXCJdXCIpO1xuICAgIG5kRGF0YS52dnNQdXJjVHlwZUVsdCA9IChzZWxlY3RlZEVsZW1lbnQpID8gc2VsZWN0ZWRFbGVtZW50LmlubmVyVGV4dCA6IG51bGw7XG5cbiAgICBzZWxlY3RlZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW2lkKj1cXFwiYnJlYWRjcnVtYi1vbFxcXCJdLCBbY2xhc3MqPVxcXCJsb25nLWJyZWFkY3J1bWJcXFwiXVwiKTtcbiAgICBuZERhdGEudnZzVmlld0NydW1iID0gKHNlbGVjdGVkRWxlbWVudCkgPyBzZWxlY3RlZEVsZW1lbnQuaW5uZXJUZXh0IDogbnVsbDtcblxuICAgIHNlbGVjdGVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbY2xhc3MqPVxcXCJvcmRlci1maW5hbC1udW1iZXJcXFwiXVwiKTtcbiAgICBuZERhdGEudnZzQ2FydFRvdGFsID0gKHNlbGVjdGVkRWxlbWVudCkgPyBzZWxlY3RlZEVsZW1lbnQuaW5uZXJUZXh0IDogbnVsbDtcblxuICAgIHNlbGVjdGVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbY2xhc3MqPVxcXCJiYXNrZXRfdG90YWxfcHJpY2VcXFwiXVwiKTtcbiAgICBuZERhdGEudnZzVmlld0Jhc2tldFRvdGFsID0gKHNlbGVjdGVkRWxlbWVudCkgPyBzZWxlY3RlZEVsZW1lbnQuaW5uZXJUZXh0IDogbnVsbDtcblxuICAgIHNlbGVjdGVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbaWQqPVxcXCJjYXJ0X3F1YW50aXR5XFxcIl0sIFtjbGFzcyo9XFxcImJhc2tldF9sZW5ndGhcXFwiXVwiKTtcbiAgICBuZERhdGEudnZzVmlld0Jhc2tldENvdW50ID0gKHNlbGVjdGVkRWxlbWVudCAmJiBzZWxlY3RlZEVsZW1lbnQubGVuZ3RoID4gMCkgPyBzZWxlY3RlZEVsZW1lbnQubGVuZ3RoIDogMDtcblxuICAgIHNlbGVjdGVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbY2xhc3MqPVxcXCJ3ZWxjb21lX3VzZXJuYW1lXFxcIl1cIik7XG4gICAgbmREYXRhLnZ2c1ZpZXdMb2dnZWRpbiA9IChzZWxlY3RlZEVsZW1lbnQpID8gc2VsZWN0ZWRFbGVtZW50LmlubmVyVGV4dC5sZW5ndGggPiAwIDogZmFsc2U7XG5cbiAgICBzZWxlY3RlZEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2NsYXNzKj1cXFwidml2ZW5zZS1zaG93cm9vbXNcXFwiXSA+ICpcIik7XG4gICAgbmREYXRhLnZ2c1BEUFNob3dyb29tQ291bnQgPSAoc2VsZWN0ZWRFbGVtZW50KSA/IHNlbGVjdGVkRWxlbWVudC5sZW5ndGggOiBudWxsO1xuXG4gICAgc2VsZWN0ZWRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltjbGFzcyo9XFxcImRlbGl2ZXJ5LWRhdGVcXFwiXVwiKTtcbiAgICBuZERhdGEudnZzUERQRGVsaXZlcnlEYXRlID0gKHNlbGVjdGVkRWxlbWVudCkgPyBzZWxlY3RlZEVsZW1lbnQuaW5uZXJUZXh0IDogbnVsbDtcblxuICAgIHNlbGVjdGVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbY2xhc3MqPVxcXCJwcm9kdWN0LXRpdGxlXFxcIl0sIFtjbGFzcyo9XFxcImhlYWRlci1ib3R0b21cXFwiXVwiKTtcbiAgICBuZERhdGEudnZzUERQVGl0bGUgPSAoc2VsZWN0ZWRFbGVtZW50KSA/IHNlbGVjdGVkRWxlbWVudC5pbm5lclRleHQgOiBudWxsO1xuXG4gICAgc2VsZWN0ZWRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltjbGFzcyo9XFxcImNvdW50LW9mLXByb2R1Y3RcXFwiXVwiKTtcbiAgICBuZERhdGEudnZzUExQSXRlbUNvdW50ID0gKHNlbGVjdGVkRWxlbWVudCkgPyBzZWxlY3RlZEVsZW1lbnQuaW5uZXJUZXh0IDogbnVsbDtcblxuICAgIHNlbGVjdGVkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJbY2xhc3MqPVxcXCJzdWJjYXRlZ29yaWVzLXRpdGxlXFxcIl1cIik7XG4gICAgbmREYXRhLnZ2c1BMUE5hbWUgPSAoc2VsZWN0ZWRFbGVtZW50KSA/IHNlbGVjdGVkRWxlbWVudC5pbm5lclRleHQgOiBudWxsO1xuXG4gICAgcmV0dXJuIG5kRGF0YTtcbiAgfVxuXG4gIGluaXRpYWxpemVFeGl0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICBjb25zdCB7bG9nZ2VyfSA9IHRoaXM7XG4gICAgbGV0IGlzRXhpdEV2ZW50Q2FwdHVyZWQgPSBmYWxzZTtcbiAgICBsb2dnZXIubG9nKFwiSW5pdGlhbGl6aW5nIGV4aXQgZXZlbnQgbGlzdGVuZXJcIik7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgIFwiYmVmb3JldW5sb2FkXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBpZiAoaXNFeGl0RXZlbnRDYXB0dXJlZCkgcmV0dXJuO1xuICAgICAgICAgIGlzRXhpdEV2ZW50Q2FwdHVyZWQgPSB0cnVlO1xuICAgICAgICAgIGxvZ2dlci5sb2coXCJJbiBiZWZvcmV1bmxvYWQgZXZlbnRcIik7XG4gICAgICAgICAgY29uc3QgbG9nRGF0YSA9IHRoaXMucGFja2FnZVVwZGF0ZUxvZ0RhdGEoKTtcbiAgICAgICAgICBpZiAoIWxvZ0RhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJObyBjaGFuZ2VzIHRvIGxvZ1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5xdWV1ZUxvZ3MobG9nRGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIHtjYXB0dXJlOiB0cnVlfSxcbiAgICApO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcInBhZ2VoaWRlXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBpZiAoaXNFeGl0RXZlbnRDYXB0dXJlZCkgcmV0dXJuO1xuICAgICAgICAgIGlzRXhpdEV2ZW50Q2FwdHVyZWQgPSB0cnVlO1xuICAgICAgICAgIGxvZ2dlci5sb2coXCJJbiBwYWdlaGlkZSBldmVudFwiKTtcbiAgICAgICAgICBjb25zdCBsb2dEYXRhID0gdGhpcy5wYWNrYWdlVXBkYXRlTG9nRGF0YSgpO1xuICAgICAgICAgIGlmICghbG9nRGF0YSkge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIk5vIGNoYW5nZXMgdG8gbG9nXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnF1ZXVlTG9ncyhsb2dEYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAge2NhcHR1cmU6IHRydWV9LFxuICAgICk7XG4gIH1cblxuICBxdWV1ZUxvZ3MobG9nRGF0YSkge1xuICAgIGNvbnN0IHtsb2dnZXJ9ID0gdGhpcztcbiAgICBsZXQgcXVldWVkID0gbmF2aWdhdG9yLnNlbmRCZWFjb24oTE9HX0FQSV9VUkwsIGxvZ0RhdGEpO1xuICAgIGNvbnN0IHF1ZXVlSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBpZiAoIXF1ZXVlZCkgcXVldWVkID0gbmF2aWdhdG9yLnNlbmRCZWFjb24oTE9HX0FQSV9VUkwsIGxvZ0RhdGEpO1xuICAgICAgZWxzZSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwocXVldWVJbnRlcnZhbCk7XG4gICAgICAgIGxvZ2dlci5sb2coXCJMb2dzIHF1ZXVlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICB9XG4gICAgfSwgMTApO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY2xlYXJJbnRlcnZhbChxdWV1ZUludGVydmFsKTtcbiAgICAgIGlmICghcXVldWVkKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJMb2dzIG5vdCBxdWV1ZWRcIik7XG4gICAgICB9XG4gICAgfSwgMTAwMCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTW9uaXRvcjtcbiIsImltcG9ydCB7U0VTU0lPTl9TVE9SQUdFX0tFWVMsIFRSRUFUTUVOVFNfRFVSQVRJT059IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7ZmV0Y2hUcmVhdG1lbnRzfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIk5leHRkYXkgVHJlYXRtZW50IFJlcG9zaXRvcnlcIik7XG5cbmNsYXNzIFRyZWF0bWVudFJlcG9zaXRvcnkge1xuICBjb25zdHJ1Y3Rvcihib2R5KSB7XG4gICAgY29uc3Qge2Nvb2tpZVBjdCwgdHJlYXRtZW50c30gPSBib2R5O1xuICAgIHRoaXMudHJlYXRtZW50cyA9IHRyZWF0bWVudHM7XG4gICAgdGhpcy5jb29raWVQY3QgPSBjb29raWVQY3Q7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0VHJlYXRtZW50cygpIHtcbiAgICBsb2dnZXIubG9nKFwiTG9hZGluZyB0cmVhdG1lbnRzXCIpO1xuICAgIGNvbnN0IHtUUkVBVE1FTlRTfSA9IFNFU1NJT05fU1RPUkFHRV9LRVlTO1xuICAgIGNvbnN0IHRyZWF0bWVudHNPYmogPSBKU09OLnBhcnNlKHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFRSRUFUTUVOVFMpKTtcbiAgICBsZXQgdHJlYXRtZW50cyA9IHRyZWF0bWVudHNPYmo/LnRyZWF0bWVudHM7XG4gICAgY29uc3QgdGltZXN0YW1wID0gdHJlYXRtZW50c09iaj8udGltZXN0YW1wO1xuICAgIGlmICghdHJlYXRtZW50cyB8fCAhdGltZXN0YW1wKSB7XG4gICAgICBsb2dnZXIubG9nKFwiVHJlYXRtZW50cyBub3QgZm91bmQgaW4gbG9jYWwgc3RvcmFnZVwiKTtcbiAgICAgIHRyZWF0bWVudHMgPSBhd2FpdCBmZXRjaFRyZWF0bWVudHMoKTtcbiAgICAgIGNvbnN0IHRyZWF0bWVudFdpdGhUaW1lc3RhbXAgPSB7XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgdHJlYXRtZW50cyxcbiAgICAgIH07XG4gICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShUUkVBVE1FTlRTLCBKU09OLnN0cmluZ2lmeSh0cmVhdG1lbnRXaXRoVGltZXN0YW1wKSk7XG4gICAgICByZXR1cm4gdHJlYXRtZW50cztcbiAgICB9XG4gICAgaWYgKHRpbWVzdGFtcCkge1xuICAgICAgY29uc3QgZWxhcHNlZERheXMgPSAoRGF0ZS5ub3coKSAtIHRpbWVzdGFtcCkgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgICBpZiAoZWxhcHNlZERheXMgPiBUUkVBVE1FTlRTX0RVUkFUSU9OKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJUcmVhdG1lbnRzIGFyZSBleHBpcmVkXCIpO1xuICAgICAgICB0cmVhdG1lbnRzID0gYXdhaXQgZmV0Y2hUcmVhdG1lbnRzKCk7XG4gICAgICAgIGNvbnN0IHRyZWF0bWVudFdpdGhUaW1lc3RhbXAgPSB7XG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIHRyZWF0bWVudHMsXG4gICAgICAgIH07XG4gICAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFRSRUFUTUVOVFMsIEpTT04uc3RyaW5naWZ5KHRyZWF0bWVudFdpdGhUaW1lc3RhbXApKTtcbiAgICAgICAgcmV0dXJuIHRyZWF0bWVudHM7XG4gICAgICB9XG4gICAgfVxuICAgIGxvZ2dlci5sb2coXCJUcmVhdG1lbnRzIGFyZSBsb2FkZWQgZnJvbSBsb2NhbCBzdG9yYWdlXCIpO1xuICAgIHJldHVybiB0cmVhdG1lbnRzO1xuICB9XG5cbiAgZ2V0TWF0Y2hlZFRyZWF0bWVudHMoKSB7XG4gICAgY29uc3QgdXNlclNlZ21lbnQgPSB0aGlzLmdldFVzZXJTZWdtZW50KCk7XG5cbiAgICBjb25zdCBzZWdtZW50TWF0Y2hlZFRyZWF0bWVudHMgPSB0aGlzLnRyZWF0bWVudHMuZmlsdGVyKFxuICAgICAgICAodCkgPT5cbiAgICAgICAgICB0LmFwcGx5X29uX3VzZXJfc2VnbWVudCA9PSB1c2VyU2VnbWVudCB8fFxuICAgICAgICB0LmFwcGx5X29uX3VzZXJfc2VnbWVudCA9PT0gXCIqXCIsXG4gICAgKTtcbiAgICBsb2dnZXIubG9nKGAke3NlZ21lbnRNYXRjaGVkVHJlYXRtZW50cy5sZW5ndGh9IHRyZWF0bWVudHMgc2VnbWVudCBtYXRjaGVkYCk7XG4gICAgaWYgKCFzZWdtZW50TWF0Y2hlZFRyZWF0bWVudHMubGVuZ3RoKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHNlZ21lbnRNYXRjaGVkVHJlYXRtZW50cztcbiAgfVxuXG4gIGdldFVzZXJTZWdtZW50KCkge1xuICAgIGlmICh0aGlzLmNvb2tpZVBjdCA9PT0gLTEpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJOZXcgdXNlciBoYXMgbm8gc2VnbWVudFwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5ldyBVc2VyXCIpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5jb29raWVQY3QgPCA1MCkgcmV0dXJuIFwiQVwiO1xuICAgIHJldHVybiBcIkJcIjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBUcmVhdG1lbnRSZXBvc2l0b3J5O1xuIiwiaW1wb3J0IHtTRVNTSU9OX1NUT1JBR0VfS0VZUywgTE9DQUxfU1RPUkFHRV9LRVlTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBDb3VudGVyIENoZWNrZXJcIik7XG5cbmV4cG9ydCBjb25zdCBjaGVja0NvdW50ZXJSdWxlID0gKHJ1bGUpID0+e1xuICBsb2dnZXIubG9nKFwiQ2hlY2tpbmcgcnVsZVwiLCBKU09OLnN0cmluZ2lmeShydWxlKSk7XG4gIGNvbnN0IHtvcGVyYXRvciwgY29uZGl0aW9uLCB2YWx1ZX0gPSBydWxlO1xuICBzd2l0Y2ggKG9wZXJhdG9yKSB7XG4gICAgY2FzZSBcInBhZ2VWaWV3XCI6XG4gICAgICByZXR1cm4gcGFnZVZpZXdIYW5kbGVyKGNvbmRpdGlvbiwgdmFsdWUpO1xuICAgIGNhc2UgXCJDQUJhc2tldFByaWNlXCI6XG4gICAgICByZXR1cm4gY2FCYXNrZXRQcmljZUhhbmRsZXIoY29uZGl0aW9uLCB2YWx1ZSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIGxvZ2dlci5sb2coXCJObyBzdWNoIG9wZXJhdG9yXCIsIG9wZXJhdG9yKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufTtcblxuY29uc3QgZ2V0Q291bnRlciA9IChjb3VudGVyLCB0eXBlKSA9PiB7XG4gIHRyeSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwic2Vzc2lvblwiOlxuICAgICAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShjb3VudGVyKTtcbiAgICAgIGNhc2UgXCJsb2NhbFwiOlxuICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0oY291bnRlcik7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBsb2dnZXIubG9nKFwiTm8gc3VjaCB0eXBlXCIsIHR5cGUpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGxvZ2dlci5sb2coYENvdWxkIG5vdCBnZXQgY291bnRlciAke2NvdW50ZXJ9YCwgZXJyKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuY29uc3QgcGFnZVZpZXdIYW5kbGVyID0gKGNvbmRpdGlvbiwgdmFsdWUpID0+IHtcbiAgY29uc3QgcGFnZVZpZXdzID0gcGFyc2VJbnQoZ2V0Q291bnRlcihTRVNTSU9OX1NUT1JBR0VfS0VZUy5QQUdFX1ZJRVdTLCBcInNlc3Npb25cIikpO1xuICBsb2dnZXIubG9nKFwiUGFnZSB2aWV3cyBjb3VudGVyIHZhbHVlOiBcIiwgcGFnZVZpZXdzKTtcbiAgaWYgKHBhZ2VWaWV3cyA9PT0gbnVsbCkge1xuICAgIGxvZ2dlci5sb2coXCJQYWdldmlld3MgY291bnRlciBub3QgZm91bmQgaW4gc2Vzc2lvbiBzdG9yYWdlXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihwYWdlVmlld3MsIGNvbmRpdGlvbiwgcGFyc2VJbnQodmFsdWUpKTtcbn07XG5cbmNvbnN0IGNhQmFza2V0UHJpY2VIYW5kbGVyID0gKGNvbmRpdGlvbiwgdmFsdWUpID0+IHtcbiAgY29uc3QgY2FCYXNrZXRQcmljZSA9IHBhcnNlSW50KFxuICAgICAgZ2V0Q291bnRlcihMT0NBTF9TVE9SQUdFX0tFWVMuQ09VUE9OX0FQUExJQ0FCTEVfQkFTS0VUX1BSSUNFLCBcImxvY2FsXCIpKTtcbiAgbG9nZ2VyLmxvZyhcIkNvdXBvbiBhcHBsaWNhYmxlIGJhc2tldCBwcmljZSBjb3VudGVyIHZhbHVlOiBcIiwgY2FCYXNrZXRQcmljZSk7XG4gIGlmIChjYUJhc2tldFByaWNlID09PSBudWxsKSB7XG4gICAgbG9nZ2VyLmxvZyhcIkNvdXBvbiBhcHBsaWNhYmxlIGJhc2tldCBwcmljZSBjb3VudGVyIG5vdCBmb3VuZCBpbiBsb2NhbCBzdG9yYWdlXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihjYUJhc2tldFByaWNlLCBjb25kaXRpb24sIHBhcnNlSW50KHZhbHVlKSk7XG59O1xuXG4iLCJpbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBFbGVtZW50IENoZWNrZXJcIik7XG5cbmV4cG9ydCBjb25zdCBjaGVja0VsZW1lbnRSdWxlID0gKHJ1bGUpID0+e1xuICBsb2dnZXIubG9nKFwiQ2hlY2tpbmcgcnVsZVwiLCBKU09OLnN0cmluZ2lmeShydWxlKSk7XG4gIGNvbnN0IHtvcGVyYXRvciwgY29uZGl0aW9uLCB2YWx1ZSwgc2VsZWN0b3IsIHNlbGVjdG9yQWxsLCBzZWxlY3RvckZhbGxiYWNrID0gbnVsbH0gPSBydWxlO1xuICBsZXQgbWFpblNlbGVjdG9yID0gc2VsZWN0b3I7XG4gIGlmIChtYWluU2VsZWN0b3IgJiYgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobWFpblNlbGVjdG9yKSkge1xuICAgIG1haW5TZWxlY3RvciA9IHNlbGVjdG9yRmFsbGJhY2sgPyBzZWxlY3RvckZhbGxiYWNrIDogbWFpblNlbGVjdG9yO1xuICB9XG5cbiAgaWYgKG9wZXJhdG9yID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihtYWluU2VsZWN0b3IpLCBjb25kaXRpb24sIHZhbHVlKTtcbiAgfVxuICBpZiAobWFpblNlbGVjdG9yICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1haW5TZWxlY3RvcikpIHtcbiAgICBsb2dnZXIubG9nKFwiU2VsZWN0b3Igbm90IGZvdW5kIG9uIHBhZ2VcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChzZWxlY3RvckFsbCAmJiAhZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvckFsbCkpIHtcbiAgICBsb2dnZXIubG9nKFwiU2VsZWN0b3Igbm90IGZvdW5kIG9uIHBhZ2VcIik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgbGV0IGVsZW1lbnQ7XG4gIGlmIChtYWluU2VsZWN0b3IpIGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1haW5TZWxlY3Rvcik7XG4gIGVsc2UgaWYgKHNlbGVjdG9yQWxsKSBlbGVtZW50ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yQWxsKSk7XG5cbiAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgIGNhc2UgXCJ0ZXh0LW51bWJlclwiOiB7XG4gICAgICBsZXQgdGVtcFZhbDtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGVsZW1lbnQpKSB7XG4gICAgICAgIHRlbXBWYWwgPSBlbGVtZW50LnJlZHVjZSgocmV0dXJuVmFsLCBlbGVtKSA9PiB7XG4gICAgICAgICAgcmV0dXJuVmFsICs9IHBhcnNlSW50KGVsZW0udGV4dENvbnRlbnQucmVwbGFjZShcIlRMXCIsIFwiXCIpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRlbXBWYWwgPSBwYXJzZUludChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1haW5TZWxlY3RvcikudGV4dENvbnRlbnRcbiAgICAgICAgICAgIC5yZXBsYWNlKFwiVExcIiwgXCJcIikucmVwbGFjZShcIi5cIiwgXCJcIikpO1xuICAgICAgfVxuICAgICAgY29uc3QgcnVuVGltZVZhbHVlID0gcGFyc2VJbnQodGVtcFZhbCk7XG4gICAgICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihydW5UaW1lVmFsdWUsIGNvbmRpdGlvbiwgdmFsdWUpO1xuICAgIH1cbiAgICBjYXNlIFwiY2xhc3NMaXN0XCI6XG4gICAgICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihBcnJheS5mcm9tKGVsZW1lbnQuY2xhc3NMaXN0KSwgY29uZGl0aW9uLCB2YWx1ZSk7XG4gICAgY2FzZSBcImNvdW50XCI6IHtcbiAgICAgIGNvbnN0IHJ1blRpbWVWYWx1ZSA9IEFycmF5LmlzQXJyYXkoZWxlbWVudCkgPyBlbGVtZW50Lmxlbmd0aCA6IGVsZW1lbnQgPyAxIDogMDtcbiAgICAgIHJldHVybiBjb25kaXRpb25DaGVja2VyKHJ1blRpbWVWYWx1ZSwgY29uZGl0aW9uLCB2YWx1ZSk7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICBsb2dnZXIubG9nKFwiT3BlcmF0b3Igbm90IGRlZmluZWRcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG4iLCJpbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBGdW5jdGlvbiBDaGVja2VyXCIpO1xuXG5leHBvcnQgY29uc3QgY2hlY2tGdW5jdGlvblJ1bGUgPSAocnVsZSwgb3B0cykgPT57XG4gIGxvZ2dlci5sb2coXCJDaGVja2luZyBydWxlXCIsIEpTT04uc3RyaW5naWZ5KHJ1bGUpKTtcbiAgY29uc3Qge3Byb2R1Y3RJbmZvfSA9IG9wdHM7XG4gIGNvbnN0IHtvcGVyYXRvciwgY29uZGl0aW9uLCB2YWx1ZSwgYmluZGluZ3N9ID0gcnVsZTtcbiAgaWYgKCFvcGVyYXRvcikge1xuICAgIGxvZ2dlci5sb2coXCJSdWxlIGZ1bmN0aW9uIG5vdCBkZWZpbmVkXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBsZXQgY29udGV4dCA9IHt9O1xuICBpZiAoYmluZGluZ3MgPT0gXCJwcm9kdWN0SW5mb1wiKSB7XG4gICAgY29udGV4dCA9IHtcbiAgICAgIHByb2R1Y3RJbmZvLFxuICAgIH07XG4gIH1cbiAgY29uc3QgcnVsZUZ1bmN0aW9uID0gRnVuY3Rpb24ob3BlcmF0b3IpLmJpbmQoY29udGV4dCk7XG4gIGNvbnN0IHJ1bnRpbWVWYWx1ZSA9IHJ1bGVGdW5jdGlvbigpO1xuICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihydW50aW1lVmFsdWUsIGNvbmRpdGlvbiwgdmFsdWUpO1xufTtcbiIsImltcG9ydCB7U0VTU0lPTl9TVE9SQUdFX0tFWVN9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7Y29uZGl0aW9uQ2hlY2tlcn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgTG9nZ2VyIGZyb20gXCIuLi9sb2dnZXJcIjtcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoXCJOZXh0ZGF5IFNlc3Npb24gQ2hlY2tlclwiKTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrU2Vzc2lvblJ1bGUgPSAocnVsZSkgPT57XG4gIGxvZ2dlci5sb2coXCJDaGVja2luZyBydWxlXCIsIEpTT04uc3RyaW5naWZ5KHJ1bGUpKTtcbiAgY29uc3Qge29wZXJhdG9yLCBjb25kaXRpb24sIHZhbHVlfSA9IHJ1bGU7XG4gIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICBjYXNlIFwiZHVyYXRpb25cIjpcbiAgICAgIHJldHVybiBkdXJhdGlvbkhhbmRsZXIoY29uZGl0aW9uLCB2YWx1ZSk7XG4gICAgY2FzZSBcImhpc3RvcnlcIjpcbiAgICAgIHJldHVybiBoaXN0b3J5SGFuZGxlcihjb25kaXRpb24sIHZhbHVlKTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmNvbnN0IGdldFNlc3Npb25UaW1lc3RhbXAgPSAoKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKHBhcnNlSW50KHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFNFU1NJT05fU1RPUkFHRV9LRVlTLlNFU1NJT05fVElNRVNUQU1QKSkpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIubG9nKFwiQ291bGQgbm90IGdldCBzZXNzaW9uIHRpbWVzdGFtcFwiLCBlcnIpO1xuICAgIHJldHVybiBEYXRlLm5vdygpO1xuICB9XG59O1xuXG5jb25zdCBkdXJhdGlvbkhhbmRsZXIgPSAoY29uZGl0aW9uLCB2YWx1ZSkgPT4ge1xuICBjb25zdCBkdXJhdGlvbiA9IChEYXRlLm5vdygpIC0gZ2V0U2Vzc2lvblRpbWVzdGFtcCgpKSAvIDEwMDA7XG4gIHJldHVybiBjb25kaXRpb25DaGVja2VyKGR1cmF0aW9uLCBjb25kaXRpb24sIHBhcnNlSW50KHZhbHVlKSk7XG59O1xuXG5jb25zdCBoaXN0b3J5SGFuZGxlciA9IChjb25kaXRpb24sIHZhbHVlKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRIaXN0b3J5ID0gd2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oU0VTU0lPTl9TVE9SQUdFX0tFWVMuU0VTU0lPTl9ISVNUT1JZKT8uc3BsaXQoXCIsXCIpO1xuICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihjdXJyZW50SGlzdG9yeSwgY29uZGl0aW9uLCB2YWx1ZSk7XG59O1xuIiwiaW1wb3J0IHtjb25kaXRpb25DaGVja2VyfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCB7TU9CSUxFX01FRElBX1FVRVJZfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgTG9nZ2VyIGZyb20gXCIuLi9sb2dnZXJcIjtcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoXCJOZXh0ZGF5IEVudiBDaGVja2VyXCIpO1xuXG5leHBvcnQgY29uc3QgY2hlY2tFbnZSdWxlID0gKHJ1bGUpID0+e1xuICBsb2dnZXIubG9nKFwiQ2hlY2tpbmcgcnVsZVwiLCBKU09OLnN0cmluZ2lmeShydWxlKSk7XG4gIGNvbnN0IHtvcGVyYXRvciwgY29uZGl0aW9uLCB2YWx1ZX0gPSBydWxlO1xuXG4gIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICBjYXNlIFwiZGV2aWNlX3R5cGVcIjoge1xuICAgICAgY29uc3QgaXNNb2JpbGUgPSB3aW5kb3cubWF0Y2hNZWRpYShNT0JJTEVfTUVESUFfUVVFUlkpLm1hdGNoZXMgPyBcIm1vYmlsZVwiIDogXCJkZXNrdG9wXCI7XG4gICAgICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihpc01vYmlsZSwgY29uZGl0aW9uLCB2YWx1ZSk7XG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IHtjb25kaXRpb25DaGVja2VyLCBkZXRlcm1pbmVQY3QsIGdldElkZW50aWZpZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBSYW5kb21QY3QgQ2hlY2tlclwiKTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrUmFuZG9tTnVtYmVyUnVsZSA9IGFzeW5jIChydWxlKSA9PntcbiAgbG9nZ2VyLmxvZyhcIkNoZWNraW5nIHJ1bGVcIiwgSlNPTi5zdHJpbmdpZnkocnVsZSkpO1xuICBjb25zdCB7Y29uZGl0aW9uLCB2YWx1ZSwgc2FsdH0gPSBydWxlO1xuICBpZiAoIXNhbHQpIHtcbiAgICBsb2dnZXIubG9nKFwiU2FsdCBpcyBub3QgZGVmaW5lZFwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgaWRlbnRpZmllciA9IGF3YWl0IGdldElkZW50aWZpZXIoKTtcbiAgY29uc3QgcmFuZG9tUGN0ID0gYXdhaXQgZGV0ZXJtaW5lUGN0KGlkZW50aWZpZXIgKyBzYWx0KTtcbiAgY29uc3QgcnVudGltZVZhbHVlID0gcmFuZG9tUGN0O1xuICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihydW50aW1lVmFsdWUsIGNvbmRpdGlvbiwgdmFsdWUpO1xufTtcbiIsImltcG9ydCB7Y2hlY2tDb3VudGVyUnVsZX0gZnJvbSBcIi4vY291bnRlckNoZWNrZXJcIjtcbmltcG9ydCB7Y2hlY2tEYXRhTGF5ZXJSdWxlfSBmcm9tIFwiLi9kYXRhTGF5ZXJDaGVja2VyXCI7XG5pbXBvcnQge2NoZWNrRWxlbWVudFJ1bGV9IGZyb20gXCIuL2VsZW1lbnRDaGVja2VyXCI7XG5pbXBvcnQge2NoZWNrRnVuY3Rpb25SdWxlfSBmcm9tIFwiLi9mdW5jdGlvbkNoZWNrZXJcIjtcbmltcG9ydCB7Y2hlY2tTZXNzaW9uUnVsZX0gZnJvbSBcIi4vc2Vzc2lvbkNoZWNrZXJcIjtcbmltcG9ydCB7Y2hlY2tVcmxSdWxlfSBmcm9tIFwiLi91cmxDaGVja2VyXCI7XG5pbXBvcnQge2NoZWNrRW52UnVsZX0gZnJvbSBcIi4vZW52Q2hlY2tlclwiO1xuaW1wb3J0IHtjaGVja1JhbmRvbU51bWJlclJ1bGV9IGZyb20gXCIuL3JhbmRvbU51bWJlckNoZWNrZXJcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIk5leHRkYXkgUnVsZSBFbmdpbmVcIik7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJ1bGVFbmdpbmUge1xuICBjb25zdHJ1Y3Rvcihib2R5KSB7XG4gICAgY29uc3Qge2Jhc2VSdWxlU2V0LCBzdWJWYXJpYW50UnVsZVNldCwgYmluZGluZ3MsIGNhbGxiYWNrID0gbnVsbH0gPSBib2R5O1xuICAgIHRoaXMuYmFzZVJ1bGVTZXQgPSBiYXNlUnVsZVNldDtcbiAgICB0aGlzLnN1YlZhcmlhbnRSdWxlU2V0ID0gc3ViVmFyaWFudFJ1bGVTZXQ7XG4gICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuYmluZGluZ3MgPSBiaW5kaW5ncztcbiAgfVxuXG4gIGFzeW5jIGNoZWNrUnVsZXMoKSB7XG4gICAgZm9yIChjb25zdCBydWxlIG9mIHRoaXMuYmFzZVJ1bGVTZXQpIHtcbiAgICAgIGNvbnN0IHJ1bGVTYXRpc2ZpZWQgPSBhd2FpdCB0aGlzLmNoZWNrUnVsZShydWxlKTtcbiAgICAgIGlmICghcnVsZVNhdGlzZmllZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgYXN5bmMgY2hlY2tTdWJWYXJpYW50UnVsZXMoKSB7XG4gICAgZm9yIChjb25zdCBydWxlIG9mIHRoaXMuc3ViVmFyaWFudFJ1bGVTZXQpIHtcbiAgICAgIGNvbnN0IHJ1bGVTYXRpc2ZpZWQgPSBhd2FpdCB0aGlzLmNoZWNrUnVsZShydWxlKTtcbiAgICAgIGlmIChydWxlU2F0aXNmaWVkKSB7XG4gICAgICAgIHJldHVybiBydWxlLnN1YlZhcmlhbnRJZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBjaGVja1J1bGUocnVsZSkge1xuICAgIGNvbnN0IHtjaGFpbiwgY2hhaW5fY29uZGl0aW9uLCB0eXBlfSA9IHJ1bGU7XG4gICAgbGV0IHJ1bGVTYXRpc2ZpZWQgPSBudWxsO1xuICAgIC8vIGNoZWNrIHJ1bGVcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJzZXNzaW9uXCI6XG4gICAgICAgIHJ1bGVTYXRpc2ZpZWQgPSBjaGVja1Nlc3Npb25SdWxlKHJ1bGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJjb3VudGVyXCI6XG4gICAgICAgIHJ1bGVTYXRpc2ZpZWQgPSBjaGVja0NvdW50ZXJSdWxlKHJ1bGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJlbGVtZW50XCI6XG4gICAgICAgIHJ1bGVTYXRpc2ZpZWQgPSBjaGVja0VsZW1lbnRSdWxlKHJ1bGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJkYXRhTGF5ZXJcIjpcbiAgICAgICAgcnVsZVNhdGlzZmllZCA9IGNoZWNrRGF0YUxheWVyUnVsZShydWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwidXJsXCI6XG4gICAgICAgIHJ1bGVTYXRpc2ZpZWQgPSBjaGVja1VybFJ1bGUocnVsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcImZ1bmN0aW9uXCI6XG4gICAgICAgIHJ1bGVTYXRpc2ZpZWQgPSBjaGVja0Z1bmN0aW9uUnVsZShydWxlLCB0aGlzLmJpbmRpbmdzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZW52aXJvbm1lbnRcIjpcbiAgICAgICAgcnVsZVNhdGlzZmllZCA9IGNoZWNrRW52UnVsZShydWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwicmFuZG9tXCI6XG4gICAgICAgIHJ1bGVTYXRpc2ZpZWQgPSBhd2FpdCBjaGVja1JhbmRvbU51bWJlclJ1bGUocnVsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbG9nZ2VyLmxvZyhgTm8gc3VjaCBydWxlIHR5cGU6ICR7dHlwZX1gKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGNoYWluKSB7XG4gICAgICBzd2l0Y2ggKGNoYWluX2NvbmRpdGlvbikge1xuICAgICAgICBjYXNlIFwiYW5kXCI6XG4gICAgICAgICAgcnVsZVNhdGlzZmllZCA9IHJ1bGVTYXRpc2ZpZWQgJiYgYXdhaXQgdGhpcy5jaGVja1J1bGUoY2hhaW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwib3JcIjpcbiAgICAgICAgICBydWxlU2F0aXNmaWVkID0gcnVsZVNhdGlzZmllZCB8fCBhd2FpdCB0aGlzLmNoZWNrUnVsZShjaGFpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ4b3JcIjpcbiAgICAgICAgICBydWxlU2F0aXNmaWVkID0gcnVsZVNhdGlzZmllZCAhPSBhd2FpdCB0aGlzLmNoZWNrUnVsZShjaGFpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIk5vIHN1Y2ggY2hhaW4gY29uZGl0aW9uXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnVsZVNhdGlzZmllZDtcbiAgfVxufVxuIiwiaW1wb3J0IHtza3VDb2xsZWN0b3J9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHtMT09LVVBfQVBJX1VSTH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBBcGlcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9kdWN0SW5mb0xvb2t1cCA9IGFzeW5jICgpID0+IHtcbiAgbG9nZ2VyLmxvZyhcIlN0YXJ0aW5nIHByb2R1Y3QgaW5mbyBsb29rdXBcIik7XG4gIGNvbnN0IHNrdUxpc3QgPSBza3VDb2xsZWN0b3IoKTtcbiAgaWYgKCFza3VMaXN0KSB7XG4gICAgbG9nZ2VyLmxvZyhcIk5vIHNrdSBmb3VuZFwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgaGVhZGVycy5hcHBlbmQoXCJDb250ZW50LVR5cGVcIiwgXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICBsZXQgcHJvZHVjdEluZm87XG4gIHRyeSB7XG4gICAgcHJvZHVjdEluZm8gPSBhd2FpdCBmZXRjaChMT09LVVBfQVBJX1VSTCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHNrdUxpc3QpLFxuICAgICAgaGVhZGVycyxcbiAgICAgIG1vZGU6IFwiY29yc1wiLFxuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgbG9nZ2VyLndhcm4oXCJGZXRjaCB0byBjYXRhbG9nIGFwaSBmYWlsZWRcIik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKCFwcm9kdWN0SW5mby5vaykge1xuICAgIGxvZ2dlci5sb2coXCJQcm9kdWN0IGluZm8gbG9va3VwIGZhaWxlZFwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBwcm9kdWN0SW5mbyA9IGF3YWl0IHByb2R1Y3RJbmZvLmpzb24oKTtcbiAgaWYgKCFwcm9kdWN0SW5mbykge1xuICAgIGxvZ2dlci5sb2coXCJQcm9kdWN0IGluZm8gZXh0cmFjdGlvbiBmcm9tIHJlc3BvbnNlIGZhaWxlZFwiKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBsb2dnZXIubG9nKFwiUHJvZHVjdCBpbmZvIGxvb2t1cCBzdWNjZXNzZnVsXCIpO1xuICByZXR1cm4gcHJvZHVjdEluZm87XG59O1xuIiwiaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5cbmNvbnN0IHBhcnNpbmdSZWdleCA9IHtcbiAgUGFnZVR5cGU6IC8oPzpQYWdlVHlwZSdbIF0qOlsgXSonKSguKikoPzonKS8sXG4gIGNvbnRlbnRfbmFtZTogLyg/OmNvbnRlbnRfbmFtZVsgXSo6WyBdKlwiKSguKikoPzpcIikvLFxufTtcblxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIkJlYWdsZUluZm9MYXllclwiKTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYWxpemVCZWFnbGVJbmZvTGF5ZXIgPSAoKSA9PiB7XG4gIGxvZ2dlci5sb2coXCJJbml0aWFsaXppbmcgYmVhZ2xlSW5mb0xheWVyXCIpO1xuICB3aW5kb3cuYmVhZ2xlSW5mb0xheWVyID0gd2luZG93LmJlYWdsZUluZm9MYXllciB8fCB7Y2hlY2twb2ludHM6IFtdLCBkYXRhUG9pbnRzOiBbXX07XG4gIGNvbnN0IHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcbiAgaWYgKCFzY3JpcHRzIHx8ICFzY3JpcHRzLmxlbmd0aCkge1xuICAgIGxvZ2dlci53YXJuKFwiQ291bGQgbm90IHBhcnNlIGJvZHlcIik7XG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAobGV0IGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7IGkgPiAtMTsgaS0tKSB7XG4gICAgY29uc3Qgc2NyaXB0VGV4dENvbnRlbnQgPSBzY3JpcHRzW2ldLnRleHRDb250ZW50O1xuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHBhcnNpbmdSZWdleCkpIHtcbiAgICAgIGNvbnN0IGZvdW5kVmFsID0gcGFyc2luZ1JlZ2V4W2tleV0uZXhlYyhzY3JpcHRUZXh0Q29udGVudCkgPyBwYXJzaW5nUmVnZXhba2V5XS5leGVjKHNjcmlwdFRleHRDb250ZW50KVsxXSA6IG51bGw7XG4gICAgICBpZiAoZm91bmRWYWwpIHtcbiAgICAgICAgY29uc3Qgb2JqID0ge307XG4gICAgICAgIG9ialtrZXldID0gZGVjb2RlVVJJQ29tcG9uZW50KEpTT04ucGFyc2UoXCJcXFwiXCIgKyBmb3VuZFZhbCArIFwiXFxcIlwiKSk7XG4gICAgICAgIHdpbmRvdy5iZWFnbGVJbmZvTGF5ZXIuZGF0YVBvaW50cy5wdXNoKG9iaik7XG4gICAgICAgIGlmICh3aW5kb3cuYmVhZ2xlSW5mb0xheWVyLmRhdGFQb2ludHMubGVuZ3RoID09PSAyKSByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuIiwiaW1wb3J0IGFwcGx5VHJlYXRtZW50cyBmcm9tIFwiLi4vTmV4dGRheUFwcGx5VHJlYXRtZW50cy9pbmRleFwiO1xuaW1wb3J0IHtjaGVja3BvaW50LCBjaGVja3BvaW50c30gZnJvbSBcIi4uL0JlYWdsZUNoZWNrcG9pbnRcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuaW1wb3J0IE1vbml0b3IgZnJvbSBcIi4uL05leHRkYXlNb25pdG9yL2luZGV4XCI7XG5pbXBvcnQgVHJlYXRtZW50UmVwb3NpdG9yeSBmcm9tIFwiLi4vTmV4dGRheVRyZWF0bWVudFJlcG9zaXRvcnkvaW5kZXhcIjtcbmltcG9ydCBSdWxlRW5naW5lIGZyb20gXCIuLi9OZXh0ZGF5UnVsZUVuZ2luZVwiO1xuaW1wb3J0IHtwcm9kdWN0SW5mb0xvb2t1cH0gZnJvbSBcIi4uL05leHRkYXlBcGlcIjtcbmltcG9ydCB7aW5pdGlhbGl6ZUJlYWdsZUluZm9MYXllcn0gZnJvbSBcIi4uL0JlYWdsZUluZm9MYXllclwiO1xuaW1wb3J0IHtcbiAgTU9CSUxFX01FRElBX1FVRVJZLFxuICBTUExJVF9SQVRJTyxcbiAgTE9DQUxfU1RPUkFHRV9LRVlTLFxuICBUUkVBVE1FTlRfUkFUSU8sXG4gIFNFU1NJT05fU1RPUkFHRV9LRVlTLFxuICBNQVhfVElNRU9VVF9QRVJfU0VTU0lPTixcbn0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtcbiAgZ2V0SWRlbnRpZmllcixcbiAgaW5pdGlhdGVTZXNzaW9uU3RvcmFnZXMsXG4gIGluamVjdFN0eWxlU2hlZXQsXG4gIHJlbW92ZURvY3VtZW50SGlkZSxcbiAgZGV0ZXJtaW5lUGN0LFxuICBwcmVwYXJlQWN0aW9ucyxcbiAgZ2V0RGVidWdNb2RlLFxufSBmcm9tIFwiLi4vdXRpbHNcIjtcblxuKGFzeW5jIGZ1bmN0aW9uKCkge1xuICBjaGVja3BvaW50KGNoZWNrcG9pbnRzLkJlYWdsZUxvYWRlZCk7XG4gIGxldCBpc09uID0gbnVsbDtcbiAgbGV0IG1vbml0b3IgPSBudWxsO1xuICBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG4gIGNvbnN0IHtUSU1FT1VUX0NPVU5UfSA9IFNFU1NJT05fU1RPUkFHRV9LRVlTO1xuICBsZXQgdGltZW91dENvdW50ZXIgPSBudWxsO1xuICBsb2dnZXIuaW5mbyhcIk5leHRkYXkgaW5pdGlhbGl6aW5nXCIpO1xuICB0cnkge1xuICAgIGluaXRpYWxpemVCZWFnbGVJbmZvTGF5ZXIoKTtcbiAgICBjb25zdCBwcm9kdWN0SW5mb1Byb21pc2UgPSBwcm9kdWN0SW5mb0xvb2t1cCgpO1xuICAgIC8vIGNoZWNrIGlmIGRlYnVnIG1vZGUgaXMgb25cbiAgICBjb25zdCBkZWJ1Z01vZGUgPSBnZXREZWJ1Z01vZGUoKTtcbiAgICBtb25pdG9yID0gbmV3IE1vbml0b3IoZGVidWdNb2RlKTtcbiAgICBjaGVja3BvaW50KGNoZWNrcG9pbnRzLkluaXRpYWxpemVkKTtcblxuICAgIGNvbnN0IGlkZW50aWZpZXIgPSBhd2FpdCBnZXRJZGVudGlmaWVyKCk7XG4gICAgbG9nZ2VyLmxvZyhcIkZvdW5kIGNvb2tpZSBpZGVudGlmaWVyOiBcIiwgaWRlbnRpZmllcik7XG4gICAgY29uc3QgY29va2llUGN0ID0gYXdhaXQgZGV0ZXJtaW5lUGN0KGlkZW50aWZpZXIpO1xuICAgIGlmICghZGVidWdNb2RlKSB7XG4gICAgICBpZiAoY29va2llUGN0IDwgU1BMSVRfUkFUSU8pIHtcbiAgICAgICAgaWYgKGNvb2tpZVBjdCA9PT0gLTEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZGV0ZXJtaW5lIGNvb2tpZSBwY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgaXNPbiA9IGZhbHNlO1xuICAgICAgfSBlbHNlIGlzT24gPSB0cnVlO1xuXG4gICAgICBjaGVja3BvaW50KGNoZWNrcG9pbnRzLlVzZXJPbk9mZik7XG4gICAgICB0aW1lb3V0Q291bnRlciA9IHBhcnNlSW50KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oVElNRU9VVF9DT1VOVCkpIHx8IDA7XG4gICAgICBpZiAodGltZW91dENvdW50ZXIgPiBNQVhfVElNRU9VVF9QRVJfU0VTU0lPTikge1xuICAgICAgICBjaGVja3BvaW50KGNoZWNrcG9pbnRzLlRpbWVvdXRUaHJlc2hvbGRSZWFjaGVkKTtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTmV4dGRheSB0aW1lb3V0IHRocmVzaG9sZCByZWFjaGVkXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSBsb2dnZXIuaW5mbyhcIkRlYnVnIG1vZGUgb246IGFsbCBhcHBsaWNhYmxlIHRyZWF0bWVudHMgd2lsbCBiZSBhcHBsaWVkXCIpO1xuXG5cbiAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xuICAgIGNvbnN0IGRlYnVnRmlsdGVyZWRUcmVhdG1lbnRzID0gZGVidWdNb2RlID8gc2VhcmNoUGFyYW1zLmluY2x1ZGVzKFwiZmlsdGVyPVwiKSA/IHNlYXJjaFBhcmFtcy5zbGljZShcbiAgICAgICAgc2VhcmNoUGFyYW1zLmluZGV4T2YoXCJbXCIpICsgMSxcbiAgICAgICAgc2VhcmNoUGFyYW1zLmxhc3RJbmRleE9mKFwiXVwiKSxcbiAgICApLnNwbGl0KFwiLFwiKS5tYXAoKGl0ZW0pID0+IHBhcnNlSW50KGl0ZW0sIDEwKSk6IG51bGwgOiBudWxsO1xuXG5cbiAgICBpZiAoIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJuZXh0RGF5LWhpZGVcIikpIHtcbiAgICAgIGNoZWNrcG9pbnQoY2hlY2twb2ludHMuU2NyaXB0VGltZU91dCk7XG4gICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFRJTUVPVVRfQ09VTlQsIHRpbWVvdXRDb3VudGVyICsgMSk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZXh0ZGF5IHNjcmlwdCB0aW1lZCBvdXRcIik7XG4gICAgfVxuICAgIHdpbmRvdy5kYXRhTGF5ZXIgPSB3aW5kb3cuZGF0YUxheWVyIHx8IFtdO1xuICAgIHdpbmRvdy5kYXRhTGF5ZXIucHVzaCh7ZXZlbnQ6IFwiR0xPVlwiLCBHTE9WX09OOiAoaXNPbiA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiKX0pO1xuICAgIGlmIChpc09uID09PSBmYWxzZSkgdGhyb3cgbmV3IEVycm9yKFwiQ29udHJvbCBncm91cDogbm8gdHJlYXRtZW50cyBhcHBsaWVkXCIpO1xuICAgIGluamVjdFN0eWxlU2hlZXQoKTtcbiAgICBpbml0aWF0ZVNlc3Npb25TdG9yYWdlcygpO1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgcmVtb3ZlRG9jdW1lbnRIaWRlKCk7XG4gICAgfSwgMjAwMCk7XG4gICAgY29uc3QgdHJlYXRtZW50c1Byb21pc2UgPSBUcmVhdG1lbnRSZXBvc2l0b3J5LmdldFRyZWF0bWVudHMoKTtcbiAgICBjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5tYXRjaE1lZGlhKE1PQklMRV9NRURJQV9RVUVSWSkubWF0Y2hlcztcbiAgICBjb25zdCBPQlNFUlZFUl9DT05GSUcgPSB7c3VidHJlZTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBhdHRyaWJ1dGVzOiB0cnVlfTtcblxuICAgIGNvbnN0IGVuZ2FnZVRyZWF0bWVudCA9IGFzeW5jICh0cmVhdG1lbnQpID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgaWQsXG4gICAgICAgIGFjdGlvbnMsXG4gICAgICAgIGJhc2VSdWxlU2V0LFxuICAgICAgICBkZXZpY2UsXG4gICAgICAgIGRlcGVuZGFudF9vbl90cmVhdG1lbnQsXG4gICAgICAgIHJlYXBwbHlfZXZlbnQsXG4gICAgICAgIHN1YlZhcmlhbnRSdWxlU2V0LFxuICAgICAgICB3ZWlnaHQsXG4gICAgICB9ID0gdHJlYXRtZW50O1xuICAgICAgaWYgKGRlYnVnRmlsdGVyZWRUcmVhdG1lbnRzICYmICFkZWJ1Z0ZpbHRlcmVkVHJlYXRtZW50cy5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKGRldmljZSA9PT0gXCJtb2JpbGVcIiAmJiAhaXNNb2JpbGUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIlRyZWF0bWVudCBkZXZpY2UgJ21vYmlsZScgbWlzbWF0Y2hcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChkZXZpY2UgPT09IFwiZGVza3RvcFwiICYmIGlzTW9iaWxlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJUcmVhdG1lbnQgZGV2aWNlICdkZXNrdG9wJyBtaXNtYXRjaFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHJlYXBwbHlfZXZlbnQpIHtcbiAgICAgICAgbGV0IHJlYXBwbHlfZXZlbnRfYXJyYXkgPSByZWFwcGx5X2V2ZW50O1xuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVhcHBseV9ldmVudCkpIHJlYXBwbHlfZXZlbnRfYXJyYXkgPSBbcmVhcHBseV9ldmVudF07XG4gICAgICAgIGxvZ2dlci5sb2coYFJlYXBwbHkgZXZlbnQgJyR7cmVhcHBseV9ldmVudH0nIGZvdW5kIGZvciB0cmVhdG1lbnQ6ICR7aWR9YCk7XG4gICAgICAgIGZvciAoY29uc3QgcmVhcHBseUV2ZW50IG9mIHJlYXBwbHlfZXZlbnRfYXJyYXkpIHtcbiAgICAgICAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gcmVBcHBseVRyZWF0bWVudHNNYXBbcmVhcHBseUV2ZW50XSA/XG4gICAgICAgICAgICAgIHJlQXBwbHlUcmVhdG1lbnRzTWFwW3JlYXBwbHlFdmVudF0gOiBbXTtcbiAgICAgICAgICBpZiAocHJldmlvdXNWYWx1ZS5pbmNsdWRlcyhpZCkpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJUcmVhdG1lbnQgYWxyZWFkeSBhZGRlZCBmb3IgcmVhcHBseSBldmVudFwiKTtcbiAgICAgICAgICB9IGVsc2UgcmVBcHBseVRyZWF0bWVudHNNYXBbcmVhcHBseUV2ZW50XSA9IFsuLi5wcmV2aW91c1ZhbHVlLCBpZF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGJpbmRpbmdzID0ge3Byb2R1Y3RJbmZvfTtcbiAgICAgIGNvbnN0IHJ1bGVFbmdpbmUgPSBuZXcgUnVsZUVuZ2luZSh7YmFzZVJ1bGVTZXQsIHN1YlZhcmlhbnRSdWxlU2V0LCBiaW5kaW5nc30pO1xuICAgICAgbG9nZ2VyLmxvZyhcIlN0YXJ0aW5nIGJhc2UgcnVsZSBzZXQgY2hlY2sgZm9yIHRyZWF0bWVudDogXCIgKyBpZCk7XG4gICAgICBpZiAoIWJhc2VSdWxlU2V0IHx8IGF3YWl0IHJ1bGVFbmdpbmUuY2hlY2tSdWxlcygpKSB7XG4gICAgICAgIGxldCB0cmVhdG1lbnRTa2lwUmF0aW8gPSB3ZWlnaHQgPT09IDEwMCA/IDAgOiAoMTAwIC0gd2VpZ2h0IHx8IFRSRUFUTUVOVF9SQVRJTyk7XG4gICAgICAgIGlmIChkZXBlbmRhbnRfb25fdHJlYXRtZW50KSB7XG4gICAgICAgICAgLy8gSWYgZGVwZW5kYW50IG9uIHRyZWF0bWVudCBpcyBmb3VuZCBhbmQgaGFzIHdlaWdodDsgdXNlIGl0cyBza2lwIHJhdGlvXG4gICAgICAgICAgY29uc3QgZGVwZW5kYW50T25UcmVhdG1lbnRXZWlnaHQgPSBtYXRjaGVkVHJlYXRtZW50cy5maW5kKCh0KSA9PiB0LmlkID09PSBkZXBlbmRhbnRfb25fdHJlYXRtZW50KT8ud2VpZ2h0O1xuICAgICAgICAgIHRyZWF0bWVudFNraXBSYXRpbyA9IGRlcGVuZGFudE9uVHJlYXRtZW50V2VpZ2h0ID09PSAxMDAgPyAwIDogKDEwMCAtIGRlcGVuZGFudE9uVHJlYXRtZW50V2VpZ2h0fHxcbiAgICAgICAgICAgIFRSRUFUTUVOVF9SQVRJTyk7XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZyhcIlRyZWF0bWVudCBza2lwIHJhdGlvOiBcIiArIHRyZWF0bWVudFNraXBSYXRpbyk7XG4gICAgICAgIC8vIERldGVybWluaW5nIGlkZW50aWZpZXIgZm9yIGNhbGN1bGF0aW5nIHRyZWF0bWVudCBwZXJjZW50YWdlICh0cmVhdG1lbnRQY3QpXG4gICAgICAgIGNvbnN0IGRldGVybWluaW5nSWRlbnRpZmllciA9IGRlcGVuZGFudF9vbl90cmVhdG1lbnQgfHwgaWQ7XG5cbiAgICAgICAgLy8gdHJlYXRtZW50UGN0IGlzIHRoZSBwZXJjZW50YWdlIHZhbHVlIGZvciB0aGUgdHJlYXRtZW50IHVzZWQgdG8gZGV0ZXJtaW5lIGlmIGl0IHNob3VsZCBiZSBza2lwcGVkIG9yIG5vdFxuICAgICAgICAvLyB0cmVhdG1lbnRQY3QgaXMgMTAwIHdoZW4gZGVidWcgbW9kZSBpcyAxLCBlbnN1cmluZyBubyB0cmVhdG1lbnRzIGFyZSBza2lwcGVkXG4gICAgICAgIGNvbnN0IHRyZWF0bWVudFBjdCA9IGRlYnVnTW9kZSA9PT0gMSA/IDEwMCA6IGF3YWl0IGRldGVybWluZVBjdChpZGVudGlmaWVyICsgZGV0ZXJtaW5pbmdJZGVudGlmaWVyKTtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIlRyZWF0bWVudFBjdDogXCIgKyB0cmVhdG1lbnRQY3QgKyBgIHdpdGggZGVidWcgbW9kZSAke2RlYnVnTW9kZSA/IFwib25cIiA6IFwib2ZmXCJ9YCk7XG4gICAgICAgIGxldCBzdWJWYXJpYW50SWQgPSBudWxsO1xuICAgICAgICBsZXQgcHJlcGFyZWQgPSBhY3Rpb25zO1xuICAgICAgICBpZiAoc3ViVmFyaWFudFJ1bGVTZXQpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKFwiU3RhcnRpbmcgc3ViIHZhcmlhbnQgcnVsZSBzZXQgY2hlY2sgZm9yIHRyZWF0bWVudDogXCIgKyBpZCk7XG4gICAgICAgICAgc3ViVmFyaWFudElkID0gYXdhaXQgcnVsZUVuZ2luZS5jaGVja1N1YlZhcmlhbnRSdWxlcygpO1xuICAgICAgICAgIGlmIChzdWJWYXJpYW50SWQpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJBcHBseWluZyBzdWIgdmFyaWFudCB3aXRoIGlkOiBcIiwgc3ViVmFyaWFudElkKTtcbiAgICAgICAgICAgIHByZXBhcmVkID0gcHJlcGFyZUFjdGlvbnMoYWN0aW9ucywgc3ViVmFyaWFudElkKTtcbiAgICAgICAgICB9IGVsc2UgbG9nZ2VyLmxvZyhcIkFwcGx5aW5nIHRyZWF0bWVudCB3aXRoIGRlZmF1bHQgdmFsdWVzXCIpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0cmVhdG1lbnRQY3QgPCB0cmVhdG1lbnRTa2lwUmF0aW8pIHtcbiAgICAgICAgICBsb2dnZXIubG9nKGBUcmVhdG1lbnQgJHtpZH0gc2tpcHBlZCBkdWUgdG8gdHJlYXRtZW50IHNwbGl0IHJhdGlvYCk7XG4gICAgICAgICAgZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50c1tpZF0gPSB7XG4gICAgICAgICAgICBkZXBlbmRhbnRfb25fdHJlYXRtZW50OiAoZGVwZW5kYW50X29uX3RyZWF0bWVudCB8fCBudWxsKSxcbiAgICAgICAgICAgIHN1YlZhcmlhbnRJZCxcbiAgICAgICAgICB9O1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhcHBseVRyZWF0bWVudHMocHJlcGFyZWQsIHByb2R1Y3RJbmZvKTtcbiAgICAgICAgICBhcHBsaWVkVHJlYXRtZW50SWRzW2lkXSA9IHtzdWJWYXJpYW50SWR9O1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcIlJ1bGUgY2hlY2sgZmFpbGVkIGZvciB0cmVhdG1lbnQ6IFwiLCBpZCk7XG4gICAgfTtcblxuICAgIC8vIFRlbXBvcmFyeSBjb2RlIGJsb2NrIHRvIHRyYWNrIGNvdXBvbiBhcHBsaWNhYmxlIGJhc2tldCB0b3RhbCBwcmljZVxuICAgIC8vIFRPRE86IFJlbW92ZSBvbmNlIHRoZSBpbmZvIGNhbiBiZSBvYnRhaW5lZCB2aWEgTG9va3VwIEFQSVxuICAgIGNvbnN0IGNvbGxlY3RDQUJhc2tldFByaWNlID0gKCkgPT4ge1xuICAgICAgY29uc3Qge0NPVVBPTl9BUFBMSUNBQkxFX0JBU0tFVF9QUklDRX0gPSBMT0NBTF9TVE9SQUdFX0tFWVM7XG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCIvc2lwYXJpcy1saXN0ZXNpLmh0bWxcIikpIHtcbiAgICAgICAgY29uc3QgcHJpY2VFbGVtZW50cyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcmljZVwiKSk7XG4gICAgICAgIHByaWNlRWxlbWVudHMucHVzaCguLi5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubmV3LXByaWNlXCIpKSk7XG4gICAgICAgIGlmICghcHJpY2VFbGVtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKFwiUHJpY2UgZWxlbWVudHMgbm90IGZvdW5kXCIpO1xuICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShDT1VQT05fQVBQTElDQUJMRV9CQVNLRVRfUFJJQ0UsIDApO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsb2dnZXIubG9nKFwiUHJpY2UgZWxlbWVudHM6IFwiLCBwcmljZUVsZW1lbnRzKTtcbiAgICAgICAgY29uc3QgY291cG9uQXBwbGljYWJsZVRvdGFsUHJpY2UgPSBwcmljZUVsZW1lbnRzLnJlZHVjZSgocmV0dXJuVmFsLCBlbGVtKSA9PiB7XG4gICAgICAgICAgcmV0dXJuVmFsICs9IHBhcnNlSW50KGVsZW0udGV4dENvbnRlbnQucmVwbGFjZShcIlRMXCIsIFwiXCIpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICAgICAgICByZXR1cm4gcmV0dXJuVmFsO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkNvdXBvbiBhcHBsaWNhYmxlIHRvdGFsIHByaWNlOiBcIiwgY291cG9uQXBwbGljYWJsZVRvdGFsUHJpY2UpO1xuICAgICAgICBpZiAoY291cG9uQXBwbGljYWJsZVRvdGFsUHJpY2UgPj0gMCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShcbiAgICAgICAgICAgICAgQ09VUE9OX0FQUExJQ0FCTEVfQkFTS0VUX1BSSUNFLCBjb3Vwb25BcHBsaWNhYmxlVG90YWxQcmljZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCIvc2lwYXJpcy1vemV0aS5odG1sXCIpKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShDT1VQT05fQVBQTElDQUJMRV9CQVNLRVRfUFJJQ0UsIDApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgY2FCYXNrZXRQcmljZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShDT1VQT05fQVBQTElDQUJMRV9CQVNLRVRfUFJJQ0UpO1xuICAgICAgICBpZiAoY2FCYXNrZXRQcmljZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShDT1VQT05fQVBQTElDQUJMRV9CQVNLRVRfUFJJQ0UsIDApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIGNvbGxlY3RDQUJhc2tldFByaWNlKCk7XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiL3NpcGFyaXMtbGlzdGVzaS5odG1sXCIpKSB7XG4gICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICBsb2dnZXIubG9nKFwiTXV0YXRpb24gb2JzZXJ2ZWQsIGNhbGxpbmcgY29sbGVjdENBQmFza2V0UHJpY2VcIik7XG4gICAgICAgIGNvbGxlY3RDQUJhc2tldFByaWNlKCk7XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGJhc2tldENoZWNrb3V0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2hlY2tvdXRGb3JtXCIpO1xuICAgICAgaWYgKGJhc2tldENoZWNrb3V0Rm9ybSkgb2JzZXJ2ZXIub2JzZXJ2ZShiYXNrZXRDaGVja291dEZvcm0sIE9CU0VSVkVSX0NPTkZJRyk7XG4gICAgfVxuICAgIC8vIEVuZCBvZiB0ZW1wb3JhcnkgY29kZSBibG9ja1xuXG4gICAgY29uc3QgW3RyZWF0bWVudHMsIHByb2R1Y3RJbmZvXSA9IGF3YWl0IFByb21pc2UuYWxsKFt0cmVhdG1lbnRzUHJvbWlzZSwgcHJvZHVjdEluZm9Qcm9taXNlXSk7XG5cbiAgICBsb2dnZXIubG9nKFwiRm91bmQgdHJlYXRtZW50czogXCIsIHRyZWF0bWVudHMpO1xuICAgIGxvZ2dlci5sb2coXCJGb3VuZCBjb29raWUgcGVyY2VudGFnZTogXCIsIGNvb2tpZVBjdCk7XG4gICAgbG9nZ2VyLmxvZyhcIlNwbGl0X3JhdGlvOiBcIiwgU1BMSVRfUkFUSU8pO1xuICAgIGxvZ2dlci5sb2coXCJjb29raWVQY3QgPCBTUExJVF9SQVRJT1wiLCBjb29raWVQY3QgPCBTUExJVF9SQVRJTyk7XG4gICAgbG9nZ2VyLmluZm8oYENvbnRyb2wgZ3JvdXAgcmF0aW86ICR7U1BMSVRfUkFUSU99JWApO1xuXG4gICAgY29uc3QgdHJlYXRtZW50UmVwb3NpdG9yeSA9IG5ldyBUcmVhdG1lbnRSZXBvc2l0b3J5KHtcbiAgICAgIHRyZWF0bWVudHMsXG4gICAgICBjb29raWVQY3QsXG4gICAgfSk7XG4gICAgY2hlY2twb2ludChjaGVja3BvaW50cy5UcmVhdG1lbnRSZXBvc2l0b3J5Q3JlYXRlZCk7XG4gICAgY29uc3QgbWF0Y2hlZFRyZWF0bWVudHMgPSB0cmVhdG1lbnRSZXBvc2l0b3J5LmdldE1hdGNoZWRUcmVhdG1lbnRzKCk7XG4gICAgaWYgKCFtYXRjaGVkVHJlYXRtZW50cy5sZW5ndGgpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJObyB0cmVhdG1lbnRzIG1hdGNoZWQsIHJldHVybmluZyB3aXRob3V0IGZ1cnRoZXIgYWN0aW9uXCIpO1xuICAgICAgcmVtb3ZlRG9jdW1lbnRIaWRlKCk7XG4gICAgICBtb25pdG9yLnNlbmRMb2dzKGlzT24sIFwiTm8gdHJlYXRtZW50cyBtYXRjaGVkXCIsIHRydWUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhcHBsaWVkVHJlYXRtZW50SWRzID0ge307XG4gICAgY29uc3QgZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cyA9IHt9O1xuICAgIGNvbnN0IHJlQXBwbHlUcmVhdG1lbnRzTWFwID0ge307XG4gICAgZm9yIChjb25zdCB0cmVhdG1lbnQgb2YgbWF0Y2hlZFRyZWF0bWVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IGVuZ2FnZVRyZWF0bWVudCh0cmVhdG1lbnQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJFcnJvciBleGVjdXRpbmcgcnVsZXNcIiwgZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlRG9jdW1lbnRIaWRlKCk7XG4gICAgY2hlY2twb2ludChjaGVja3BvaW50cy5UcmVhdG1lbnRzQXBwbGllZCk7XG4gICAgbG9nZ2VyLmxvZyhcIkFwcGxpZWQgdHJlYXRtZW50czogXCIsIGFwcGxpZWRUcmVhdG1lbnRJZHMpO1xuXG4gICAgLy8gVXBkYXRlIG1vbml0b3Igd2l0aCBhcHBsaWVkIHRyZWF0bWVudHNcbiAgICBtb25pdG9yLnVwZGF0ZVRyZWF0bWVudHMoYXBwbGllZFRyZWF0bWVudElkcywgZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cyk7XG4gICAgbW9uaXRvci5zZW5kTG9ncyhpc09uKTtcblxuICAgIHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIG1vbml0b3IudXBkYXRlTGF0ZXN0Q2hhbmdlcyhhcHBsaWVkVHJlYXRtZW50SWRzLCBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzKTtcbiAgICB9LCAxMDAwKTtcblxuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHJlQXBwbHlUcmVhdG1lbnRzTWFwKSkge1xuICAgICAgY29uc3QgdHJlYXRtZW50SWRzID0gcmVBcHBseVRyZWF0bWVudHNNYXBba2V5XTtcbiAgICAgIGNvbnN0IHJlQXBwbHlUcmVhdG1lbnRzID0gbWF0Y2hlZFRyZWF0bWVudHMuZmlsdGVyKCh0KSA9PiB0cmVhdG1lbnRJZHMuaW5jbHVkZXModC5pZCkpO1xuICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgY2FzZSBcImluZmluaXRlX3Njcm9sbFwiOiB7XG4gICAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyZWF0bWVudCBvZiByZUFwcGx5VHJlYXRtZW50cykge1xuICAgICAgICAgICAgICBsb2dnZXIubG9nKGBSZXRyeWluZyB0cmVhdG1lbnQgJHt0cmVhdG1lbnQuaWR9IGZyb20gaW5maW5pdGVfc2Nyb2xsYCk7XG4gICAgICAgICAgICAgIGVuZ2FnZVRyZWF0bWVudCh0cmVhdG1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidGltZW91dFwiOiB7XG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyZWF0bWVudCBvZiByZUFwcGx5VHJlYXRtZW50cykge1xuICAgICAgICAgICAgICBsb2dnZXIubG9nKGBSZXRyeWluZyB0cmVhdG1lbnQgJHt0cmVhdG1lbnQuaWR9IGZyb20gdGltZW91dGApO1xuICAgICAgICAgICAgICBlbmdhZ2VUcmVhdG1lbnQodHJlYXRtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCA1MDApO1xuICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJlbGVtZW50X2NoYW5nZVwiOiB7XG4gICAgICAgICAgZm9yIChjb25zdCB0cmVhdG1lbnQgb2YgcmVBcHBseVRyZWF0bWVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlYXBwbHlTZWxlY3Rvckxpc3QgPSBBcnJheS5pc0FycmF5KHRyZWF0bWVudC5yZWFwcGx5X3NlbGVjdG9yKSA/XG4gICAgICAgICAgICB0cmVhdG1lbnQucmVhcHBseV9zZWxlY3RvciA6IFt0cmVhdG1lbnQucmVhcHBseV9zZWxlY3Rvcl07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHNlbGVjdG9yIG9mIHJlYXBwbHlTZWxlY3Rvckxpc3QpIHtcbiAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgICAgICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKGBSZXRyeWluZyB0cmVhdG1lbnQgJHt0cmVhdG1lbnQuaWR9IGZyb20gZWxlbWVudF9jaGFuZ2VgKTtcbiAgICAgICAgICAgICAgICAgIGVuZ2FnZVRyZWF0bWVudCh0cmVhdG1lbnQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCwgT0JTRVJWRVJfQ09ORklHKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwib25fc2Nyb2xsXCI6IHtcbiAgICAgICAgICB3aW5kb3cub25zY3JvbGwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJlYXRtZW50IG9mIHJlQXBwbHlUcmVhdG1lbnRzKSB7XG4gICAgICAgICAgICAgIGxvZ2dlci5sb2coYFJldHJ5aW5nIHRyZWF0bWVudCAke3RyZWF0bWVudC5pZH0gZnJvbSBvbl9zY3JvbGxgKTtcbiAgICAgICAgICAgICAgZW5nYWdlVHJlYXRtZW50KHRyZWF0bWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicXVlcnlfc2VhcmNoX2NoYW5nZVwiOiB7XG4gICAgICAgICAgbGV0IHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2ggIT09IHF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB0cmVhdG1lbnQgb2YgcmVBcHBseVRyZWF0bWVudHMpIHtcbiAgICAgICAgICAgICAgICBsb2dnZXIubG9nKGBSZXRyeWluZyB0cmVhdG1lbnQgJHt0cmVhdG1lbnQuaWR9IGZyb20gcXVlcnlfc2VhcmNoX2NoYW5nZWApO1xuICAgICAgICAgICAgICAgIGVuZ2FnZVRyZWF0bWVudCh0cmVhdG1lbnQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudCwgT0JTRVJWRVJfQ09ORklHKTtcbiAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwib25fcG9wc3RhdGVcIjoge1xuICAgICAgICAgIHdpbmRvdy5vbnBvcHN0YXRlID0gKGUpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdHJlYXRtZW50IG9mIHJlQXBwbHlUcmVhdG1lbnRzKSB7XG4gICAgICAgICAgICAgIGxvZ2dlci5sb2coYFJldHJ5aW5nIHRyZWF0bWVudCAke3RyZWF0bWVudC5pZH0gZnJvbSBvbl9wb3BzdGF0ZWApO1xuICAgICAgICAgICAgICBlbmdhZ2VUcmVhdG1lbnQodHJlYXRtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIlJlYXBwbHkgZXZlbnQgbm90IGZvdW5kOiBcIiwga2V5KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgY2hlY2twb2ludChjaGVja3BvaW50cy5SZWFwcGx5VHJlYXRtZW50TGlzdGVuZXJzKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVtb3ZlRG9jdW1lbnRIaWRlKCk7XG4gICAgY29uc29sZS53YXJuKFwiTmV4dGRheTogXCIsIGVyci5tZXNzYWdlKTtcbiAgICBtb25pdG9yLnNlbmRMb2dzKGlzT24sIGVyci5tZXNzYWdlLCB0cnVlKTtcbiAgfVxufSkoKTtcbiJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwicnVudGltZSIsInVuZGVmaW5lZCIsIk9wIiwiT2JqZWN0IiwicHJvdG90eXBlIiwiaGFzT3duIiwiaGFzT3duUHJvcGVydHkiLCIkU3ltYm9sIiwiU3ltYm9sIiwiaXRlcmF0b3JTeW1ib2wiLCJpdGVyYXRvciIsImFzeW5jSXRlcmF0b3JTeW1ib2wiLCJhc3luY0l0ZXJhdG9yIiwidG9TdHJpbmdUYWdTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsImRlZmluZSIsIm9iaiIsImtleSIsInZhbHVlIiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJlcnIiLCJ3cmFwIiwiaW5uZXJGbiIsIm91dGVyRm4iLCJzZWxmIiwidHJ5TG9jc0xpc3QiLCJwcm90b0dlbmVyYXRvciIsIkdlbmVyYXRvciIsImdlbmVyYXRvciIsImNyZWF0ZSIsImNvbnRleHQiLCJDb250ZXh0IiwiX2ludm9rZSIsInN0YXRlIiwiR2VuU3RhdGVTdXNwZW5kZWRTdGFydCIsIm1ldGhvZCIsImFyZyIsIkdlblN0YXRlRXhlY3V0aW5nIiwiRXJyb3IiLCJHZW5TdGF0ZUNvbXBsZXRlZCIsImRvbmVSZXN1bHQiLCJkZWxlZ2F0ZSIsImRlbGVnYXRlUmVzdWx0IiwibWF5YmVJbnZva2VEZWxlZ2F0ZSIsIkNvbnRpbnVlU2VudGluZWwiLCJzZW50IiwiX3NlbnQiLCJkaXNwYXRjaEV4Y2VwdGlvbiIsImFicnVwdCIsInJlY29yZCIsInRyeUNhdGNoIiwidHlwZSIsImRvbmUiLCJHZW5TdGF0ZVN1c3BlbmRlZFlpZWxkIiwibWFrZUludm9rZU1ldGhvZCIsImZuIiwiY2FsbCIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJJdGVyYXRvclByb3RvdHlwZSIsInRoaXMiLCJnZXRQcm90byIsImdldFByb3RvdHlwZU9mIiwiTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUiLCJ2YWx1ZXMiLCJHcCIsImRlZmluZUl0ZXJhdG9yTWV0aG9kcyIsImZvckVhY2giLCJBc3luY0l0ZXJhdG9yIiwiUHJvbWlzZUltcGwiLCJpbnZva2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVzdWx0IiwiX19hd2FpdCIsInRoZW4iLCJ1bndyYXBwZWQiLCJlcnJvciIsInByZXZpb3VzUHJvbWlzZSIsImNhbGxJbnZva2VXaXRoTWV0aG9kQW5kQXJnIiwiVHlwZUVycm9yIiwiaW5mbyIsInJlc3VsdE5hbWUiLCJuZXh0IiwibmV4dExvYyIsInB1c2hUcnlFbnRyeSIsImxvY3MiLCJlbnRyeSIsInRyeUxvYyIsImNhdGNoTG9jIiwiZmluYWxseUxvYyIsImFmdGVyTG9jIiwidHJ5RW50cmllcyIsInB1c2giLCJyZXNldFRyeUVudHJ5IiwiY29tcGxldGlvbiIsInJlc2V0IiwiaXRlcmFibGUiLCJpdGVyYXRvck1ldGhvZCIsImlzTmFOIiwibGVuZ3RoIiwiaSIsImRpc3BsYXlOYW1lIiwiaXNHZW5lcmF0b3JGdW5jdGlvbiIsImdlbkZ1biIsImN0b3IiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJtYXJrIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJhd3JhcCIsImFzeW5jIiwiUHJvbWlzZSIsIml0ZXIiLCJrZXlzIiwib2JqZWN0IiwicmV2ZXJzZSIsInBvcCIsInNraXBUZW1wUmVzZXQiLCJwcmV2IiwiY2hhckF0Iiwic2xpY2UiLCJzdG9wIiwicm9vdFJlY29yZCIsInJ2YWwiLCJleGNlcHRpb24iLCJoYW5kbGUiLCJsb2MiLCJjYXVnaHQiLCJoYXNDYXRjaCIsImhhc0ZpbmFsbHkiLCJmaW5hbGx5RW50cnkiLCJjb21wbGV0ZSIsImZpbmlzaCIsInRocm93biIsImRlbGVnYXRlWWllbGQiLCJyZWdlbmVyYXRvclJ1bnRpbWUiLCJhY2NpZGVudGFsU3RyaWN0TW9kZSIsImdsb2JhbFRoaXMiLCJGdW5jdGlvbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsIm8iLCJnZXQiLCJwcm9wIiwiX3R5cGVvZiIsIl9hcnJheUxpa2VUb0FycmF5IiwiYXJyIiwibGVuIiwiYXJyMiIsIkFycmF5IiwiX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5IiwibWluTGVuIiwidG9TdHJpbmciLCJmcm9tIiwidGVzdCIsIl9zbGljZWRUb0FycmF5IiwiaXNBcnJheSIsIl9pIiwiX3MiLCJfZSIsIl9hcnIiLCJfbiIsIl9kIiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiYXN5bmNHZW5lcmF0b3JTdGVwIiwiZ2VuIiwiX25leHQiLCJfdGhyb3ciLCJfYXN5bmNUb0dlbmVyYXRvciIsImFyZ3MiLCJhcmd1bWVudHMiLCJhcHBseSIsIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiZGVzY3JpcHRvciIsIl9jcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIkxPR19BUElfVVJMIiwiTU9CSUxFX01FRElBX1FVRVJZIiwiU0VTU0lPTl9TVE9SQUdFX0tFWVMiLCJMT0NBTF9TVE9SQUdFX0tFWVMiLCJMb2dnZXIiLCJvcmlnaW4iLCJERUJVRyIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJjb25zb2xlIiwibG9nIiwid2FybiIsImxvZ2dlciIsImNoZWNrRGF0YUxheWVyUnVsZSIsInJ1bGUiLCJKU09OIiwic3RyaW5naWZ5Iiwib3BlcmF0b3IiLCJjb25kaXRpb24iLCJydW50aW1lVmFsdWUiLCJkYXRhTGF5ZXJGaW5kZXIiLCJjb25kaXRpb25DaGVja2VyIiwiYmVhZ2xlSW5mb0xheWVyIiwiZGF0YVBvaW50cyIsImluY2x1ZGVzIiwiZGF0YUxheWVyIiwiY2hlY2tVcmxSdWxlIiwicmVxdWVzdFVSTCIsImxvY2F0aW9uIiwiaHJlZiIsInBhdGgiLCJkZWNvZGVVUklDb21wb25lbnQiLCJVUkwiLCJzZWFyY2giLCJyZXBsYWNlIiwicGF0aG5hbWUiLCJjcnlwdG8iLCJyYW5kb21VVUlERmFsbGJhY2siLCJyZW1vdmVEb2N1bWVudEhpZGUiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImZldGNoVHJlYXRtZW50cyIsImZldGNoIiwidHJlYXRtZW50cyIsImpzb24iLCJleHRyYWN0Q29va2llSWRlbnRpZmllciIsImNvb2tpZVN0cmluZyIsImNvb2tpZU5hbWUiLCJpZGVudGlmaWVyIiwic3BsaXQiLCJtYXAiLCJ2IiwicmVkdWNlIiwiYWNjIiwidHJpbSIsImRldGVybWluZVBjdCIsInN1YnN0cmluZ0VuZFBvc2l0aW9uIiwic3Vic3RyaW5nU3RhcnRQb3NpdGlvbiIsImVuY29kZWQiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsInN1YnRsZSIsImRpZ2VzdCIsImhhc2hCdWZmZXIiLCJoYXNoQXJyYXkiLCJVaW50OEFycmF5IiwiaGFzaFN0cmluZyIsImIiLCJwYWRTdGFydCIsImpvaW4iLCJoYXNoTnVtYmVyIiwicGFyc2VJbnQiLCJzdWJzdHJpbmciLCJleGl0U2Nyb2xsTGlzdGVuZXIiLCJjYWxsQmFjayIsImxhc3RTY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJleGl0U2Nyb2xsSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzdHlsZUFwcGxpY2F0b3IiLCJlbGVtZW50cyIsInN0eWxlQ2hhbmdlc01hcCIsImVsZW1lbnQiLCJlbnRyaWVzIiwic3R5bGUiLCJpbmplY3RTdHlsZVNoZWV0Iiwic3R5bGVTaGVldCIsImNyZWF0ZUVsZW1lbnQiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJwcmVwYXJlQWN0aW9ucyIsImFjdGlvbnNUb1ByZXBhcmUiLCJzdWJWYXJpYW50SWQiLCJhY3Rpb25zIiwicGFyc2UiLCJhY3Rpb24iLCJzdWJWYXJpYW50cyIsInN1YlZhcmlhbnQiLCJpZCIsInJ1blRpbWVWYWx1ZSIsIm1pbiIsIm1heCIsInJhbmRvbVVVSUQiLCJjIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY29tcGFyZU9iamVjdHMiLCJvYmoxIiwib2JqMiIsImtleXNBIiwia2V5c0IiLCJnZXRJZGVudGlmaWVyIiwiY29va2llIiwiZXh0cmFjdElkZW50aWZpZXJJbnRlcnZhbCIsInNldFRpbWVvdXQiLCJkZWxheSIsIm1zIiwicmVzIiwic2t1Q29sbGVjdG9yIiwiTkRfU0tVX0xJU1QiLCJza3VMaXN0IiwicXVlcnlTZWxlY3RvckFsbCIsImUiLCJnZXRBdHRyaWJ1dGUiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJxdWVyeVNlbGVjdG9yIiwicHJvZHVjdEluZm8iLCJQT1BVUF9ESVNQTEFZX0ZMQUciLCJ0cmFuc2Zvcm1lciIsInRyZWF0bWVudCIsImFwcGx5RXZlbnQiLCJjb250ZW50U2VsZWN0b3IiLCJzZWxlY3RvciIsInNlbGVjdG9yRmFsbGJhY2siLCJtZENvbmRpdGlvbiIsIm1vdmVfc2VsZWN0b3JfMSIsIm1vdmVfc2VsZWN0b3JfMiIsInJlcGxhY2VGbiIsIiQiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsInJlcGxhY2VGbkV4ZWN1dG9yIiwicmVwbGFjZUZ1bmN0aW9uIiwiYmluZCIsInJlcGxhY2VBbGwiLCJ2YWwiLCJjdXJyZW50UmVwbGFjZUZuIiwiU3RyaW5nIiwiYmVmb3JlIiwiYWZ0ZXIiLCJjcmVhdGVQb3B1cCIsIm1vYmlsZSIsImRpc3BsYXlQb3B1cCIsImFkZEV2ZW50TGlzdGVuZXIiLCJvbmNlIiwidGltZW91dCIsInRleHQiLCJodG1sIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm9yaWdpbmFsVGl0bGUiLCJ0aXRsZSIsImhhbmRsZURvY3VtZW50VGl0bGVUYWJDaGFuZ2UiLCJlbGVtZW50U2t1IiwiYXR0cmlidXRlIiwiY3NzIiwicHJvcGVydHkiLCJwcm9wZXJ0eVZhbHVlIiwibjEiLCJuMiIsInN3YXBOb2RlcyIsImFwcGVuZCIsInNvdXJjZSIsImRlc3RpbmF0aW9uIiwicHJlcGVuZCIsImV2ZW50IiwidGl0bGVzIiwicGFyc2VkVGl0bGVzIiwiaGlkZGVuIiwiaGFuZGxlUG9wdXBDbGljayIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJxUG9wdXAiLCJnZXRFbGVtZW50QnlJZCIsInBvcHVwV3JhcHBlciIsImFkZCIsInBvcHVwQ2xvc2VCdXR0b24iLCJpbm5lclRleHQiLCJvbmNsaWNrIiwiY29udGVudHMiLCJzaGlmdCIsInNyYyIsInRlbXBsYXRlIiwiaW5uZXJIVE1MIiwicG9wdXAiLCJjb250ZW50IiwiZmlyc3RDaGlsZCIsImJvZHkiLCJpMSIsImkyIiwicDEiLCJwYXJlbnROb2RlIiwicDIiLCJpc0VxdWFsTm9kZSIsImNoaWxkcmVuIiwiaW5zZXJ0QmVmb3JlIiwidHJlYXRtZW50QXBwbGljYXRvciIsInRyZWF0bWVudExpc3QiLCJqUXVlcnkiLCJtZXNzYWdlIiwiYXBwbHlUcmVhdG1lbnRzIiwiY2hlY2twb2ludHMiLCJCZWFnbGVMb2FkZWQiLCJJbml0aWFsaXplZCIsIlVzZXJPbk9mZiIsIlNjcmlwdFRpbWVPdXQiLCJUcmVhdG1lbnRSZXBvc2l0b3J5Q3JlYXRlZCIsIlRyZWF0bWVudHNBcHBsaWVkIiwiUmVhcHBseVRyZWF0bWVudExpc3RlbmVycyIsIlRpbWVvdXRUaHJlc2hvbGRSZWFjaGVkIiwiY2hlY2twb2ludCIsImZpbmQiLCJ0aW1lIiwiRGF0ZSIsIm5vdyIsIl9kZWZpbmVQcm9wZXJ0eSIsIk1vbml0b3IiLCJkZWJ1Z01vZGUiLCJzZXNzaW9uSWQiLCJhcHBsaWVkVHJlYXRtZW50SWRzIiwiZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cyIsImxhdGVzdENoYW5nZXMiLCJlbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzIiwidmlld0lkIiwiaGVhZGVycyIsImlzTG9nZ2VkIiwiaW5pdGlhbGl6ZUV4aXRFdmVudExpc3RlbmVyIiwiaXNPbiIsImVtcHR5IiwicmVhZHlTdGF0ZSIsImhhbmRsZVF1ZXVlTG9ncyIsInBhY2thZ2VMb2dEYXRhIiwicmVxdWVzdEJsb2IiLCJxdWV1ZUxvZ3MiLCJjaGFuZ2VzIiwiY29tcGFyZVRvIiwibSIsInByZXBhcmVMb2dCb2R5IiwidklkIiwiZGJtIiwiQmxvYiIsInQiLCJjdXJyZW50VVJMIiwicGxhdGZvcm0iLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnREYXRhIiwidXNlckFnZW50IiwiZ2FPYmplY3RzIiwiZ2FETEVsZW1lbnQiLCJ2aXNpbGFic2NrIiwidmxPYmplY3RzIiwiSXRlbXMiLCJ2bEVsZW1lbnQiLCJLIiwiViIsIm5kRGF0YSIsImNvb2tpZVZMUFZpblZpc2l0IiwiVkxfUFZDb3VudEluVmlzaXQiLCJjb29raWVWTFZpc2l0RHVyYXRpb24iLCJWTF9Ub3RhbER1cmF0aW9uIiwiY29va2llVkxUb3RhbFBWIiwiVkxfVG90YWxQViIsImNvb2tpZVZMVG90YWxWaXNpdCIsIlZMX1RvdGFsVmlzaXQiLCJnYVBhZ2VUeXBlIiwiUGFnZVR5cGUiLCJnYVByb2R1Y3ROYW1lIiwiY29udGVudF9uYW1lIiwiZ2FWaWV3VHlwZSIsImNvbnRlbnRfdHlwZSIsImdhUHJvZHVjdENhdGVnb3J5IiwiY29udGVudF9jYXRlZ29yeSIsImdhUHJvZHVjdElEIiwiY29udGVudF9pZHMiLCJ2dnNQcm9kdWN0Q2F0ZWdvcnkiLCJ2aXZlbnNlX2NhdGVnb3J5IiwiZ2FMaXN0aW5nTmFtZSIsImVjb21tZXJjZSIsImRldGFpbCIsImFjdGlvbkZpZWxkIiwibGlzdCIsInZ2c0lzU2hvd3Jvb20iLCJpc0FkbWluIiwidnZzUHJvZHVjdEdyb3VwIiwicHJvZHVjdEdyb3VwIiwidnZzVXNlcklkIiwidXNlcklkIiwidnZzQ2F0ZWdvcnkiLCJnYUNhdGVnb3J5UHJvZHVjdENvbnQiLCJjYXRlZ29yeV9wcm9kdWN0X2NvdW50IiwiZ2FDYXJ0UHJvZHVjdHMiLCJjaGVja291dCIsInByb2R1Y3RzIiwicHVyY2hhc2UiLCJ2dnNQRFBQcm9kdWN0Iiwidml2ZW5zZVByb2R1Y3RzIiwiZ2FQdXJjaGFzZUlkIiwiZ2FQdXJjaGFzZVJldmVudWUiLCJyZXZlbnVlIiwiZ2FQdXJjaGFzZVBheVR5cGUiLCJkaW1lbnNpb24xNSIsIndpbmRvd1BhcmFtcyIsIndpbmRvd1BSYXRpbyIsImRldmljZVBpeGVsUmF0aW8iLCJ3aW5kb3dJbm5lciIsImlubmVyV2lkdGgiLCJ3aW5kb3dTY3JlZW4iLCJhdmFpbEhlaWdodCIsInNjcmVlbiIsImF2YWlsTGVmdCIsImF2YWlsVG9wIiwiYXZhaWxXaWR0aCIsImNvbG9yRGVwdGgiLCJoZWlnaHQiLCJwaXhlbERlcHRoIiwid2lkdGgiLCJ3aW5kb3dWUG9ydCIsInZpc3VhbFZpZXdwb3J0Iiwib2Zmc2V0TGVmdCIsIm9mZnNldFRvcCIsIm9ucmVzaXplIiwib25zY3JvbGwiLCJwYWdlTGVmdCIsInBhZ2VUb3AiLCJzY2FsZSIsIk1hdGgiLCJyb3VuZCIsImFicyIsIm9yaWVudGF0aW9uIiwidGVtcCIsIm5hdkhpc3RTaXplIiwiaGlzdG9yeSIsIm5hdkFnZW50IiwiYnJhbmRzIiwiYnJhbmQiLCJ2ZXJzaW9uIiwibmF2SFdDb3JlcyIsImhhcmR3YXJlQ29uY3VycmVuY3kiLCJuYXZMYW5ndWFnZSIsImxhbmd1YWdlIiwiYnJvd3Nlckxhbmd1YWdlIiwic3lzdGVtTGFuZ3VhZ2UiLCJ1c2VyTGFuZ3VhZ2UiLCJuYXZUb3VjaCIsIm1heFRvdWNoUG9pbnRzIiwibmF2UGxhdGZvcm0iLCJuYXZWZW5kb3IiLCJ2ZW5kb3IiLCJjb29raWVHYUlkIiwiY29va2llTGFzdEJyZWFkQ3J1bWIiLCJjb29raWVMYXN0Q2F0ZWdvcnkiLCJjb29raWVGaXJzdEVudHJ5IiwicGVyZk1ldHJpY3MiLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJwZXJmTmF2aWdhdGlvbk1ldHJpY3MiLCJwbGQiLCJkb21Db250ZW50TG9hZGVkRXZlbnRFbmQiLCJjb25uZWN0U3RhcnQiLCJuZXQiLCJjb25uZWN0RW5kIiwiZmV0Y2hTdGFydCIsInNydiIsInJlc3BvbnNlU3RhcnQiLCJyZXF1ZXN0U3RhcnQiLCJ0ZnIiLCJyZXNwb25zZUVuZCIsImRtaSIsImRvbUludGVyYWN0aXZlIiwiZGNwIiwiZG9tQ29tcGxldGUiLCJvbmwiLCJsb2FkRXZlbnRFbmQiLCJsb2FkRXZlbnRTdGFydCIsInNUYWciLCJjbnRudCIsInRleHRDb250ZW50IiwianNvbmNvbnRlbnQiLCJiY3J1bWJfc3RyaW5nIiwic29yZ0JyZWFkY3J1bWIiLCJzb3JnUHJvZHVjdCIsInNvcmdMaXN0aW5nIiwiY291bnRJdGVtcyIsInNrdSIsInByaWNlIiwicHJpY2VDdXJyZW5jeSIsInByaWNlVmFsaWRVbnRpbCIsInNlbGVjdGVkRWxlbWVudCIsInNjcmlwdFRhZ3MiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInJlZ2V4cExpc3QiLCJmb3VuZCIsInNjcmFwZUVsdCIsInJlZ2V4cCIsIlJlZ0V4cCIsImV4ZWMiLCJzciIsImRvbnR0cmFjayIsImRvTm90VHJhY2siLCJtc0RvTm90VHJhY2siLCJ1IiwiaG9zdG5hbWUiLCJyIiwicmVmZXJyZXIiLCJ2dnNDbnRGYXZQcm9kcyIsImZhdm9yaXRlUHJvZHVjdHMiLCJ2dnNIYXNTZXRFbWFpbCIsInVzZXJFbWFpbCIsInZ2c0xvZ2luVHlwZSIsInZ2c1B1cmNQcmljZUVsdCIsInZ2c1B1cmNoYXNlT3JkZXJJRCIsInZ2c1B1cmNUeXBlRWx0IiwidnZzVmlld0NydW1iIiwidnZzQ2FydFRvdGFsIiwidnZzVmlld0Jhc2tldFRvdGFsIiwidnZzVmlld0Jhc2tldENvdW50IiwidnZzVmlld0xvZ2dlZGluIiwidnZzUERQU2hvd3Jvb21Db3VudCIsInZ2c1BEUERlbGl2ZXJ5RGF0ZSIsInZ2c1BEUFRpdGxlIiwidnZzUExQSXRlbUNvdW50IiwidnZzUExQTmFtZSIsImlzRXhpdEV2ZW50Q2FwdHVyZWQiLCJsb2dEYXRhIiwicGFja2FnZVVwZGF0ZUxvZ0RhdGEiLCJjYXB0dXJlIiwicXVldWVkIiwic2VuZEJlYWNvbiIsInF1ZXVlSW50ZXJ2YWwiLCJUcmVhdG1lbnRSZXBvc2l0b3J5IiwiY29va2llUGN0IiwidXNlclNlZ21lbnQiLCJnZXRVc2VyU2VnbWVudCIsInNlZ21lbnRNYXRjaGVkVHJlYXRtZW50cyIsImZpbHRlciIsImFwcGx5X29uX3VzZXJfc2VnbWVudCIsIlRSRUFUTUVOVFMiLCJ0cmVhdG1lbnRzT2JqIiwidGltZXN0YW1wIiwidHJlYXRtZW50V2l0aFRpbWVzdGFtcCIsImNoZWNrQ291bnRlclJ1bGUiLCJwYWdlVmlld0hhbmRsZXIiLCJjYUJhc2tldFByaWNlSGFuZGxlciIsImdldENvdW50ZXIiLCJjb3VudGVyIiwicGFnZVZpZXdzIiwiY2FCYXNrZXRQcmljZSIsImNoZWNrRWxlbWVudFJ1bGUiLCJzZWxlY3RvckFsbCIsIm1haW5TZWxlY3RvciIsInRlbXBWYWwiLCJyZXR1cm5WYWwiLCJlbGVtIiwiY2hlY2tGdW5jdGlvblJ1bGUiLCJvcHRzIiwiYmluZGluZ3MiLCJydWxlRnVuY3Rpb24iLCJjaGVja1Nlc3Npb25SdWxlIiwiZHVyYXRpb25IYW5kbGVyIiwiaGlzdG9yeUhhbmRsZXIiLCJkdXJhdGlvbiIsImdldFNlc3Npb25UaW1lc3RhbXAiLCJjdXJyZW50SGlzdG9yeSIsImNoZWNrRW52UnVsZSIsImlzTW9iaWxlIiwiY2hlY2tSYW5kb21OdW1iZXJSdWxlIiwic2FsdCIsInJhbmRvbVBjdCIsIlJ1bGVFbmdpbmUiLCJiYXNlUnVsZVNldCIsInN1YlZhcmlhbnRSdWxlU2V0IiwiY2FsbGJhY2siLCJjaGVja1J1bGUiLCJjaGFpbiIsImNoYWluX2NvbmRpdGlvbiIsInJ1bGVTYXRpc2ZpZWQiLCJwcm9kdWN0SW5mb0xvb2t1cCIsIkhlYWRlcnMiLCJtb2RlIiwib2siLCJwYXJzaW5nUmVnZXgiLCJpbml0aWFsaXplQmVhZ2xlSW5mb0xheWVyIiwic2NyaXB0cyIsInNjcmlwdFRleHRDb250ZW50IiwiZm91bmRWYWwiLCJtb25pdG9yIiwiVElNRU9VVF9DT1VOVCIsInRpbWVvdXRDb3VudGVyIiwicHJvZHVjdEluZm9Qcm9taXNlIiwiTkRfREVCVUdfTU9ERSIsInF1ZXJ5U3RyaW5nIiwicmVtb3ZlSXRlbSIsInNlYXJjaFBhcmFtcyIsImRlYnVnRmlsdGVyZWRUcmVhdG1lbnRzIiwiaW5kZXhPZiIsImxhc3RJbmRleE9mIiwiaXRlbSIsImNvbnRhaW5zIiwiR0xPVl9PTiIsIlBBR0VfVklFV1MiLCJTRVNTSU9OX0lEIiwiU0VTU0lPTl9USU1FU1RBTVAiLCJTRVNTSU9OX0hJU1RPUlkiLCJwb3B1cERpc3BsYXlGbGFnIiwic2Vzc2lvblRpbWVzdGFtcCIsInNlc3Npb25IaXN0b3J5IiwidHJlYXRtZW50c1Byb21pc2UiLCJPQlNFUlZFUl9DT05GSUciLCJzdWJ0cmVlIiwiY2hpbGRMaXN0IiwiYXR0cmlidXRlcyIsImVuZ2FnZVRyZWF0bWVudCIsImRldmljZSIsImRlcGVuZGFudF9vbl90cmVhdG1lbnQiLCJyZWFwcGx5X2V2ZW50Iiwid2VpZ2h0IiwicmVhcHBseV9ldmVudF9hcnJheSIsInJlYXBwbHlFdmVudCIsInByZXZpb3VzVmFsdWUiLCJyZUFwcGx5VHJlYXRtZW50c01hcCIsInJ1bGVFbmdpbmUiLCJjaGVja1J1bGVzIiwidHJlYXRtZW50U2tpcFJhdGlvIiwiZGVwZW5kYW50T25UcmVhdG1lbnRXZWlnaHQiLCJtYXRjaGVkVHJlYXRtZW50cyIsImRldGVybWluaW5nSWRlbnRpZmllciIsInRyZWF0bWVudFBjdCIsInByZXBhcmVkIiwiY2hlY2tTdWJWYXJpYW50UnVsZXMiLCJjb2xsZWN0Q0FCYXNrZXRQcmljZSIsIkNPVVBPTl9BUFBMSUNBQkxFX0JBU0tFVF9QUklDRSIsInByaWNlRWxlbWVudHMiLCJjb3Vwb25BcHBsaWNhYmxlVG90YWxQcmljZSIsIm9ic2VydmVyIiwiTXV0YXRpb25PYnNlcnZlciIsImJhc2tldENoZWNrb3V0Rm9ybSIsIm9ic2VydmUiLCJhbGwiLCJ0cmVhdG1lbnRSZXBvc2l0b3J5IiwiZ2V0TWF0Y2hlZFRyZWF0bWVudHMiLCJzZW5kTG9ncyIsInVwZGF0ZVRyZWF0bWVudHMiLCJ1cGRhdGVMYXRlc3RDaGFuZ2VzIiwidHJlYXRtZW50SWRzIiwicmVBcHBseVRyZWF0bWVudHMiLCJSZXNpemVPYnNlcnZlciIsInJlYXBwbHlfc2VsZWN0b3IiLCJvbnBvcHN0YXRlIl0sInNvdXJjZVJvb3QiOiIifQ==
