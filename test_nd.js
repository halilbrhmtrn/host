!function(){var e={757:function(e,t,n){e.exports=n(666)},666:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),i=new L(r||[]);return a._invoke=function(e,t,n){var r=f;return function(o,a){if(r===p)throw new Error("Generator is already running");if(r===g){if("throw"===o)throw a;return _()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=u(e,t,n);if("normal"===s.type){if(r=n.done?g:d,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=g,n.method="throw",n.arg=s.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f="suspendedStart",d="suspendedYield",p="executing",g="completed",h={};function m(){}function v(){}function y(){}var w={};s(w,a,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(N([])));k&&k!==n&&r.call(k,a)&&(w=k);var S=y.prototype=m.prototype=Object.create(w);function x(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function n(o,a,i,c){var s=u(e[o],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(s.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function C(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,C(e,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:_}}function _(){return{value:t,done:!0}}return v.prototype=y,s(S,"constructor",y),s(y,"constructor",v),v.displayName=s(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,c,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},x(I.prototype),s(I.prototype,i,(function(){return this})),e.AsyncIterator=I,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new I(l(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},x(S),s(S,c,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(E),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return c.type="throw",c.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),E(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),h}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function o(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function c(e){a(i,r,o,c,s,"next",e)}function s(e){a(i,r,o,c,s,"throw",e)}c(void 0)}))}}var c=n(757),s=n.n(c);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||r(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var u=window.location.href.includes("staging.vivense")?"https://ndvivense.glov.ai/treatments_staging.json":"https://host-b96.pages.dev/treatments.json",f="https://europe-west3-nextday-34eb3.cloudfunctions.net/api/logResponse",d="(max-width: 440px)",p=90,g="__nextday_session_id",h="ND_PageViews",m="ND_SessionTimestamp",v="ND_PopupDisplayFlag",y="ND_CABasketPrice",w="ND_Debug";function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var x=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Nextday Client SDK";b(this,e),this.origin=t,this.DEBUG=!0}return S(e,[{key:"info",value:function(){for(var e,t=this.origin,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).info.apply(e,["[".concat(t,"]")].concat(r))}},{key:"log",value:function(){var e=this.DEBUG,t=this.origin;if(e){for(var n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];(n=console).log.apply(n,["[".concat(t,"]")].concat(o))}}},{key:"error",value:function(){for(var e,t=this.origin,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(e=console).error.apply(e,["[".concat(t,"]")].concat(r))}}]),e}(),I=x;function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=new I("Nextday Utils");"randomUUID"in crypto||D();var L=function(){document.documentElement.classList.remove("nextDay-hide")},N=function(){var e=i(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.log("Fetching treatments"),e.next=3,fetch(u);case 3:return t=e.sent,e.next=6,t.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(e,t){if(!e)return null;var n=e.split(";").map((function(e){return e.split("=")})).reduce((function(e,t){return t[0]&&t[1]&&(e[decodeURIComponent(t[0].trim())]=decodeURIComponent(t[1].trim())),e}),{})[t];return n?("_ga"===t&&(n=n.split(".")[2]),n):null},O=function(){var e=i(s().mark((function e(t){var n,r,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",-1);case 2:return n=(new TextEncoder).encode(t),e.next=5,crypto.subtle.digest("SHA-1",n);case 5:return r=e.sent,o=Array.from(new Uint8Array(r)),a=o.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),i=parseInt(a.substring(0,8),16),e.abrupt("return",i%100);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=document.documentElement.scrollTop,n=setInterval((function(){var r=document.documentElement.scrollTop;t-400>r?(clearInterval(n),e()):t=r}),500)},j=function(e,t){E.log("Applying style changes",t,"to elements",e);for(var n=0;n<e.length;n++)for(var r=e[n],o=0,a=Object.entries(t);o<a.length;o++){var i=l(a[o],2),c=i[0],s=i[1];r.style[c]=s}},R=function(){var e=i(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.href="https://host-b96.pages.dev/nd-styles.css",document.head.appendChild(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e,t){var n,r=JSON.parse(JSON.stringify(e)),o=C(r);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=a.subVariants;if(i){var c,s=C(i);try{for(s.s();!(c=s.n()).done;){var l=c.value;if(l.id===t){for(var u in l)"id"!==u&&(a[u]=l[u]);return r}}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){o.e(e)}finally{o.f()}return r},P=function(e,t,n){if("notExist"===t)return e?(E.log("conditionChecker: -not satisfied- target does exist"),!1):(E.log("conditionChecker: -satisfied- target does not exist"),!0);if(null==e||null==t)return E.log("conditionChecker: runTimeValue or condition is not defined"),!1;switch(t){case"exist":return e?(E.log("conditionChecker: -satisfied- target does exist"),!0):(E.log("conditionChecker: -not satisfied- target does not exist"),!1);case"contains":return e.includes(n)?(E.log("conditionChecker: -satisfied- target contains value"),!0):(E.log("conditionChecker: -not satisfied- target does not contain value"),!1);case"notContains":return e.includes(n)?(E.log("conditionChecker: -not satisfied- target contains value"),!1):(E.log("conditionChecker: -satisfied- target does not contain value"),!0);case"equal":return e===n?(E.log("conditionChecker: -satisfied- target equals value"),!0):(E.log("conditionChecker: -not satisfied- target does not equal value"),!1);case"notEqual":return e!==n?(E.log("conditionChecker: -satisfied- target does not equal value"),!0):(E.log("conditionChecker: -not satisfied- target equals value"),!1);case"greaterThan":return e>n?(E.log("conditionChecker: -satisfied- target is greater than value"),!0):(E.log("conditionChecker: -not satisfied- target is not greater than value"),!1);case"lessThan":return e<n?(E.log("conditionChecker: -satisfied- target is less than value"),!0):(E.log("conditionChecker: -not satisfied- target is not less than value"),!1);case"greaterEquals":return e>=n?(E.log("conditionChecker: -satisfied- target is greater or equal than value"),!0):(E.log("conditionChecker: -not satisfied- target is not greater or equal than value"),!1);case"lessEquals":return e<=n?(E.log("conditionChecker: -satisfied- target is less or equal than value"),!0):(E.log("conditionChecker: -not satisfied- target is not less or equal than value"),!1);case"between":var r=l(n.split(","),2),o=r[0],a=r[1];return o=parseInt(o),a=parseInt(a),e>=o&&e<=a?(E.log("conditionChecker: -satisfied- target is between min and max"),!0):(E.log("conditionChecker: -not satisfied- target is not between min and max"),!1);default:return E.log("conditionChecker: condition is not defined ",t),!1}},D=function(){crypto.randomUUID=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))}},U=function t(n,r){if(n===r)return!0;if("object"!==e(n)||"object"!==e(r)||null==n||null==r)return!1;var o=Object.keys(n),a=Object.keys(r);if(o.length!==a.length)return!1;var i=!0;return o.forEach((function(e){a.includes(e)||(i=!1),"function"!=typeof n[e]&&"function"!=typeof r[e]||n[e].toString()!==r[e].toString()&&(i=!1),t(n[e],r[e])||(i=!1)})),i},M=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F=new I("Nextday DataLayer Checker"),B=function(e){F.log("Searching dataLayer for key",e);var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(window.dataLayer);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Object.keys(r).includes(e))return F.log("Found key ".concat(e," with value ").concat(r[e])),r[e]}}catch(e){n.e(e)}finally{n.f()}return F.log("Key ".concat(e," not found in dataLayer")),null};function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(){return z=i(s().mark((function e(t){var n,r,o,a,c,l,u,f,p=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.length>1&&void 0!==p[1]&&p[1],n=new I("Nextday Apply Treatments"),r=v,o=function(e){n.log("Applying treatment: ",JSON.stringify(e));var t=e.operator,o=e.type,i=e.applyEvent,c=e.contentSelector,s=e.selector,p=e.selectorFallback,g=e.mdCondition,h=e.move_selector_1,m=e.move_selector_2,v=e.replaceFn,y=e.value,w=$(s);if(!g||window.matchMedia(g).matches)if(h&&!m||m&&!h)n.log("Both move selectors are required");else{if(h&&m){if(!$(h).length)return void n.log("Move selector 1 not found: ",h);if(!$(m).length)return void n.log("Move selector 2 not found: ",m)}else{if(!s)return void n.log("Selector not specified");if(!w.length&&"no-selector"!==s&&(n.log("Selector not found: ",s),n.log("Trying fallback selector: ",p),p&&(w=$(p)),!w.length))return void n.log("Fallback selector not found")}var b=function(e,t){if(e&&t.includes("{{REPLACE}}")){n.log("Executing replace function: ",e);var r={dataLayerFinder:B},o=Function(e).bind(r);t=t.replaceAll("{{REPLACE}}",o())}return t};if(Array.isArray(y)?y.forEach((function(e,t){var n=v?v[t]||v:"";y[t]=b(n,e)})):y=b(v,y),"remove"===t)w&&(n.log("Removing: ",s),w.remove()),n.log("Cannot found element with selector: ",s);else if("insert"===t)switch(o){case"before":n.log("Inserting before: ",y),String(y).includes("nd-add-to-win")&&$(".nd-add-to-win").remove(),w.before(y);break;case"after":n.log("Inserting after: ",y),w.after(y);break;case"popup":if(0!==parseInt(sessionStorage.getItem(r))){n.log("Popup already displayed in session");break}if(n.log("Creating Popup: ",y),u(y,c),i){var k,S=window.matchMedia(d).matches,x=V(i);try{for(x.s();!(k=x.n()).done;)switch(k.value){case"exitIntent":n.log("Adding exit intent listener"),S?T(l):document.documentElement.addEventListener("mouseleave",l,{once:!0});break;case"copyIntent":n.log("Adding copy intent listener"),document.documentElement.addEventListener("copy",l,{once:!0})}}catch(e){x.e(e)}finally{x.f()}}else setTimeout((function(){l()}),timeout)}else if("edit"===t)switch(o){case"text":n.log("Editing text: ",y),document.querySelector(s).textContent=y;break;case"styleApplicator":n.log("Applying style: ",y);var I=document.querySelectorAll(s),C=JSON.parse(y);n.log("Style Changes Map: ",C),j(I,C);break;case"addClass":n.log("addding class to ".concat(w," named ").concat(y)),w.addClass(y);break;case"removeClass":n.log("remove class from ".concat(w," named ").concat(y)),w.removeClass(y);break;case"documentTitle":if(n.log("changing document title from ".concat(w," to ").concat(y)),i){var A,E=V(i);try{for(E.s();!(A=E.n()).done;)"tabChange"==A.value&&(n.log("catching event tabchange.."),document.addEventListener("visibilitychange",(function(e){return a(e,y)})))}catch(e){E.e(e)}finally{E.f()}}}else if("setattribute"===t)switch(n.log("Setting attribute: ",attribute,y),attribute){case"src":w.css("content","url(".concat(y.trim(),")"));break;case"style":var L=y.split(":")[0].trim(),N=y.split(":")[1].trim();w.css(L,N,"!important")}else if("replace"===t)n.log("Replacing: ",y),w.replaceAll(y);else if("swap"===t){n.log("Swapping: ",h,m);var _=document.querySelector(h),O=document.querySelector(m);f(_,O)}else if("injectscript"===t)n.log("Injecting script: ",y),w.append("<script>".concat(y,"<\/script>"));else if("move"===t){n.log("Moving ".concat(h," to ").concat(m));var R=document.querySelector(h),q=document.querySelector(m);R.remove(),q.prepend(R)}else"noop"===t?n.log("Noop Operator: No operation is applied on target "):n.log("No such operator exists yet",t)}else n.log("Media condition mismatch: ",g)},a=function(){var e=i(s().mark((function e(t,n){var r,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=document.title,o=Array.isArray(n)?n:[n],i=0;case 3:if(!(i<o.length)){e.next=17;break}if(!document.hidden){e.next=13;break}return document.title=o[i],e.next=8,M(3e3);case 8:return document.title=r,e.next=11,M(3e3);case 11:e.next=14;break;case 13:document.title=r;case 14:i++,e.next=3;break;case 17:if(document.hidden){e.next=22;break}return document.title=r,e.abrupt("return");case 22:a(t,n);case 23:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=function e(t){var n=t.target.id;n&&"nd-popup__wrapper"===n&&($("#nd-popup__wrapper").remove(),window.removeEventListener("click",e,!0))},l=function e(){sessionStorage.setItem(r,1);var t=document.querySelector("#grt-shadow-host");t&&(t.style.display="none"),document.getElementById("nd-popup__wrapper").style.display="block",window.addEventListener("click",c,!0),document.documentElement.removeEventListener("mouseleave",e,{once:!0}),document.documentElement.removeEventListener("copy",e,{once:!0}),setTimeout((function(){$("#nd-popup__wrapper").remove(),window.removeEventListener("click",c,!0)}),15e3)},u=function(e,t){var n=document.createElement("div");n.classList.add("nd-popup__wrapper"),n.id="nd-popup__wrapper";var r=document.createElement("button");if(r.classList.add("nd-popup__button-close"),r.innerText="X",r.onclick=function(){$("#nd-popup__wrapper").remove(),window.removeEventListener("click",c,!0)},t)for(var o=Array.from(document.querySelectorAll(t));e.includes("{{REPLACE}}")&&o.length>0;)e=e.replace("{{REPLACE}}",o.shift().src);var a=document.createElement("template");a.innerHTML=e.trim();var i=a.content.firstChild;i.appendChild(r),n.appendChild(i),$("#nd-popup__wrapper").remove(),document.body.appendChild(n)},f=function(e,t){var n,r,o=e.parentNode,a=t.parentNode;if(o&&a&&!o.isEqualNode(t)&&!a.isEqualNode(e)){for(var i=0;i<o.children.length;i++)o.children[i].isEqualNode(e)&&(n=i);for(var c=0;c<a.children.length;c++)a.children[c].isEqualNode(t)&&(r=c);o.isEqualNode(a)&&n<r&&r++,o.insertBefore(t,o.children[n]),a.insertBefore(e,a.children[r])}},function e(t){if(window.jQuery){var r,a=V(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;try{o(i)}catch(e){n.log("Couldn't apply treatment ".concat(i.id," with error ").concat(e.message));continue}}}catch(e){a.e(e)}finally{a.f()}}else setTimeout((function(){e(t)}),10)}(t);case 12:case"end":return e.stop()}}),e)}))),z.apply(this,arguments)}var Y=function(e){return z.apply(this,arguments)},H=function(){function e(t,n){b(this,e),this.logger=new I("Nextday Monitor"),this.logger.log("Initializing monitor"),this.appliedTreatmentIds=JSON.parse(JSON.stringify(t)),this.eligibleNotAppliedTreatments=JSON.parse(JSON.stringify(n)),this.latestChanges=null,this.eligibleNotAppliedChanges=null,this.sessionId=sessionStorage.getItem(g),this.viewId=crypto.randomUUID(),this.headers={type:"application/json"},this.logger.log("Initializing with session id: "+this.sessionId),this.initializeExitEventListener(),this.debugMode=window.localStorage.getItem(w)?"on":"off"}var t,n;return S(e,[{key:"sendLogs",value:(n=i(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this.logger.log("Sending logs"),n=!1,setTimeout((function(){n=!0}),1e3);!n;)n=navigator.sendBeacon(f,this.packageLogData(t));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"updateLatestChanges",value:function(e,t){var n=this.appliedTreatmentIds,r=this.eligibleNotAppliedTreatments,o=this.logger;o.log("Updating latest changes");var a=this.latestChanges||n;U(a,e)||(o.log("Changes detected"),o.log("Changes: ",e),this.latestChanges=e),a=this.eligibleNotAppliedChanges||r,U(a,t)||(o.log("Changes detected"),o.log("Changes: ",e),this.eligibleNotAppliedChanges=t)}},{key:"packageLogData",value:function(e){var t=this.appliedTreatmentIds,n=this.eligibleNotAppliedTreatments,r=this.debugMode,o=this.headers,a=this.sessionId,i=this.viewId,c=Object.keys(t).length?"Treatments applied":"No treatments applied",s=new URL(window.location.href),l={n:"nextday-session_id-".concat(a),u:s.href,d:s.hostname,r:document.referrer,w:window.innerWidth,c:document.cookie,wdl:window.dataLayer?JSON.parse(JSON.stringify(window.dataLayer)):[],t:Date.now(),v:"0.0.22",a:t,e:n,vId:i,sr:p,m:c,dbm:r,isOn:e};return new Blob([JSON.stringify(l)],o)}},{key:"packageUpdateLogData",value:function(){var e=this.headers,t=this.eligibleNotAppliedChanges,n=this.latestChanges,r=this.viewId;if(!n)return!1;var o={t:Date.now(),a:n,e:t,vId:r};return new Blob([JSON.stringify(o)],e)}},{key:"initializeExitEventListener",value:function(){var e=this,t=this.logger;t.log("Initializing exit event listener"),window.addEventListener("pagehide",(function(){t.log("In pagehide event");var n=e.packageUpdateLogData();if(n){for(var r=!1;!r;)r=navigator.sendBeacon(f,n);t.log("Logs queued successfully")}else t.log("No changes to log")}),{capture:!0})}}],[{key:"sendEmptyLog",value:(t=i(s().mark((function e(t,n){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(console.log("Nextday Monitor: Sending empty logs"),r=!1,setTimeout((function(){r=!0}),1e3);!r;)r=navigator.sendBeacon(f,this.packageEmptyLogData(t,n));case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"packageEmptyLogData",value:function(e,t){var n=new URL(window.location.href),r=window.localStorage.getItem(w)?"on":"off",o=sessionStorage.getItem(g),a={n:"nextday-session_id-".concat(o),u:n.href,d:n.hostname,r:document.referrer,w:window.innerWidth,c:document.cookie,wdl:window.dataLayer?JSON.parse(JSON.stringify(window.dataLayer)):[],t:Date.now(),v:"0.0.22",a:{},e:{},vId:null,sr:p,m:e,dbm:r,isOn:t};return new Blob([JSON.stringify(a)],{type:"application/json"})}}]),e}(),K=H,W=new I("Nextday Treatment Repository"),Q=function(){function e(t){b(this,e);var n=t.cookiePct,r=t.treatments;this.treatments=r,this.cookiePct=n}var t;return S(e,[{key:"getMatchedTreatments",value:function(){var e=this.getUserSegment(),t=this.treatments.filter((function(t){return t.apply_on_user_segment==e||"*"===t.apply_on_user_segment}));return W.log("".concat(t.length," treatments segment matched")),t.length?t:[]}},{key:"getUserSegment",value:function(){if(-1===this.cookiePct)throw W.info("New user has no segment"),new Error("New User");return this.cookiePct<50?"A":"B"}}],[{key:"getTreatments",value:(t=i(s().mark((function e(){var t,n,r,o,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W.log("Loading treatments"),t="ND_Treatments",n=JSON.parse(localStorage.getItem(t)),r=null==n?void 0:n.treatments,o=null==n?void 0:n.timestamp,r&&o){e.next=13;break}return W.log("Treatments not found in local storage"),e.next=9,N();case 9:return r=e.sent,a={timestamp:Date.now(),treatments:r},localStorage.setItem(t,JSON.stringify(a)),e.abrupt("return",r);case 13:if(!o){e.next=23;break}if(!((Date.now()-o)/864e5>1)){e.next=23;break}return W.log("Treatments are expired"),e.next=19,N();case 19:return r=e.sent,i={timestamp:Date.now(),treatments:r},localStorage.setItem(t,JSON.stringify(i)),e.abrupt("return",r);case 23:return W.log("Treatments are loaded from local storage"),e.abrupt("return",r);case 25:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})}]),e}(),X=Q,Z=new I("Nextday Counter Checker"),ee=function(e,t){try{switch(t){case"session":return sessionStorage.getItem(e);case"local":return localStorage.getItem(e);default:return Z.log("No such type",t),null}}catch(t){return Z.log("Could not get counter ".concat(e),t),null}},te=new I("Nextday Element Checker"),ne=new I("Nextday Function Checker"),re=new I("Nextday Session Checker"),oe=new I("Nextday Url Checker");function ae(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=new I("Nextday Rule Engine"),se=function(){function e(t){b(this,e);var n=t.baseRuleSet,r=t.subVariantRuleSet,o=t.callback,a=void 0===o?null:o;this.baseRuleSet=n,this.subVariantRuleSet=r,this.callback=a}return S(e,[{key:"checkRules",value:function(){var e,t=ae(this.baseRuleSet);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(!this.checkRule(n))return!1}}catch(e){t.e(e)}finally{t.f()}return!0}},{key:"checkSubVariantRules",value:function(){var e,t=ae(this.subVariantRuleSet);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(this.checkRule(n))return n.subVariantId}}catch(e){t.e(e)}finally{t.f()}return!1}},{key:"checkRule",value:function(e){var t=e.chain,n=e.chain_condition,r=e.type,o=null;switch(r){case"session":o=function(e){re.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;return"duration"===t?function(e,t){var n=(Date.now()-function(){try{return new Date(parseInt(sessionStorage.getItem(m)))}catch(e){return re.log("Could not get session timestamp",e),Date.now()}}())/1e3;return P(n,e,parseInt(t))}(n,r):null}(e);break;case"counter":o=function(e){Z.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;switch(t){case"pageView":return function(e,t){var n=parseInt(ee(h,"session"));return Z.log("Page views counter value: ",n),null===n?(Z.log("Pageviews counter not found in session storage"),!1):P(n,e,parseInt(t))}(n,r);case"CABasketPrice":return function(e,t){var n=parseInt(ee(y,"local"));return Z.log("Coupon applicable basket price counter value: ",n),null===n?(Z.log("Coupon applicable basket price counter not found in local storage"),!1):P(n,e,parseInt(t))}(n,r);default:return Z.log("No such operator",t),!1}}(e);break;case"element":o=function(e){te.log("Checking rule",JSON.stringify(e));var t,n=e.operator,r=e.condition,o=e.value,a=e.selector,i=e.selectorAll,c=e.selectorFallback,s=void 0===c?null:c,l=a;if(l&&!document.querySelector(l)&&(l=s||l),null===n)return P(document.querySelector(l),r,o);if(l&&!document.querySelector(l))return te.log("Selector not found on page"),!1;if(i&&!document.querySelectorAll(i))return te.log("Selector not found on page"),!1;switch(l?t=document.querySelector(l):i&&(t=Array.from(document.querySelectorAll(i))),n){case"text-number":var u;u=Array.isArray(t)?t.reduce((function(e,t){return e+parseInt(t.textContent.replace("TL","").replace(".",""))}),0):parseInt(document.querySelector(l).textContent.replace("TL","").replace(".",""));var f=parseInt(u);return P(f,r,o);case"classList":return P(Array.from(t.classList),r,o);default:return te.log("Operator not defined"),!1}}(e);break;case"dataLayer":o=function(e){F.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value,o=B(t);return P(o,n,r)}(e);break;case"url":o=function(e){oe.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;if("path"===t){var o=window.location.href,a=o.includes("ajax/mobile-search/loadOtherPages.php")?decodeURIComponent(new URL(o).search.replace("?originalPath=","")):new URL(o).pathname;return oe.log("Checking path ".concat(a," matches rule path ").concat(r)),P(a,n,r)}}(e);break;case"function":o=function(e){ne.log("Checking rule",JSON.stringify(e));var t=e.operator,n=e.condition,r=e.value;if(!t)return ne.log("Rule function not defined"),!1;var o=Function(t)();return P(o,n,r)}(e);break;default:ce.log("No such rule type: ".concat(r))}if(t)switch(n){case"and":o=o&&this.checkRule(t);break;case"or":o=o||this.checkRule(t);break;case"xor":o=o!=this.checkRule(t);break;default:ce.log("No such chain condition")}return o}}]),e}();function le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}i(s().mark((function t(){var n,r,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,t.prev=1,t.delegateYield(s().mark((function e(){var t,r,a,c,l,u,f,b,k,S,x,C,A,E,N,T,j,P,D,U,M,J,F,B,V,$,G,z,H,W,Q,Z;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new I).info("Nextday initiated"),(r=window.location.search).includes("nd_debug=1")?window.localStorage.setItem(w,1):r.includes("nd_debug=0")&&window.localStorage.removeItem(w),a=_(document.cookie,"_ga"),t.log("Found cookie identifier: ",a),e.next=8,O(a);case 8:if(c=e.sent,window.localStorage.getItem(w)){e.next=18;break}if(!(c<p)){e.next=15;break}if(-1!==c){e.next=13;break}throw new Error("Could not parse cookie");case 13:throw n=!1,new Error("Control group: no treatments applied");case 15:n=!0,e.next=19;break;case 18:t.info("Debug mode on: all applicable treatments will be applied");case 19:if(document.documentElement.classList.contains("nextDay-hide")){e.next=21;break}throw new Error("Nextday script timed out");case 21:return R(),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,ee=h,te=v,ne=g,re=m,oe=sessionStorage.getItem(ee),ae=sessionStorage.getItem(te),ie=sessionStorage.getItem(ne),ce=sessionStorage.getItem(re),oe?sessionStorage.setItem(ee,parseInt(oe)+1):sessionStorage.setItem(ee,1),null===ae&&sessionStorage.setItem(te,0),ie||sessionStorage.setItem(ne,crypto.randomUUID()),ce||sessionStorage.setItem(re,Date.now()),setTimeout((function(){L()}),2e3),l=X.getTreatments(),u=window.matchMedia(d).matches,f={subtree:!0,childList:!0},b=function(){var e=i(s().mark((function e(n,r,o){var a,i,c,l,f,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.actions,i=n.baseRuleSet,c=n.device,l=n.subVariantRuleSet,"mobile"!==c||u){e.next=4;break}return t.log("Treatment device 'mobile' mismatch"),e.abrupt("return");case 4:if("desktop"!==c||!u){e.next=7;break}return t.log("Treatment device 'desktop' mismatch"),e.abrupt("return");case 7:if(f=new se({baseRuleSet:i,subVariantRuleSet:l}),t.log("Starting base rule set check for treatment: "+n.id),i&&!f.checkRules()){e.next=21;break}if(l){e.next=14;break}return Y(a),r[n.id]={subVariantId:null,actions:a},e.abrupt("return");case 14:return t.log("Starting sub variant rule set check for treatment: "+n.id),d=f.checkSubVariantRules(),p=a,d?(t.log("Applying sub variant with id: ",d),p=q(a,d)):t.log("Applying treatment with default values"),Y(p),r[n.id]={subVariantId:d,actions:p},e.abrupt("return");case 21:t.log("Rule check failed for treatment: ",n.id);case 22:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),(k=function(){var e=y;if(window.location.href.includes("/siparis-listesi.html")){var n=Array.from(document.querySelectorAll(".price"));if(n.push.apply(n,o(Array.from(document.querySelectorAll(".new-price")))),!n.length)return t.log("Price elements not found"),void window.localStorage.setItem(e,0);t.log("Price elements: ",n);var r=n.reduce((function(e,t){return e+parseInt(t.textContent.replace("TL","").replace(".",""))}),0);t.log("Coupon applicable total price: ",r),r>=0&&window.localStorage.setItem(e,r)}else(window.location.href.includes("/siparis-ozeti.html")||null===window.localStorage.getItem(e))&&window.localStorage.setItem(e,0)})(),window.location.href.includes("/siparis-listesi.html")&&(S=new MutationObserver((function(){t.log("Mutation observed, calling collectCABasketPrice"),k()})),(x=document.querySelector("#checkoutForm"))&&S.observe(x,f)),e.next=33,l;case 33:if(C=e.sent,t.log("Found treatments: ",C),t.log("Found cookie percentage: ",c),t.log("Split_ratio: ",p),t.log("cookiePct < SPLIT_RATIO",c<p),t.info("Control group ratio: ".concat(p,"%")),A=new X({treatments:C,cookiePct:c}),(E=A.getMatchedTreatments()).length){e.next=46;break}return t.log("No treatments matched, returning without further action"),L(),K.sendEmptyLog("No treatments matched",n),e.abrupt("return",{v:void 0});case 46:N={},T={},j={},P=le(E),e.prev=50,P.s();case 52:if((D=P.n()).done){e.next=66;break}if(U=D.value,e.prev=54,M=U.id,J=U.reapply_event,F=void 0===J?null:J){B=F,Array.isArray(F)||(B=[F]),t.log("Reapply event '".concat(F,"' found for treatment: ").concat(M)),V=le(B);try{for(V.s();!($=V.n()).done;)G=$.value,z=j[G]?j[G]:[],j[G]=[].concat(o(z),[M])}catch(e){V.e(e)}finally{V.f()}}return e.next=59,b(U,N,T);case 59:e.next=64;break;case 61:e.prev=61,e.t0=e.catch(54),t.log("Error executing rules",e.t0);case 64:e.next=52;break;case 66:e.next=71;break;case 68:e.prev=68,e.t1=e.catch(50),P.e(e.t1);case 71:return e.prev=71,P.f(),e.finish(71);case 74:for(t.info("Treatments applied"),L(),t.log("Applied treatments: ",N),(H=new K(N,T)).sendLogs(n),setInterval((function(){H.updateLatestChanges(N,T)}),1e3),W=function(){var e=Z[Q],n=j[e],r=E.filter((function(e){return n.includes(e.id)}));switch(e){case"infinite_scroll":var o=new ResizeObserver((function(){var e,n=le(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.log("Retrying treatment ".concat(o.id," from infinite_scroll")),b(o,N,T)}}catch(e){n.e(e)}finally{n.f()}}));o.observe(document.documentElement);break;case"timeout":setTimeout((function(){var e,n=le(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.log("Retrying treatment ".concat(o.id," from timeout")),b(o,N,T)}}catch(e){n.e(e)}finally{n.f()}}),500);break;case"element_change":var a,i=le(r);try{var c=function(){var e,n=a.value,r=le(Array.isArray(n.reapply_selector)?n.reapply_selector:[n.reapply_selector]);try{for(r.s();!(e=r.n()).done;){var o=e.value,i=document.querySelector(o);i&&new MutationObserver((function(){t.log("Retrying treatment ".concat(n.id," from element_change")),b(n,N,T)})).observe(i,f)}}catch(e){r.e(e)}finally{r.f()}};for(i.s();!(a=i.n()).done;)c()}catch(e){i.e(e)}finally{i.f()}break;case"on_scroll":window.onscroll=function(){var e,n=le(r);try{for(n.s();!(e=n.n()).done;){var o=e.value;t.log("Retrying treatment ".concat(o.id," from on_scroll")),b(o,N,T)}}catch(e){n.e(e)}finally{n.f()}};break;default:t.log("Reapply event not found: ",e)}},Q=0,Z=Object.keys(j);Q<Z.length;Q++)W();case 82:case"end":return e.stop()}var ee,te,ne,re,oe,ae,ie,ce}),e,null,[[50,68,71,74],[54,61]])}))(),"t0",3);case 3:if("object"!==e(r=t.t0)){t.next=6;break}return t.abrupt("return",r.v);case 6:t.next=15;break;case 8:t.prev=8,t.t1=t.catch(1),L(),console.warn("Nextday: ",t.t1.message),a=t.t1.message,"Could not parse cookie"!==t.t1.message&&"Control group: no treatments applied"!==t.t1.message&&(a="Error when applying treatments: ".concat(t.t1.message)),K.sendEmptyLog(a,n);case 15:case"end":return t.stop()}}),t,null,[[1,8]])})))()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRb1QsS0FBSyxZQUFhLEtBQUluSSxTQUMxQkEsRUFBVSxLQUFJQSxRQUNFLDJCQUFoQixLQUFJQSxTQUF3RCx5Q0FBaEIsS0FBSUEsVUFDbERBLEVBQVUsbUNBQUgsT0FBc0MsS0FBSUEsVUFFbkRDLEVBQUFBLGFBQXFCRCxFQUFTWSxHQTVPakMsd0RBQUQsRyIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvcmVnZW5lcmF0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9yZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZi5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FycmF5TGlrZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheS5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5LmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXJyYXlXaXRob3V0SG9sZXMuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pdGVyYWJsZVRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9ub25JdGVyYWJsZVNwcmVhZC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5LmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXJyYXlXaXRoSG9sZXMuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pdGVyYWJsZVRvQXJyYXlMaW1pdC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL25vbkl0ZXJhYmxlUmVzdC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9sb2dnZXIuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy91dGlscy5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlSdWxlRW5naW5lL2RhdGFMYXllckNoZWNrZXIuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5QXBwbHlUcmVhdG1lbnRzL2luZGV4LmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheU1vbml0b3IvaW5kZXguanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5VHJlYXRtZW50UmVwb3NpdG9yeS9pbmRleC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlSdWxlRW5naW5lL2NvdW50ZXJDaGVja2VyLmpzIiwid2VicGFjazovL2NsaWVudC1zaWRlLWludGVncmF0aW9uLXNjcmlwdHMvLi9zcmMvTmV4dGRheVJ1bGVFbmdpbmUvZWxlbWVudENoZWNrZXIuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5UnVsZUVuZ2luZS9mdW5jdGlvbkNoZWNrZXIuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5UnVsZUVuZ2luZS9zZXNzaW9uQ2hlY2tlci5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlSdWxlRW5naW5lL3VybENoZWNrZXIuanMiLCJ3ZWJwYWNrOi8vY2xpZW50LXNpZGUtaW50ZWdyYXRpb24tc2NyaXB0cy8uL3NyYy9OZXh0ZGF5UnVsZUVuZ2luZS9pbmRleC5qcyIsIndlYnBhY2s6Ly9jbGllbnQtc2lkZS1pbnRlZ3JhdGlvbi1zY3JpcHRzLy4vc3JjL05leHRkYXlDbGllbnRTREsvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwicmVnZW5lcmF0b3ItcnVudGltZVwiKTtcbiIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxudmFyIHJ1bnRpbWUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIE9wID0gT2JqZWN0LnByb3RvdHlwZTtcbiAgdmFyIGhhc093biA9IE9wLmhhc093blByb3BlcnR5O1xuICB2YXIgdW5kZWZpbmVkOyAvLyBNb3JlIGNvbXByZXNzaWJsZSB0aGFuIHZvaWQgMC5cbiAgdmFyICRTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgPyBTeW1ib2wgOiB7fTtcbiAgdmFyIGl0ZXJhdG9yU3ltYm9sID0gJFN5bWJvbC5pdGVyYXRvciB8fCBcIkBAaXRlcmF0b3JcIjtcbiAgdmFyIGFzeW5jSXRlcmF0b3JTeW1ib2wgPSAkU3ltYm9sLmFzeW5jSXRlcmF0b3IgfHwgXCJAQGFzeW5jSXRlcmF0b3JcIjtcbiAgdmFyIHRvU3RyaW5nVGFnU3ltYm9sID0gJFN5bWJvbC50b1N0cmluZ1RhZyB8fCBcIkBAdG9TdHJpbmdUYWdcIjtcblxuICBmdW5jdGlvbiBkZWZpbmUob2JqLCBrZXksIHZhbHVlKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG4gICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgd3JpdGFibGU6IHRydWVcbiAgICB9KTtcbiAgICByZXR1cm4gb2JqW2tleV07XG4gIH1cbiAgdHJ5IHtcbiAgICAvLyBJRSA4IGhhcyBhIGJyb2tlbiBPYmplY3QuZGVmaW5lUHJvcGVydHkgdGhhdCBvbmx5IHdvcmtzIG9uIERPTSBvYmplY3RzLlxuICAgIGRlZmluZSh7fSwgXCJcIik7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGRlZmluZSA9IGZ1bmN0aW9uKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldID0gdmFsdWU7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBJZiBvdXRlckZuIHByb3ZpZGVkIGFuZCBvdXRlckZuLnByb3RvdHlwZSBpcyBhIEdlbmVyYXRvciwgdGhlbiBvdXRlckZuLnByb3RvdHlwZSBpbnN0YW5jZW9mIEdlbmVyYXRvci5cbiAgICB2YXIgcHJvdG9HZW5lcmF0b3IgPSBvdXRlckZuICYmIG91dGVyRm4ucHJvdG90eXBlIGluc3RhbmNlb2YgR2VuZXJhdG9yID8gb3V0ZXJGbiA6IEdlbmVyYXRvcjtcbiAgICB2YXIgZ2VuZXJhdG9yID0gT2JqZWN0LmNyZWF0ZShwcm90b0dlbmVyYXRvci5wcm90b3R5cGUpO1xuICAgIHZhciBjb250ZXh0ID0gbmV3IENvbnRleHQodHJ5TG9jc0xpc3QgfHwgW10pO1xuXG4gICAgLy8gVGhlIC5faW52b2tlIG1ldGhvZCB1bmlmaWVzIHRoZSBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlIC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcy5cbiAgICBnZW5lcmF0b3IuX2ludm9rZSA9IG1ha2VJbnZva2VNZXRob2QoaW5uZXJGbiwgc2VsZiwgY29udGV4dCk7XG5cbiAgICByZXR1cm4gZ2VuZXJhdG9yO1xuICB9XG4gIGV4cG9ydHMud3JhcCA9IHdyYXA7XG5cbiAgLy8gVHJ5L2NhdGNoIGhlbHBlciB0byBtaW5pbWl6ZSBkZW9wdGltaXphdGlvbnMuIFJldHVybnMgYSBjb21wbGV0aW9uXG4gIC8vIHJlY29yZCBsaWtlIGNvbnRleHQudHJ5RW50cmllc1tpXS5jb21wbGV0aW9uLiBUaGlzIGludGVyZmFjZSBjb3VsZFxuICAvLyBoYXZlIGJlZW4gKGFuZCB3YXMgcHJldmlvdXNseSkgZGVzaWduZWQgdG8gdGFrZSBhIGNsb3N1cmUgdG8gYmVcbiAgLy8gaW52b2tlZCB3aXRob3V0IGFyZ3VtZW50cywgYnV0IGluIGFsbCB0aGUgY2FzZXMgd2UgY2FyZSBhYm91dCB3ZVxuICAvLyBhbHJlYWR5IGhhdmUgYW4gZXhpc3RpbmcgbWV0aG9kIHdlIHdhbnQgdG8gY2FsbCwgc28gdGhlcmUncyBubyBuZWVkXG4gIC8vIHRvIGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QuIFdlIGNhbiBldmVuIGdldCBhd2F5IHdpdGggYXNzdW1pbmdcbiAgLy8gdGhlIG1ldGhvZCB0YWtlcyBleGFjdGx5IG9uZSBhcmd1bWVudCwgc2luY2UgdGhhdCBoYXBwZW5zIHRvIGJlIHRydWVcbiAgLy8gaW4gZXZlcnkgY2FzZSwgc28gd2UgZG9uJ3QgaGF2ZSB0byB0b3VjaCB0aGUgYXJndW1lbnRzIG9iamVjdC4gVGhlXG4gIC8vIG9ubHkgYWRkaXRpb25hbCBhbGxvY2F0aW9uIHJlcXVpcmVkIGlzIHRoZSBjb21wbGV0aW9uIHJlY29yZCwgd2hpY2hcbiAgLy8gaGFzIGEgc3RhYmxlIHNoYXBlIGFuZCBzbyBob3BlZnVsbHkgc2hvdWxkIGJlIGNoZWFwIHRvIGFsbG9jYXRlLlxuICBmdW5jdGlvbiB0cnlDYXRjaChmbiwgb2JqLCBhcmcpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJub3JtYWxcIiwgYXJnOiBmbi5jYWxsKG9iaiwgYXJnKSB9O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgcmV0dXJuIHsgdHlwZTogXCJ0aHJvd1wiLCBhcmc6IGVyciB9O1xuICAgIH1cbiAgfVxuXG4gIHZhciBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0ID0gXCJzdXNwZW5kZWRTdGFydFwiO1xuICB2YXIgR2VuU3RhdGVTdXNwZW5kZWRZaWVsZCA9IFwic3VzcGVuZGVkWWllbGRcIjtcbiAgdmFyIEdlblN0YXRlRXhlY3V0aW5nID0gXCJleGVjdXRpbmdcIjtcbiAgdmFyIEdlblN0YXRlQ29tcGxldGVkID0gXCJjb21wbGV0ZWRcIjtcblxuICAvLyBSZXR1cm5pbmcgdGhpcyBvYmplY3QgZnJvbSB0aGUgaW5uZXJGbiBoYXMgdGhlIHNhbWUgZWZmZWN0IGFzXG4gIC8vIGJyZWFraW5nIG91dCBvZiB0aGUgZGlzcGF0Y2ggc3dpdGNoIHN0YXRlbWVudC5cbiAgdmFyIENvbnRpbnVlU2VudGluZWwgPSB7fTtcblxuICAvLyBEdW1teSBjb25zdHJ1Y3RvciBmdW5jdGlvbnMgdGhhdCB3ZSB1c2UgYXMgdGhlIC5jb25zdHJ1Y3RvciBhbmRcbiAgLy8gLmNvbnN0cnVjdG9yLnByb3RvdHlwZSBwcm9wZXJ0aWVzIGZvciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gR2VuZXJhdG9yXG4gIC8vIG9iamVjdHMuIEZvciBmdWxsIHNwZWMgY29tcGxpYW5jZSwgeW91IG1heSB3aXNoIHRvIGNvbmZpZ3VyZSB5b3VyXG4gIC8vIG1pbmlmaWVyIG5vdCB0byBtYW5nbGUgdGhlIG5hbWVzIG9mIHRoZXNlIHR3byBmdW5jdGlvbnMuXG4gIGZ1bmN0aW9uIEdlbmVyYXRvcigpIHt9XG4gIGZ1bmN0aW9uIEdlbmVyYXRvckZ1bmN0aW9uKCkge31cbiAgZnVuY3Rpb24gR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUoKSB7fVxuXG4gIC8vIFRoaXMgaXMgYSBwb2x5ZmlsbCBmb3IgJUl0ZXJhdG9yUHJvdG90eXBlJSBmb3IgZW52aXJvbm1lbnRzIHRoYXRcbiAgLy8gZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdC5cbiAgdmFyIEl0ZXJhdG9yUHJvdG90eXBlID0ge307XG4gIGRlZmluZShJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG5cbiAgdmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuICB2YXIgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgPSBnZXRQcm90byAmJiBnZXRQcm90byhnZXRQcm90byh2YWx1ZXMoW10pKSk7XG4gIGlmIChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSAmJlxuICAgICAgTmF0aXZlSXRlcmF0b3JQcm90b3R5cGUgIT09IE9wICYmXG4gICAgICBoYXNPd24uY2FsbChOYXRpdmVJdGVyYXRvclByb3RvdHlwZSwgaXRlcmF0b3JTeW1ib2wpKSB7XG4gICAgLy8gVGhpcyBlbnZpcm9ubWVudCBoYXMgYSBuYXRpdmUgJUl0ZXJhdG9yUHJvdG90eXBlJTsgdXNlIGl0IGluc3RlYWRcbiAgICAvLyBvZiB0aGUgcG9seWZpbGwuXG4gICAgSXRlcmF0b3JQcm90b3R5cGUgPSBOYXRpdmVJdGVyYXRvclByb3RvdHlwZTtcbiAgfVxuXG4gIHZhciBHcCA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLnByb3RvdHlwZSA9XG4gICAgR2VuZXJhdG9yLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSXRlcmF0b3JQcm90b3R5cGUpO1xuICBHZW5lcmF0b3JGdW5jdGlvbi5wcm90b3R5cGUgPSBHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZTtcbiAgZGVmaW5lKEdwLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgZGVmaW5lKEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlLCBcImNvbnN0cnVjdG9yXCIsIEdlbmVyYXRvckZ1bmN0aW9uKTtcbiAgR2VuZXJhdG9yRnVuY3Rpb24uZGlzcGxheU5hbWUgPSBkZWZpbmUoXG4gICAgR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUsXG4gICAgdG9TdHJpbmdUYWdTeW1ib2wsXG4gICAgXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICk7XG5cbiAgLy8gSGVscGVyIGZvciBkZWZpbmluZyB0aGUgLm5leHQsIC50aHJvdywgYW5kIC5yZXR1cm4gbWV0aG9kcyBvZiB0aGVcbiAgLy8gSXRlcmF0b3IgaW50ZXJmYWNlIGluIHRlcm1zIG9mIGEgc2luZ2xlIC5faW52b2tlIG1ldGhvZC5cbiAgZnVuY3Rpb24gZGVmaW5lSXRlcmF0b3JNZXRob2RzKHByb3RvdHlwZSkge1xuICAgIFtcIm5leHRcIiwgXCJ0aHJvd1wiLCBcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgICAgZGVmaW5lKHByb3RvdHlwZSwgbWV0aG9kLCBmdW5jdGlvbihhcmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludm9rZShtZXRob2QsIGFyZyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbiA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIHZhciBjdG9yID0gdHlwZW9mIGdlbkZ1biA9PT0gXCJmdW5jdGlvblwiICYmIGdlbkZ1bi5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gY3RvclxuICAgICAgPyBjdG9yID09PSBHZW5lcmF0b3JGdW5jdGlvbiB8fFxuICAgICAgICAvLyBGb3IgdGhlIG5hdGl2ZSBHZW5lcmF0b3JGdW5jdGlvbiBjb25zdHJ1Y3RvciwgdGhlIGJlc3Qgd2UgY2FuXG4gICAgICAgIC8vIGRvIGlzIHRvIGNoZWNrIGl0cyAubmFtZSBwcm9wZXJ0eS5cbiAgICAgICAgKGN0b3IuZGlzcGxheU5hbWUgfHwgY3Rvci5uYW1lKSA9PT0gXCJHZW5lcmF0b3JGdW5jdGlvblwiXG4gICAgICA6IGZhbHNlO1xuICB9O1xuXG4gIGV4cG9ydHMubWFyayA9IGZ1bmN0aW9uKGdlbkZ1bikge1xuICAgIGlmIChPYmplY3Quc2V0UHJvdG90eXBlT2YpIHtcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihnZW5GdW4sIEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZ2VuRnVuLl9fcHJvdG9fXyA9IEdlbmVyYXRvckZ1bmN0aW9uUHJvdG90eXBlO1xuICAgICAgZGVmaW5lKGdlbkZ1biwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yRnVuY3Rpb25cIik7XG4gICAgfVxuICAgIGdlbkZ1bi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEdwKTtcbiAgICByZXR1cm4gZ2VuRnVuO1xuICB9O1xuXG4gIC8vIFdpdGhpbiB0aGUgYm9keSBvZiBhbnkgYXN5bmMgZnVuY3Rpb24sIGBhd2FpdCB4YCBpcyB0cmFuc2Zvcm1lZCB0b1xuICAvLyBgeWllbGQgcmVnZW5lcmF0b3JSdW50aW1lLmF3cmFwKHgpYCwgc28gdGhhdCB0aGUgcnVudGltZSBjYW4gdGVzdFxuICAvLyBgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKWAgdG8gZGV0ZXJtaW5lIGlmIHRoZSB5aWVsZGVkIHZhbHVlIGlzXG4gIC8vIG1lYW50IHRvIGJlIGF3YWl0ZWQuXG4gIGV4cG9ydHMuYXdyYXAgPSBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4geyBfX2F3YWl0OiBhcmcgfTtcbiAgfTtcblxuICBmdW5jdGlvbiBBc3luY0l0ZXJhdG9yKGdlbmVyYXRvciwgUHJvbWlzZUltcGwpIHtcbiAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcsIHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGdlbmVyYXRvclttZXRob2RdLCBnZW5lcmF0b3IsIGFyZyk7XG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICByZWplY3QocmVjb3JkLmFyZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcmVzdWx0ID0gcmVjb3JkLmFyZztcbiAgICAgICAgdmFyIHZhbHVlID0gcmVzdWx0LnZhbHVlO1xuICAgICAgICBpZiAodmFsdWUgJiZcbiAgICAgICAgICAgIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICAgICAgaGFzT3duLmNhbGwodmFsdWUsIFwiX19hd2FpdFwiKSkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlSW1wbC5yZXNvbHZlKHZhbHVlLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICAgIGludm9rZShcIm5leHRcIiwgdmFsdWUsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBpbnZva2UoXCJ0aHJvd1wiLCBlcnIsIHJlc29sdmUsIHJlamVjdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gUHJvbWlzZUltcGwucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbih1bndyYXBwZWQpIHtcbiAgICAgICAgICAvLyBXaGVuIGEgeWllbGRlZCBQcm9taXNlIGlzIHJlc29sdmVkLCBpdHMgZmluYWwgdmFsdWUgYmVjb21lc1xuICAgICAgICAgIC8vIHRoZSAudmFsdWUgb2YgdGhlIFByb21pc2U8e3ZhbHVlLGRvbmV9PiByZXN1bHQgZm9yIHRoZVxuICAgICAgICAgIC8vIGN1cnJlbnQgaXRlcmF0aW9uLlxuICAgICAgICAgIHJlc3VsdC52YWx1ZSA9IHVud3JhcHBlZDtcbiAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgLy8gSWYgYSByZWplY3RlZCBQcm9taXNlIHdhcyB5aWVsZGVkLCB0aHJvdyB0aGUgcmVqZWN0aW9uIGJhY2tcbiAgICAgICAgICAvLyBpbnRvIHRoZSBhc3luYyBnZW5lcmF0b3IgZnVuY3Rpb24gc28gaXQgY2FuIGJlIGhhbmRsZWQgdGhlcmUuXG4gICAgICAgICAgcmV0dXJuIGludm9rZShcInRocm93XCIsIGVycm9yLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcHJldmlvdXNQcm9taXNlO1xuXG4gICAgZnVuY3Rpb24gZW5xdWV1ZShtZXRob2QsIGFyZykge1xuICAgICAgZnVuY3Rpb24gY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZUltcGwoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgaW52b2tlKG1ldGhvZCwgYXJnLCByZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHByZXZpb3VzUHJvbWlzZSA9XG4gICAgICAgIC8vIElmIGVucXVldWUgaGFzIGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiB3ZSB3YW50IHRvIHdhaXQgdW50aWxcbiAgICAgICAgLy8gYWxsIHByZXZpb3VzIFByb21pc2VzIGhhdmUgYmVlbiByZXNvbHZlZCBiZWZvcmUgY2FsbGluZyBpbnZva2UsXG4gICAgICAgIC8vIHNvIHRoYXQgcmVzdWx0cyBhcmUgYWx3YXlzIGRlbGl2ZXJlZCBpbiB0aGUgY29ycmVjdCBvcmRlci4gSWZcbiAgICAgICAgLy8gZW5xdWV1ZSBoYXMgbm90IGJlZW4gY2FsbGVkIGJlZm9yZSwgdGhlbiBpdCBpcyBpbXBvcnRhbnQgdG9cbiAgICAgICAgLy8gY2FsbCBpbnZva2UgaW1tZWRpYXRlbHksIHdpdGhvdXQgd2FpdGluZyBvbiBhIGNhbGxiYWNrIHRvIGZpcmUsXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIGFzeW5jIGdlbmVyYXRvciBmdW5jdGlvbiBoYXMgdGhlIG9wcG9ydHVuaXR5IHRvIGRvXG4gICAgICAgIC8vIGFueSBuZWNlc3Nhcnkgc2V0dXAgaW4gYSBwcmVkaWN0YWJsZSB3YXkuIFRoaXMgcHJlZGljdGFiaWxpdHlcbiAgICAgICAgLy8gaXMgd2h5IHRoZSBQcm9taXNlIGNvbnN0cnVjdG9yIHN5bmNocm9ub3VzbHkgaW52b2tlcyBpdHNcbiAgICAgICAgLy8gZXhlY3V0b3IgY2FsbGJhY2ssIGFuZCB3aHkgYXN5bmMgZnVuY3Rpb25zIHN5bmNocm9ub3VzbHlcbiAgICAgICAgLy8gZXhlY3V0ZSBjb2RlIGJlZm9yZSB0aGUgZmlyc3QgYXdhaXQuIFNpbmNlIHdlIGltcGxlbWVudCBzaW1wbGVcbiAgICAgICAgLy8gYXN5bmMgZnVuY3Rpb25zIGluIHRlcm1zIG9mIGFzeW5jIGdlbmVyYXRvcnMsIGl0IGlzIGVzcGVjaWFsbHlcbiAgICAgICAgLy8gaW1wb3J0YW50IHRvIGdldCB0aGlzIHJpZ2h0LCBldmVuIHRob3VnaCBpdCByZXF1aXJlcyBjYXJlLlxuICAgICAgICBwcmV2aW91c1Byb21pc2UgPyBwcmV2aW91c1Byb21pc2UudGhlbihcbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZyxcbiAgICAgICAgICAvLyBBdm9pZCBwcm9wYWdhdGluZyBmYWlsdXJlcyB0byBQcm9taXNlcyByZXR1cm5lZCBieSBsYXRlclxuICAgICAgICAgIC8vIGludm9jYXRpb25zIG9mIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICBjYWxsSW52b2tlV2l0aE1ldGhvZEFuZEFyZ1xuICAgICAgICApIDogY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmcoKTtcbiAgICB9XG5cbiAgICAvLyBEZWZpbmUgdGhlIHVuaWZpZWQgaGVscGVyIG1ldGhvZCB0aGF0IGlzIHVzZWQgdG8gaW1wbGVtZW50IC5uZXh0LFxuICAgIC8vIC50aHJvdywgYW5kIC5yZXR1cm4gKHNlZSBkZWZpbmVJdGVyYXRvck1ldGhvZHMpLlxuICAgIHRoaXMuX2ludm9rZSA9IGVucXVldWU7XG4gIH1cblxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUpO1xuICBkZWZpbmUoQXN5bmNJdGVyYXRvci5wcm90b3R5cGUsIGFzeW5jSXRlcmF0b3JTeW1ib2wsIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSk7XG4gIGV4cG9ydHMuQXN5bmNJdGVyYXRvciA9IEFzeW5jSXRlcmF0b3I7XG5cbiAgLy8gTm90ZSB0aGF0IHNpbXBsZSBhc3luYyBmdW5jdGlvbnMgYXJlIGltcGxlbWVudGVkIG9uIHRvcCBvZlxuICAvLyBBc3luY0l0ZXJhdG9yIG9iamVjdHM7IHRoZXkganVzdCByZXR1cm4gYSBQcm9taXNlIGZvciB0aGUgdmFsdWUgb2ZcbiAgLy8gdGhlIGZpbmFsIHJlc3VsdCBwcm9kdWNlZCBieSB0aGUgaXRlcmF0b3IuXG4gIGV4cG9ydHMuYXN5bmMgPSBmdW5jdGlvbihpbm5lckZuLCBvdXRlckZuLCBzZWxmLCB0cnlMb2NzTGlzdCwgUHJvbWlzZUltcGwpIHtcbiAgICBpZiAoUHJvbWlzZUltcGwgPT09IHZvaWQgMCkgUHJvbWlzZUltcGwgPSBQcm9taXNlO1xuXG4gICAgdmFyIGl0ZXIgPSBuZXcgQXN5bmNJdGVyYXRvcihcbiAgICAgIHdyYXAoaW5uZXJGbiwgb3V0ZXJGbiwgc2VsZiwgdHJ5TG9jc0xpc3QpLFxuICAgICAgUHJvbWlzZUltcGxcbiAgICApO1xuXG4gICAgcmV0dXJuIGV4cG9ydHMuaXNHZW5lcmF0b3JGdW5jdGlvbihvdXRlckZuKVxuICAgICAgPyBpdGVyIC8vIElmIG91dGVyRm4gaXMgYSBnZW5lcmF0b3IsIHJldHVybiB0aGUgZnVsbCBpdGVyYXRvci5cbiAgICAgIDogaXRlci5uZXh0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0LmRvbmUgPyByZXN1bHQudmFsdWUgOiBpdGVyLm5leHQoKTtcbiAgICAgICAgfSk7XG4gIH07XG5cbiAgZnVuY3Rpb24gbWFrZUludm9rZU1ldGhvZChpbm5lckZuLCBzZWxmLCBjb250ZXh0KSB7XG4gICAgdmFyIHN0YXRlID0gR2VuU3RhdGVTdXNwZW5kZWRTdGFydDtcblxuICAgIHJldHVybiBmdW5jdGlvbiBpbnZva2UobWV0aG9kLCBhcmcpIHtcbiAgICAgIGlmIChzdGF0ZSA9PT0gR2VuU3RhdGVFeGVjdXRpbmcpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZUNvbXBsZXRlZCkge1xuICAgICAgICBpZiAobWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICB0aHJvdyBhcmc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCZSBmb3JnaXZpbmcsIHBlciAyNS4zLjMuMy4zIG9mIHRoZSBzcGVjOlxuICAgICAgICAvLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtZ2VuZXJhdG9ycmVzdW1lXG4gICAgICAgIHJldHVybiBkb25lUmVzdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGNvbnRleHQubWV0aG9kID0gbWV0aG9kO1xuICAgICAgY29udGV4dC5hcmcgPSBhcmc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIHZhciBkZWxlZ2F0ZSA9IGNvbnRleHQuZGVsZWdhdGU7XG4gICAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICAgIHZhciBkZWxlZ2F0ZVJlc3VsdCA9IG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuICAgICAgICAgIGlmIChkZWxlZ2F0ZVJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKGRlbGVnYXRlUmVzdWx0ID09PSBDb250aW51ZVNlbnRpbmVsKSBjb250aW51ZTtcbiAgICAgICAgICAgIHJldHVybiBkZWxlZ2F0ZVJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY29udGV4dC5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgICAgLy8gU2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAgICAgLy8gZnVuY3Rpb24uc2VudCBpbXBsZW1lbnRhdGlvbi5cbiAgICAgICAgICBjb250ZXh0LnNlbnQgPSBjb250ZXh0Ll9zZW50ID0gY29udGV4dC5hcmc7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgICAgaWYgKHN0YXRlID09PSBHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0KSB7XG4gICAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgICAgdGhyb3cgY29udGV4dC5hcmc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29udGV4dC5kaXNwYXRjaEV4Y2VwdGlvbihjb250ZXh0LmFyZyk7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJyZXR1cm5cIikge1xuICAgICAgICAgIGNvbnRleHQuYWJydXB0KFwicmV0dXJuXCIsIGNvbnRleHQuYXJnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlID0gR2VuU3RhdGVFeGVjdXRpbmc7XG5cbiAgICAgICAgdmFyIHJlY29yZCA9IHRyeUNhdGNoKGlubmVyRm4sIHNlbGYsIGNvbnRleHQpO1xuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcbiAgICAgICAgICAvLyBJZiBhbiBleGNlcHRpb24gaXMgdGhyb3duIGZyb20gaW5uZXJGbiwgd2UgbGVhdmUgc3RhdGUgPT09XG4gICAgICAgICAgLy8gR2VuU3RhdGVFeGVjdXRpbmcgYW5kIGxvb3AgYmFjayBmb3IgYW5vdGhlciBpbnZvY2F0aW9uLlxuICAgICAgICAgIHN0YXRlID0gY29udGV4dC5kb25lXG4gICAgICAgICAgICA/IEdlblN0YXRlQ29tcGxldGVkXG4gICAgICAgICAgICA6IEdlblN0YXRlU3VzcGVuZGVkWWllbGQ7XG5cbiAgICAgICAgICBpZiAocmVjb3JkLmFyZyA9PT0gQ29udGludWVTZW50aW5lbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHZhbHVlOiByZWNvcmQuYXJnLFxuICAgICAgICAgICAgZG9uZTogY29udGV4dC5kb25lXG4gICAgICAgICAgfTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICBzdGF0ZSA9IEdlblN0YXRlQ29tcGxldGVkO1xuICAgICAgICAgIC8vIERpc3BhdGNoIHRoZSBleGNlcHRpb24gYnkgbG9vcGluZyBiYWNrIGFyb3VuZCB0byB0aGVcbiAgICAgICAgICAvLyBjb250ZXh0LmRpc3BhdGNoRXhjZXB0aW9uKGNvbnRleHQuYXJnKSBjYWxsIGFib3ZlLlxuICAgICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cblxuICAvLyBDYWxsIGRlbGVnYXRlLml0ZXJhdG9yW2NvbnRleHQubWV0aG9kXShjb250ZXh0LmFyZykgYW5kIGhhbmRsZSB0aGVcbiAgLy8gcmVzdWx0LCBlaXRoZXIgYnkgcmV0dXJuaW5nIGEgeyB2YWx1ZSwgZG9uZSB9IHJlc3VsdCBmcm9tIHRoZVxuICAvLyBkZWxlZ2F0ZSBpdGVyYXRvciwgb3IgYnkgbW9kaWZ5aW5nIGNvbnRleHQubWV0aG9kIGFuZCBjb250ZXh0LmFyZyxcbiAgLy8gc2V0dGluZyBjb250ZXh0LmRlbGVnYXRlIHRvIG51bGwsIGFuZCByZXR1cm5pbmcgdGhlIENvbnRpbnVlU2VudGluZWwuXG4gIGZ1bmN0aW9uIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGUuaXRlcmF0b3JbY29udGV4dC5tZXRob2RdO1xuICAgIGlmIChtZXRob2QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQSAudGhyb3cgb3IgLnJldHVybiB3aGVuIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgbm8gLnRocm93XG4gICAgICAvLyBtZXRob2QgYWx3YXlzIHRlcm1pbmF0ZXMgdGhlIHlpZWxkKiBsb29wLlxuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIGlmIChjb250ZXh0Lm1ldGhvZCA9PT0gXCJ0aHJvd1wiKSB7XG4gICAgICAgIC8vIE5vdGU6IFtcInJldHVyblwiXSBtdXN0IGJlIHVzZWQgZm9yIEVTMyBwYXJzaW5nIGNvbXBhdGliaWxpdHkuXG4gICAgICAgIGlmIChkZWxlZ2F0ZS5pdGVyYXRvcltcInJldHVyblwiXSkge1xuICAgICAgICAgIC8vIElmIHRoZSBkZWxlZ2F0ZSBpdGVyYXRvciBoYXMgYSByZXR1cm4gbWV0aG9kLCBnaXZlIGl0IGFcbiAgICAgICAgICAvLyBjaGFuY2UgdG8gY2xlYW4gdXAuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICAgIGNvbnRleHQuYXJnID0gdW5kZWZpbmVkO1xuICAgICAgICAgIG1heWJlSW52b2tlRGVsZWdhdGUoZGVsZWdhdGUsIGNvbnRleHQpO1xuXG4gICAgICAgICAgaWYgKGNvbnRleHQubWV0aG9kID09PSBcInRocm93XCIpIHtcbiAgICAgICAgICAgIC8vIElmIG1heWJlSW52b2tlRGVsZWdhdGUoY29udGV4dCkgY2hhbmdlZCBjb250ZXh0Lm1ldGhvZCBmcm9tXG4gICAgICAgICAgICAvLyBcInJldHVyblwiIHRvIFwidGhyb3dcIiwgbGV0IHRoYXQgb3ZlcnJpZGUgdGhlIFR5cGVFcnJvciBiZWxvdy5cbiAgICAgICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgICBjb250ZXh0LmFyZyA9IG5ldyBUeXBlRXJyb3IoXG4gICAgICAgICAgXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgcmVjb3JkID0gdHJ5Q2F0Y2gobWV0aG9kLCBkZWxlZ2F0ZS5pdGVyYXRvciwgY29udGV4dC5hcmcpO1xuXG4gICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgIGNvbnRleHQubWV0aG9kID0gXCJ0aHJvd1wiO1xuICAgICAgY29udGV4dC5hcmcgPSByZWNvcmQuYXJnO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICB2YXIgaW5mbyA9IHJlY29yZC5hcmc7XG5cbiAgICBpZiAoISBpbmZvKSB7XG4gICAgICBjb250ZXh0Lm1ldGhvZCA9IFwidGhyb3dcIjtcbiAgICAgIGNvbnRleHQuYXJnID0gbmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpO1xuICAgICAgY29udGV4dC5kZWxlZ2F0ZSA9IG51bGw7XG4gICAgICByZXR1cm4gQ29udGludWVTZW50aW5lbDtcbiAgICB9XG5cbiAgICBpZiAoaW5mby5kb25lKSB7XG4gICAgICAvLyBBc3NpZ24gdGhlIHJlc3VsdCBvZiB0aGUgZmluaXNoZWQgZGVsZWdhdGUgdG8gdGhlIHRlbXBvcmFyeVxuICAgICAgLy8gdmFyaWFibGUgc3BlY2lmaWVkIGJ5IGRlbGVnYXRlLnJlc3VsdE5hbWUgKHNlZSBkZWxlZ2F0ZVlpZWxkKS5cbiAgICAgIGNvbnRleHRbZGVsZWdhdGUucmVzdWx0TmFtZV0gPSBpbmZvLnZhbHVlO1xuXG4gICAgICAvLyBSZXN1bWUgZXhlY3V0aW9uIGF0IHRoZSBkZXNpcmVkIGxvY2F0aW9uIChzZWUgZGVsZWdhdGVZaWVsZCkuXG4gICAgICBjb250ZXh0Lm5leHQgPSBkZWxlZ2F0ZS5uZXh0TG9jO1xuXG4gICAgICAvLyBJZiBjb250ZXh0Lm1ldGhvZCB3YXMgXCJ0aHJvd1wiIGJ1dCB0aGUgZGVsZWdhdGUgaGFuZGxlZCB0aGVcbiAgICAgIC8vIGV4Y2VwdGlvbiwgbGV0IHRoZSBvdXRlciBnZW5lcmF0b3IgcHJvY2VlZCBub3JtYWxseS4gSWZcbiAgICAgIC8vIGNvbnRleHQubWV0aG9kIHdhcyBcIm5leHRcIiwgZm9yZ2V0IGNvbnRleHQuYXJnIHNpbmNlIGl0IGhhcyBiZWVuXG4gICAgICAvLyBcImNvbnN1bWVkXCIgYnkgdGhlIGRlbGVnYXRlIGl0ZXJhdG9yLiBJZiBjb250ZXh0Lm1ldGhvZCB3YXNcbiAgICAgIC8vIFwicmV0dXJuXCIsIGFsbG93IHRoZSBvcmlnaW5hbCAucmV0dXJuIGNhbGwgdG8gY29udGludWUgaW4gdGhlXG4gICAgICAvLyBvdXRlciBnZW5lcmF0b3IuXG4gICAgICBpZiAoY29udGV4dC5tZXRob2QgIT09IFwicmV0dXJuXCIpIHtcbiAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgY29udGV4dC5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gUmUteWllbGQgdGhlIHJlc3VsdCByZXR1cm5lZCBieSB0aGUgZGVsZWdhdGUgbWV0aG9kLlxuICAgICAgcmV0dXJuIGluZm87XG4gICAgfVxuXG4gICAgLy8gVGhlIGRlbGVnYXRlIGl0ZXJhdG9yIGlzIGZpbmlzaGVkLCBzbyBmb3JnZXQgaXQgYW5kIGNvbnRpbnVlIHdpdGhcbiAgICAvLyB0aGUgb3V0ZXIgZ2VuZXJhdG9yLlxuICAgIGNvbnRleHQuZGVsZWdhdGUgPSBudWxsO1xuICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICB9XG5cbiAgLy8gRGVmaW5lIEdlbmVyYXRvci5wcm90b3R5cGUue25leHQsdGhyb3cscmV0dXJufSBpbiB0ZXJtcyBvZiB0aGVcbiAgLy8gdW5pZmllZCAuX2ludm9rZSBoZWxwZXIgbWV0aG9kLlxuICBkZWZpbmVJdGVyYXRvck1ldGhvZHMoR3ApO1xuXG4gIGRlZmluZShHcCwgdG9TdHJpbmdUYWdTeW1ib2wsIFwiR2VuZXJhdG9yXCIpO1xuXG4gIC8vIEEgR2VuZXJhdG9yIHNob3VsZCBhbHdheXMgcmV0dXJuIGl0c2VsZiBhcyB0aGUgaXRlcmF0b3Igb2JqZWN0IHdoZW4gdGhlXG4gIC8vIEBAaXRlcmF0b3IgZnVuY3Rpb24gaXMgY2FsbGVkIG9uIGl0LiBTb21lIGJyb3dzZXJzJyBpbXBsZW1lbnRhdGlvbnMgb2YgdGhlXG4gIC8vIGl0ZXJhdG9yIHByb3RvdHlwZSBjaGFpbiBpbmNvcnJlY3RseSBpbXBsZW1lbnQgdGhpcywgY2F1c2luZyB0aGUgR2VuZXJhdG9yXG4gIC8vIG9iamVjdCB0byBub3QgYmUgcmV0dXJuZWQgZnJvbSB0aGlzIGNhbGwuIFRoaXMgZW5zdXJlcyB0aGF0IGRvZXNuJ3QgaGFwcGVuLlxuICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlZ2VuZXJhdG9yL2lzc3Vlcy8yNzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgZGVmaW5lKEdwLCBpdGVyYXRvclN5bWJvbCwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH0pO1xuXG4gIGRlZmluZShHcCwgXCJ0b1N0cmluZ1wiLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IEdlbmVyYXRvcl1cIjtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcHVzaFRyeUVudHJ5KGxvY3MpIHtcbiAgICB2YXIgZW50cnkgPSB7IHRyeUxvYzogbG9jc1swXSB9O1xuXG4gICAgaWYgKDEgaW4gbG9jcykge1xuICAgICAgZW50cnkuY2F0Y2hMb2MgPSBsb2NzWzFdO1xuICAgIH1cblxuICAgIGlmICgyIGluIGxvY3MpIHtcbiAgICAgIGVudHJ5LmZpbmFsbHlMb2MgPSBsb2NzWzJdO1xuICAgICAgZW50cnkuYWZ0ZXJMb2MgPSBsb2NzWzNdO1xuICAgIH1cblxuICAgIHRoaXMudHJ5RW50cmllcy5wdXNoKGVudHJ5KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0VHJ5RW50cnkoZW50cnkpIHtcbiAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbiB8fCB7fTtcbiAgICByZWNvcmQudHlwZSA9IFwibm9ybWFsXCI7XG4gICAgZGVsZXRlIHJlY29yZC5hcmc7XG4gICAgZW50cnkuY29tcGxldGlvbiA9IHJlY29yZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIENvbnRleHQodHJ5TG9jc0xpc3QpIHtcbiAgICAvLyBUaGUgcm9vdCBlbnRyeSBvYmplY3QgKGVmZmVjdGl2ZWx5IGEgdHJ5IHN0YXRlbWVudCB3aXRob3V0IGEgY2F0Y2hcbiAgICAvLyBvciBhIGZpbmFsbHkgYmxvY2spIGdpdmVzIHVzIGEgcGxhY2UgdG8gc3RvcmUgdmFsdWVzIHRocm93biBmcm9tXG4gICAgLy8gbG9jYXRpb25zIHdoZXJlIHRoZXJlIGlzIG5vIGVuY2xvc2luZyB0cnkgc3RhdGVtZW50LlxuICAgIHRoaXMudHJ5RW50cmllcyA9IFt7IHRyeUxvYzogXCJyb290XCIgfV07XG4gICAgdHJ5TG9jc0xpc3QuZm9yRWFjaChwdXNoVHJ5RW50cnksIHRoaXMpO1xuICAgIHRoaXMucmVzZXQodHJ1ZSk7XG4gIH1cblxuICBleHBvcnRzLmtleXMgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgIGtleXMucHVzaChrZXkpO1xuICAgIH1cbiAgICBrZXlzLnJldmVyc2UoKTtcblxuICAgIC8vIFJhdGhlciB0aGFuIHJldHVybmluZyBhbiBvYmplY3Qgd2l0aCBhIG5leHQgbWV0aG9kLCB3ZSBrZWVwXG4gICAgLy8gdGhpbmdzIHNpbXBsZSBhbmQgcmV0dXJuIHRoZSBuZXh0IGZ1bmN0aW9uIGl0c2VsZi5cbiAgICByZXR1cm4gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgIHdoaWxlIChrZXlzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0ga2V5cy5wb3AoKTtcbiAgICAgICAgaWYgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICBuZXh0LnZhbHVlID0ga2V5O1xuICAgICAgICAgIG5leHQuZG9uZSA9IGZhbHNlO1xuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRvIGF2b2lkIGNyZWF0aW5nIGFuIGFkZGl0aW9uYWwgb2JqZWN0LCB3ZSBqdXN0IGhhbmcgdGhlIC52YWx1ZVxuICAgICAgLy8gYW5kIC5kb25lIHByb3BlcnRpZXMgb2ZmIHRoZSBuZXh0IGZ1bmN0aW9uIG9iamVjdCBpdHNlbGYuIFRoaXNcbiAgICAgIC8vIGFsc28gZW5zdXJlcyB0aGF0IHRoZSBtaW5pZmllciB3aWxsIG5vdCBhbm9ueW1pemUgdGhlIGZ1bmN0aW9uLlxuICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcbiAgICAgIHJldHVybiBuZXh0O1xuICAgIH07XG4gIH07XG5cbiAgZnVuY3Rpb24gdmFsdWVzKGl0ZXJhYmxlKSB7XG4gICAgaWYgKGl0ZXJhYmxlKSB7XG4gICAgICB2YXIgaXRlcmF0b3JNZXRob2QgPSBpdGVyYWJsZVtpdGVyYXRvclN5bWJvbF07XG4gICAgICBpZiAoaXRlcmF0b3JNZXRob2QpIHtcbiAgICAgICAgcmV0dXJuIGl0ZXJhdG9yTWV0aG9kLmNhbGwoaXRlcmFibGUpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIGl0ZXJhYmxlLm5leHQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICByZXR1cm4gaXRlcmFibGU7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNOYU4oaXRlcmFibGUubGVuZ3RoKSkge1xuICAgICAgICB2YXIgaSA9IC0xLCBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgICB3aGlsZSAoKytpIDwgaXRlcmFibGUubGVuZ3RoKSB7XG4gICAgICAgICAgICBpZiAoaGFzT3duLmNhbGwoaXRlcmFibGUsIGkpKSB7XG4gICAgICAgICAgICAgIG5leHQudmFsdWUgPSBpdGVyYWJsZVtpXTtcbiAgICAgICAgICAgICAgbmV4dC5kb25lID0gZmFsc2U7XG4gICAgICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIG5leHQudmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgbmV4dC5kb25lID0gdHJ1ZTtcblxuICAgICAgICAgIHJldHVybiBuZXh0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBuZXh0Lm5leHQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFJldHVybiBhbiBpdGVyYXRvciB3aXRoIG5vIHZhbHVlcy5cbiAgICByZXR1cm4geyBuZXh0OiBkb25lUmVzdWx0IH07XG4gIH1cbiAgZXhwb3J0cy52YWx1ZXMgPSB2YWx1ZXM7XG5cbiAgZnVuY3Rpb24gZG9uZVJlc3VsdCgpIHtcbiAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gIH1cblxuICBDb250ZXh0LnByb3RvdHlwZSA9IHtcbiAgICBjb25zdHJ1Y3RvcjogQ29udGV4dCxcblxuICAgIHJlc2V0OiBmdW5jdGlvbihza2lwVGVtcFJlc2V0KSB7XG4gICAgICB0aGlzLnByZXYgPSAwO1xuICAgICAgdGhpcy5uZXh0ID0gMDtcbiAgICAgIC8vIFJlc2V0dGluZyBjb250ZXh0Ll9zZW50IGZvciBsZWdhY3kgc3VwcG9ydCBvZiBCYWJlbCdzXG4gICAgICAvLyBmdW5jdGlvbi5zZW50IGltcGxlbWVudGF0aW9uLlxuICAgICAgdGhpcy5zZW50ID0gdGhpcy5fc2VudCA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgICAgdGhpcy5kZWxlZ2F0ZSA9IG51bGw7XG5cbiAgICAgIHRoaXMubWV0aG9kID0gXCJuZXh0XCI7XG4gICAgICB0aGlzLmFyZyA9IHVuZGVmaW5lZDtcblxuICAgICAgdGhpcy50cnlFbnRyaWVzLmZvckVhY2gocmVzZXRUcnlFbnRyeSk7XG5cbiAgICAgIGlmICghc2tpcFRlbXBSZXNldCkge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMpIHtcbiAgICAgICAgICAvLyBOb3Qgc3VyZSBhYm91dCB0aGUgb3B0aW1hbCBvcmRlciBvZiB0aGVzZSBjb25kaXRpb25zOlxuICAgICAgICAgIGlmIChuYW1lLmNoYXJBdCgwKSA9PT0gXCJ0XCIgJiZcbiAgICAgICAgICAgICAgaGFzT3duLmNhbGwodGhpcywgbmFtZSkgJiZcbiAgICAgICAgICAgICAgIWlzTmFOKCtuYW1lLnNsaWNlKDEpKSkge1xuICAgICAgICAgICAgdGhpc1tuYW1lXSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLmRvbmUgPSB0cnVlO1xuXG4gICAgICB2YXIgcm9vdEVudHJ5ID0gdGhpcy50cnlFbnRyaWVzWzBdO1xuICAgICAgdmFyIHJvb3RSZWNvcmQgPSByb290RW50cnkuY29tcGxldGlvbjtcbiAgICAgIGlmIChyb290UmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICB0aHJvdyByb290UmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMucnZhbDtcbiAgICB9LFxuXG4gICAgZGlzcGF0Y2hFeGNlcHRpb246IGZ1bmN0aW9uKGV4Y2VwdGlvbikge1xuICAgICAgaWYgKHRoaXMuZG9uZSkge1xuICAgICAgICB0aHJvdyBleGNlcHRpb247XG4gICAgICB9XG5cbiAgICAgIHZhciBjb250ZXh0ID0gdGhpcztcbiAgICAgIGZ1bmN0aW9uIGhhbmRsZShsb2MsIGNhdWdodCkge1xuICAgICAgICByZWNvcmQudHlwZSA9IFwidGhyb3dcIjtcbiAgICAgICAgcmVjb3JkLmFyZyA9IGV4Y2VwdGlvbjtcbiAgICAgICAgY29udGV4dC5uZXh0ID0gbG9jO1xuXG4gICAgICAgIGlmIChjYXVnaHQpIHtcbiAgICAgICAgICAvLyBJZiB0aGUgZGlzcGF0Y2hlZCBleGNlcHRpb24gd2FzIGNhdWdodCBieSBhIGNhdGNoIGJsb2NrLFxuICAgICAgICAgIC8vIHRoZW4gbGV0IHRoYXQgY2F0Y2ggYmxvY2sgaGFuZGxlIHRoZSBleGNlcHRpb24gbm9ybWFsbHkuXG4gICAgICAgICAgY29udGV4dC5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgICBjb250ZXh0LmFyZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAhISBjYXVnaHQ7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcblxuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSBcInJvb3RcIikge1xuICAgICAgICAgIC8vIEV4Y2VwdGlvbiB0aHJvd24gb3V0c2lkZSBvZiBhbnkgdHJ5IGJsb2NrIHRoYXQgY291bGQgaGFuZGxlXG4gICAgICAgICAgLy8gaXQsIHNvIHNldCB0aGUgY29tcGxldGlvbiB2YWx1ZSBvZiB0aGUgZW50aXJlIGZ1bmN0aW9uIHRvXG4gICAgICAgICAgLy8gdGhyb3cgdGhlIGV4Y2VwdGlvbi5cbiAgICAgICAgICByZXR1cm4gaGFuZGxlKFwiZW5kXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYpIHtcbiAgICAgICAgICB2YXIgaGFzQ2F0Y2ggPSBoYXNPd24uY2FsbChlbnRyeSwgXCJjYXRjaExvY1wiKTtcbiAgICAgICAgICB2YXIgaGFzRmluYWxseSA9IGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIik7XG5cbiAgICAgICAgICBpZiAoaGFzQ2F0Y2ggJiYgaGFzRmluYWxseSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJldiA8IGVudHJ5LmNhdGNoTG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuY2F0Y2hMb2MsIHRydWUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0NhdGNoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2IDwgZW50cnkuY2F0Y2hMb2MpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZShlbnRyeS5jYXRjaExvYywgdHJ1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2UgaWYgKGhhc0ZpbmFsbHkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZXYgPCBlbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgICAgICAgIHJldHVybiBoYW5kbGUoZW50cnkuZmluYWxseUxvYyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIGFicnVwdDogZnVuY3Rpb24odHlwZSwgYXJnKSB7XG4gICAgICBmb3IgKHZhciBpID0gdGhpcy50cnlFbnRyaWVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMudHJ5RW50cmllc1tpXTtcbiAgICAgICAgaWYgKGVudHJ5LnRyeUxvYyA8PSB0aGlzLnByZXYgJiZcbiAgICAgICAgICAgIGhhc093bi5jYWxsKGVudHJ5LCBcImZpbmFsbHlMb2NcIikgJiZcbiAgICAgICAgICAgIHRoaXMucHJldiA8IGVudHJ5LmZpbmFsbHlMb2MpIHtcbiAgICAgICAgICB2YXIgZmluYWxseUVudHJ5ID0gZW50cnk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGZpbmFsbHlFbnRyeSAmJlxuICAgICAgICAgICh0eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICAgdHlwZSA9PT0gXCJjb250aW51ZVwiKSAmJlxuICAgICAgICAgIGZpbmFsbHlFbnRyeS50cnlMb2MgPD0gYXJnICYmXG4gICAgICAgICAgYXJnIDw9IGZpbmFsbHlFbnRyeS5maW5hbGx5TG9jKSB7XG4gICAgICAgIC8vIElnbm9yZSB0aGUgZmluYWxseSBlbnRyeSBpZiBjb250cm9sIGlzIG5vdCBqdW1waW5nIHRvIGFcbiAgICAgICAgLy8gbG9jYXRpb24gb3V0c2lkZSB0aGUgdHJ5L2NhdGNoIGJsb2NrLlxuICAgICAgICBmaW5hbGx5RW50cnkgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVjb3JkID0gZmluYWxseUVudHJ5ID8gZmluYWxseUVudHJ5LmNvbXBsZXRpb24gOiB7fTtcbiAgICAgIHJlY29yZC50eXBlID0gdHlwZTtcbiAgICAgIHJlY29yZC5hcmcgPSBhcmc7XG5cbiAgICAgIGlmIChmaW5hbGx5RW50cnkpIHtcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcIm5leHRcIjtcbiAgICAgICAgdGhpcy5uZXh0ID0gZmluYWxseUVudHJ5LmZpbmFsbHlMb2M7XG4gICAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5jb21wbGV0ZShyZWNvcmQpO1xuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogZnVuY3Rpb24ocmVjb3JkLCBhZnRlckxvYykge1xuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcInRocm93XCIpIHtcbiAgICAgICAgdGhyb3cgcmVjb3JkLmFyZztcbiAgICAgIH1cblxuICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImJyZWFrXCIgfHxcbiAgICAgICAgICByZWNvcmQudHlwZSA9PT0gXCJjb250aW51ZVwiKSB7XG4gICAgICAgIHRoaXMubmV4dCA9IHJlY29yZC5hcmc7XG4gICAgICB9IGVsc2UgaWYgKHJlY29yZC50eXBlID09PSBcInJldHVyblwiKSB7XG4gICAgICAgIHRoaXMucnZhbCA9IHRoaXMuYXJnID0gcmVjb3JkLmFyZztcbiAgICAgICAgdGhpcy5tZXRob2QgPSBcInJldHVyblwiO1xuICAgICAgICB0aGlzLm5leHQgPSBcImVuZFwiO1xuICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIiAmJiBhZnRlckxvYykge1xuICAgICAgICB0aGlzLm5leHQgPSBhZnRlckxvYztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgfSxcblxuICAgIGZpbmlzaDogZnVuY3Rpb24oZmluYWxseUxvYykge1xuICAgICAgZm9yICh2YXIgaSA9IHRoaXMudHJ5RW50cmllcy5sZW5ndGggLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLnRyeUVudHJpZXNbaV07XG4gICAgICAgIGlmIChlbnRyeS5maW5hbGx5TG9jID09PSBmaW5hbGx5TG9jKSB7XG4gICAgICAgICAgdGhpcy5jb21wbGV0ZShlbnRyeS5jb21wbGV0aW9uLCBlbnRyeS5hZnRlckxvYyk7XG4gICAgICAgICAgcmVzZXRUcnlFbnRyeShlbnRyeSk7XG4gICAgICAgICAgcmV0dXJuIENvbnRpbnVlU2VudGluZWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgXCJjYXRjaFwiOiBmdW5jdGlvbih0cnlMb2MpIHtcbiAgICAgIGZvciAodmFyIGkgPSB0aGlzLnRyeUVudHJpZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgdmFyIGVudHJ5ID0gdGhpcy50cnlFbnRyaWVzW2ldO1xuICAgICAgICBpZiAoZW50cnkudHJ5TG9jID09PSB0cnlMb2MpIHtcbiAgICAgICAgICB2YXIgcmVjb3JkID0gZW50cnkuY29tcGxldGlvbjtcbiAgICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwidGhyb3dcIikge1xuICAgICAgICAgICAgdmFyIHRocm93biA9IHJlY29yZC5hcmc7XG4gICAgICAgICAgICByZXNldFRyeUVudHJ5KGVudHJ5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRocm93bjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBUaGUgY29udGV4dC5jYXRjaCBtZXRob2QgbXVzdCBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgbG9jYXRpb25cbiAgICAgIC8vIGFyZ3VtZW50IHRoYXQgY29ycmVzcG9uZHMgdG8gYSBrbm93biBjYXRjaCBibG9jay5cbiAgICAgIHRocm93IG5ldyBFcnJvcihcImlsbGVnYWwgY2F0Y2ggYXR0ZW1wdFwiKTtcbiAgICB9LFxuXG4gICAgZGVsZWdhdGVZaWVsZDogZnVuY3Rpb24oaXRlcmFibGUsIHJlc3VsdE5hbWUsIG5leHRMb2MpIHtcbiAgICAgIHRoaXMuZGVsZWdhdGUgPSB7XG4gICAgICAgIGl0ZXJhdG9yOiB2YWx1ZXMoaXRlcmFibGUpLFxuICAgICAgICByZXN1bHROYW1lOiByZXN1bHROYW1lLFxuICAgICAgICBuZXh0TG9jOiBuZXh0TG9jXG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5tZXRob2QgPT09IFwibmV4dFwiKSB7XG4gICAgICAgIC8vIERlbGliZXJhdGVseSBmb3JnZXQgdGhlIGxhc3Qgc2VudCB2YWx1ZSBzbyB0aGF0IHdlIGRvbid0XG4gICAgICAgIC8vIGFjY2lkZW50YWxseSBwYXNzIGl0IG9uIHRvIHRoZSBkZWxlZ2F0ZS5cbiAgICAgICAgdGhpcy5hcmcgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBDb250aW51ZVNlbnRpbmVsO1xuICAgIH1cbiAgfTtcblxuICAvLyBSZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhpcyBzY3JpcHQgaXMgZXhlY3V0aW5nIGFzIGEgQ29tbW9uSlMgbW9kdWxlXG4gIC8vIG9yIG5vdCwgcmV0dXJuIHRoZSBydW50aW1lIG9iamVjdCBzbyB0aGF0IHdlIGNhbiBkZWNsYXJlIHRoZSB2YXJpYWJsZVxuICAvLyByZWdlbmVyYXRvclJ1bnRpbWUgaW4gdGhlIG91dGVyIHNjb3BlLCB3aGljaCBhbGxvd3MgdGhpcyBtb2R1bGUgdG8gYmVcbiAgLy8gaW5qZWN0ZWQgZWFzaWx5IGJ5IGBiaW4vcmVnZW5lcmF0b3IgLS1pbmNsdWRlLXJ1bnRpbWUgc2NyaXB0LmpzYC5cbiAgcmV0dXJuIGV4cG9ydHM7XG5cbn0oXG4gIC8vIElmIHRoaXMgc2NyaXB0IGlzIGV4ZWN1dGluZyBhcyBhIENvbW1vbkpTIG1vZHVsZSwgdXNlIG1vZHVsZS5leHBvcnRzXG4gIC8vIGFzIHRoZSByZWdlbmVyYXRvclJ1bnRpbWUgbmFtZXNwYWNlLiBPdGhlcndpc2UgY3JlYXRlIGEgbmV3IGVtcHR5XG4gIC8vIG9iamVjdC4gRWl0aGVyIHdheSwgdGhlIHJlc3VsdGluZyBvYmplY3Qgd2lsbCBiZSB1c2VkIHRvIGluaXRpYWxpemVcbiAgLy8gdGhlIHJlZ2VuZXJhdG9yUnVudGltZSB2YXJpYWJsZSBhdCB0aGUgdG9wIG9mIHRoaXMgZmlsZS5cbiAgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiA/IG1vZHVsZS5leHBvcnRzIDoge31cbikpO1xuXG50cnkge1xuICByZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xufSBjYXRjaCAoYWNjaWRlbnRhbFN0cmljdE1vZGUpIHtcbiAgLy8gVGhpcyBtb2R1bGUgc2hvdWxkIG5vdCBiZSBydW5uaW5nIGluIHN0cmljdCBtb2RlLCBzbyB0aGUgYWJvdmVcbiAgLy8gYXNzaWdubWVudCBzaG91bGQgYWx3YXlzIHdvcmsgdW5sZXNzIHNvbWV0aGluZyBpcyBtaXNjb25maWd1cmVkLiBKdXN0XG4gIC8vIGluIGNhc2UgcnVudGltZS5qcyBhY2NpZGVudGFsbHkgcnVucyBpbiBzdHJpY3QgbW9kZSwgaW4gbW9kZXJuIGVuZ2luZXNcbiAgLy8gd2UgY2FuIGV4cGxpY2l0bHkgYWNjZXNzIGdsb2JhbFRoaXMuIEluIG9sZGVyIGVuZ2luZXMgd2UgY2FuIGVzY2FwZVxuICAvLyBzdHJpY3QgbW9kZSB1c2luZyBhIGdsb2JhbCBGdW5jdGlvbiBjYWxsLiBUaGlzIGNvdWxkIGNvbmNlaXZhYmx5IGZhaWxcbiAgLy8gaWYgYSBDb250ZW50IFNlY3VyaXR5IFBvbGljeSBmb3JiaWRzIHVzaW5nIEZ1bmN0aW9uLCBidXQgaW4gdGhhdCBjYXNlXG4gIC8vIHRoZSBwcm9wZXIgc29sdXRpb24gaXMgdG8gZml4IHRoZSBhY2NpZGVudGFsIHN0cmljdCBtb2RlIHByb2JsZW0uIElmXG4gIC8vIHlvdSd2ZSBtaXNjb25maWd1cmVkIHlvdXIgYnVuZGxlciB0byBmb3JjZSBzdHJpY3QgbW9kZSBhbmQgYXBwbGllZCBhXG4gIC8vIENTUCB0byBmb3JiaWQgRnVuY3Rpb24sIGFuZCB5b3UncmUgbm90IHdpbGxpbmcgdG8gZml4IGVpdGhlciBvZiB0aG9zZVxuICAvLyBwcm9ibGVtcywgcGxlYXNlIGRldGFpbCB5b3VyIHVuaXF1ZSBwcmVkaWNhbWVudCBpbiBhIEdpdEh1YiBpc3N1ZS5cbiAgaWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSBcIm9iamVjdFwiKSB7XG4gICAgZ2xvYmFsVGhpcy5yZWdlbmVyYXRvclJ1bnRpbWUgPSBydW50aW1lO1xuICB9IGVsc2Uge1xuICAgIEZ1bmN0aW9uKFwiclwiLCBcInJlZ2VuZXJhdG9yUnVudGltZSA9IHJcIikocnVudGltZSk7XG4gIH1cbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuXHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgZGVmaW5pdGlvbikge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmosIHByb3ApIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApOyB9IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3R5cGVvZihvYmopIHtcbiAgXCJAYmFiZWwvaGVscGVycyAtIHR5cGVvZlwiO1xuXG4gIHJldHVybiBfdHlwZW9mID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgXCJzeW1ib2xcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID8gZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqO1xuICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgIHJldHVybiBvYmogJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBTeW1ib2wgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gIH0sIF90eXBlb2Yob2JqKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikge1xuICBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDtcblxuICBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIHtcbiAgICBhcnIyW2ldID0gYXJyW2ldO1xuICB9XG5cbiAgcmV0dXJuIGFycjI7XG59IiwiaW1wb3J0IGFycmF5TGlrZVRvQXJyYXkgZnJvbSBcIi4vYXJyYXlMaWtlVG9BcnJheS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikge1xuICBpZiAoIW8pIHJldHVybjtcbiAgaWYgKHR5cGVvZiBvID09PSBcInN0cmluZ1wiKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pO1xuICB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7XG4gIGlmIChuID09PSBcIk9iamVjdFwiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7XG4gIGlmIChuID09PSBcIk1hcFwiIHx8IG4gPT09IFwiU2V0XCIpIHJldHVybiBBcnJheS5mcm9tKG8pO1xuICBpZiAobiA9PT0gXCJBcmd1bWVudHNcIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIGFycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTtcbn0iLCJpbXBvcnQgYXJyYXlXaXRob3V0SG9sZXMgZnJvbSBcIi4vYXJyYXlXaXRob3V0SG9sZXMuanNcIjtcbmltcG9ydCBpdGVyYWJsZVRvQXJyYXkgZnJvbSBcIi4vaXRlcmFibGVUb0FycmF5LmpzXCI7XG5pbXBvcnQgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgZnJvbSBcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanNcIjtcbmltcG9ydCBub25JdGVyYWJsZVNwcmVhZCBmcm9tIFwiLi9ub25JdGVyYWJsZVNwcmVhZC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3RvQ29uc3VtYWJsZUFycmF5KGFycikge1xuICByZXR1cm4gYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB8fCBpdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIpIHx8IG5vbkl0ZXJhYmxlU3ByZWFkKCk7XG59IiwiaW1wb3J0IGFycmF5TGlrZVRvQXJyYXkgZnJvbSBcIi4vYXJyYXlMaWtlVG9BcnJheS5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2FycmF5V2l0aG91dEhvbGVzKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyYXlMaWtlVG9BcnJheShhcnIpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9pdGVyYWJsZVRvQXJyYXkoaXRlcikge1xuICBpZiAodHlwZW9mIFN5bWJvbCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBpdGVyW1N5bWJvbC5pdGVyYXRvcl0gIT0gbnVsbCB8fCBpdGVyW1wiQEBpdGVyYXRvclwiXSAhPSBudWxsKSByZXR1cm4gQXJyYXkuZnJvbShpdGVyKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfbm9uSXRlcmFibGVTcHJlYWQoKSB7XG4gIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gc3ByZWFkIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuXCIpO1xufSIsImZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHtcbiAgdHJ5IHtcbiAgICB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7XG4gICAgdmFyIHZhbHVlID0gaW5mby52YWx1ZTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZWplY3QoZXJyb3IpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChpbmZvLmRvbmUpIHtcbiAgICByZXNvbHZlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTtcblxuICAgICAgZnVuY3Rpb24gX25leHQodmFsdWUpIHtcbiAgICAgICAgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBcIm5leHRcIiwgdmFsdWUpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBfdGhyb3coZXJyKSB7XG4gICAgICAgIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgXCJ0aHJvd1wiLCBlcnIpO1xuICAgICAgfVxuXG4gICAgICBfbmV4dCh1bmRlZmluZWQpO1xuICAgIH0pO1xuICB9O1xufSIsImltcG9ydCBhcnJheVdpdGhIb2xlcyBmcm9tIFwiLi9hcnJheVdpdGhIb2xlcy5qc1wiO1xuaW1wb3J0IGl0ZXJhYmxlVG9BcnJheUxpbWl0IGZyb20gXCIuL2l0ZXJhYmxlVG9BcnJheUxpbWl0LmpzXCI7XG5pbXBvcnQgdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkgZnJvbSBcIi4vdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkuanNcIjtcbmltcG9ydCBub25JdGVyYWJsZVJlc3QgZnJvbSBcIi4vbm9uSXRlcmFibGVSZXN0LmpzXCI7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfc2xpY2VkVG9BcnJheShhcnIsIGkpIHtcbiAgcmV0dXJuIGFycmF5V2l0aEhvbGVzKGFycikgfHwgaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCB1bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShhcnIsIGkpIHx8IG5vbkl0ZXJhYmxlUmVzdCgpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIGFycjtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7XG4gIHZhciBfaSA9IGFyciA9PSBudWxsID8gbnVsbCA6IHR5cGVvZiBTeW1ib2wgIT09IFwidW5kZWZpbmVkXCIgJiYgYXJyW1N5bWJvbC5pdGVyYXRvcl0gfHwgYXJyW1wiQEBpdGVyYXRvclwiXTtcblxuICBpZiAoX2kgPT0gbnVsbCkgcmV0dXJuO1xuICB2YXIgX2FyciA9IFtdO1xuICB2YXIgX24gPSB0cnVlO1xuICB2YXIgX2QgPSBmYWxzZTtcblxuICB2YXIgX3MsIF9lO1xuXG4gIHRyeSB7XG4gICAgZm9yIChfaSA9IF9pLmNhbGwoYXJyKTsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgX2QgPSB0cnVlO1xuICAgIF9lID0gZXJyO1xuICB9IGZpbmFsbHkge1xuICAgIHRyeSB7XG4gICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdICE9IG51bGwpIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIF9hcnI7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX25vbkl0ZXJhYmxlUmVzdCgpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2UuXFxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLlwiKTtcbn0iLCIvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5leHBvcnQgY29uc3QgQ09PS0lFX05BTUUgPSBcIl9nYVwiO1xuLy8gVE9ETyByZXZlcnQgdGhlIGZvbGxvd2luZyBzdGFnaW5nIGVudiBjaGVjayBhZnRlciBtb3ZpbmcgdG8gbmV3IGJyYW5jaCBzdHJ1Y3R1cmVcbmV4cG9ydCBjb25zdCBUUkVBVE1FTlRTX0xPQ0FUSU9OID0gd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCJzdGFnaW5nLnZpdmVuc2VcIikgPyBcImh0dHBzOi8vbmR2aXZlbnNlLmdsb3YuYWkvdHJlYXRtZW50c19zdGFnaW5nLmpzb25cIiA6IFwiaHR0cHM6Ly9ob3N0LWI5Ni5wYWdlcy5kZXYvdHJlYXRtZW50cy5qc29uXCI7XG5leHBvcnQgY29uc3QgU1RZTEVTSEVFVF9MT0NBVElPTiA9IFwiaHR0cHM6Ly9ob3N0LWI5Ni5wYWdlcy5kZXYvbmQtc3R5bGVzLmNzc1wiO1xuZXhwb3J0IGNvbnN0IExPR19BUElfVVJMID0gXCJodHRwczovL2V1cm9wZS13ZXN0My1uZXh0ZGF5LTM0ZWIzLmNsb3VkZnVuY3Rpb25zLm5ldC9hcGkvbG9nUmVzcG9uc2VcIjtcbmV4cG9ydCBjb25zdCBNT0JJTEVfTUVESUFfUVVFUlkgPSBcIihtYXgtd2lkdGg6IDQ0MHB4KVwiO1xuZXhwb3J0IGNvbnN0IFNQTElUX1JBVElPID0gOTA7XG5leHBvcnQgY29uc3QgVFJFQVRNRU5UU19EVVJBVElPTiA9IDE7XG5cbmV4cG9ydCBjb25zdCBTRVNTSU9OX1NUT1JBR0VfS0VZUyA9IHtcbiAgU0VTU0lPTl9JRDogXCJfX25leHRkYXlfc2Vzc2lvbl9pZFwiLFxuICBQQUdFX1ZJRVdTOiBcIk5EX1BhZ2VWaWV3c1wiLFxuICBTRVNTSU9OX1RJTUVTVEFNUDogXCJORF9TZXNzaW9uVGltZXN0YW1wXCIsXG4gIFBPUFVQX0RJU1BMQVlfRkxBRzogXCJORF9Qb3B1cERpc3BsYXlGbGFnXCIsXG59O1xuZXhwb3J0IGNvbnN0IExPQ0FMX1NUT1JBR0VfS0VZUyA9IHtcbiAgVFJFQVRNRU5UUzogXCJORF9UcmVhdG1lbnRzXCIsXG4gIENPVVBPTl9BUFBMSUNBQkxFX0JBU0tFVF9QUklDRTogXCJORF9DQUJhc2tldFByaWNlXCIsXG4gIE5EX0RFQlVHX01PREU6IFwiTkRfRGVidWdcIixcbn07XG5cbi8vIGV4cG9ydCBjb25zdCBFUFNJTE9OID0gMC4xO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn0iLCJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgIGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtcbiAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQ29uc3RydWN0b3IsIFwicHJvdG90eXBlXCIsIHtcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSk7XG4gIHJldHVybiBDb25zdHJ1Y3Rvcjtcbn0iLCJpbXBvcnQge0xPQ0FMX1NUT1JBR0VfS0VZU30gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5jbGFzcyBMb2dnZXIge1xuICBjb25zdHJ1Y3RvcihvcmlnaW4gPSBcIk5leHRkYXkgQ2xpZW50IFNES1wiKSB7XG4gICAgdGhpcy5vcmlnaW4gPSBvcmlnaW47XG4gICAgdGhpcy5ERUJVRyA9IHRydWU7XG4gIH1cblxuICBpbmZvKC4uLmFyZ3MpIHtcbiAgICBjb25zdCB7b3JpZ2lufSA9IHRoaXM7XG4gICAgY29uc29sZS5pbmZvKGBbJHtvcmlnaW59XWAsIC4uLmFyZ3MpO1xuICB9XG5cbiAgbG9nKC4uLmFyZ3MpIHtcbiAgICBjb25zdCB7REVCVUcsIG9yaWdpbn0gPSB0aGlzO1xuICAgIGlmIChERUJVRykge1xuICAgICAgY29uc29sZS5sb2coYFske29yaWdpbn1dYCwgLi4uYXJncyk7XG4gICAgfVxuICB9XG5cbiAgZXJyb3IoLi4uYXJncykge1xuICAgIGNvbnN0IHtvcmlnaW59ID0gdGhpcztcbiAgICBjb25zb2xlLmVycm9yKGBbJHtvcmlnaW59XWAsIC4uLmFyZ3MpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IExvZ2dlcjtcbiIsImltcG9ydCB7U0VTU0lPTl9TVE9SQUdFX0tFWVMsIFNUWUxFU0hFRVRfTE9DQVRJT04sIFRSRUFUTUVOVFNfTE9DQVRJT059IGZyb20gXCIuL2NvbnN0YW50c1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi9sb2dnZXJcIjtcblxuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIk5leHRkYXkgVXRpbHNcIik7XG5cbmlmICghKFwicmFuZG9tVVVJRFwiIGluIGNyeXB0bykpIHtcbiAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjMvMjgwMDIxOFxuICAvLyBMSUNFTlNFOiBodHRwczovL2NyZWF0aXZlY29tbW9ucy5vcmcvbGljZW5zZXMvYnktc2EvNC4wL2xlZ2FsY29kZVxuICB7XG4gICAgcmFuZG9tVVVJREZhbGxiYWNrKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHJlbW92ZURvY3VtZW50SGlkZSA9ICgpID0+IHtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJuZXh0RGF5LWhpZGVcIik7XG59O1xuXG5leHBvcnQgY29uc3QgZmV0Y2hUcmVhdG1lbnRzID0gYXN5bmMgKCkgPT4ge1xuICBsb2dnZXIubG9nKFwiRmV0Y2hpbmcgdHJlYXRtZW50c1wiKTtcbiAgY29uc3QgdHJlYXRtZW50cyA9IGF3YWl0IGZldGNoKFRSRUFUTUVOVFNfTE9DQVRJT04pO1xuICByZXR1cm4gYXdhaXQgdHJlYXRtZW50cy5qc29uKCk7XG59O1xuXG5leHBvcnQgY29uc3QgZXh0cmFjdENvb2tpZUlkZW50aWZpZXIgPSAoY29va2llU3RyaW5nLCBjb29raWVOYW1lKSA9PiB7XG4gIGlmICghY29va2llU3RyaW5nKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb25zdCBwYXJzZWQgPSBjb29raWVTdHJpbmdcbiAgICAgIC5zcGxpdChcIjtcIilcbiAgICAgIC5tYXAoKHYpID0+IHYuc3BsaXQoXCI9XCIpKVxuICAgICAgLnJlZHVjZSgoYWNjLCB2KSA9PiB7XG4gICAgICAgIGlmICh2WzBdICYmIHZbMV0pIHtcbiAgICAgICAgICBhY2NbZGVjb2RlVVJJQ29tcG9uZW50KHZbMF0udHJpbSgpKV0gPSBkZWNvZGVVUklDb21wb25lbnQodlsxXS50cmltKCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LCB7fSk7XG5cbiAgbGV0IGlkZW50aWZpZXIgPSBwYXJzZWRbY29va2llTmFtZV07XG4gIGlmICghaWRlbnRpZmllcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGlmIChjb29raWVOYW1lID09PSBcIl9nYVwiKSB7XG4gICAgLy8gZXh0cmFjdCB1bmlxdWUgaWRlbnRpZmllciBmcm9tIEdBIGNvb2tpZVxuICAgIGNvbnN0IGlkZW50aWZpZXJJbmRleCA9IDI7XG4gICAgaWRlbnRpZmllciA9IGlkZW50aWZpZXIuc3BsaXQoXCIuXCIpW2lkZW50aWZpZXJJbmRleF07XG4gIH1cbiAgcmV0dXJuIGlkZW50aWZpZXI7XG59O1xuXG5leHBvcnQgY29uc3QgcGFyc2VDb29raWUgPSBhc3luYyAoaWRlbnRpZmllcikgPT4ge1xuICBpZiAoIWlkZW50aWZpZXIpIHtcbiAgICByZXR1cm4gLTE7XG4gIH1cbiAgLy8gZW5jb2RlIHN0cmluZyB0byBhbiBhcnJheSBvZiA4LWJpdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlc1xuICBjb25zdCBjb29raWVFbmNvZGVkID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGlkZW50aWZpZXIpO1xuXG4gIC8vIGhhc2ggdGhlIGVuY29kZWQgY29va2llIGludG8gYSBidWZmZXJcbiAgY29uc3QgaGFzaEJ1ZmZlciA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTFcIiwgY29va2llRW5jb2RlZCk7XG5cbiAgLy8gY29udmVydCBidWZmZXIgdG8gYnl0ZSBhcnJheVxuICBjb25zdCBoYXNoQXJyYXkgPSBBcnJheS5mcm9tKG5ldyBVaW50OEFycmF5KGhhc2hCdWZmZXIpKTtcblxuICAvLyBjb252ZXJ0IGJ5dGVzIHRvIGhleCBzdHJpbmdcbiAgY29uc3QgY29va2llSGFzaCA9IGhhc2hBcnJheVxuICAgICAgLm1hcCgoYikgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgXCIwXCIpKVxuICAgICAgLmpvaW4oXCJcIik7XG5cbiAgLy8gTWFwIHRoZSBjb29raWUgaGFzaCB0byBhIG51bWJlciBiZXR3ZWVuIDAgLT4gOTksXG4gIC8vIHRoaXMgbnVtYmVyIGlzIHRoZSBvblJhdGlvblxuICBjb25zdCBoYXNoTnVtYmVyID0gcGFyc2VJbnQoY29va2llSGFzaC5zdWJzdHJpbmcoMCwgOCksIDE2KTtcblxuICByZXR1cm4gaGFzaE51bWJlciAlIDEwMDtcbn07XG5cbmV4cG9ydCBjb25zdCBleGl0U2Nyb2xsTGlzdGVuZXIgPSAoY2FsbEJhY2spID0+IHtcbiAgY29uc3QgbG9vcCA9ICgpID0+IHtcbiAgICBjb25zdCBzY3JvbGxUb3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wO1xuICAgIGlmIChsYXN0U2Nyb2xsVG9wIC0gNDAwID4gc2Nyb2xsVG9wKSB7XG4gICAgICBjbGVhckludGVydmFsKGV4aXRTY3JvbGxJbnRlcnZhbCk7XG4gICAgICBjYWxsQmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYXN0U2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfTtcblxuICBsZXQgbGFzdFNjcm9sbFRvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3A7XG4gIGNvbnN0IGV4aXRTY3JvbGxJbnRlcnZhbCA9IHNldEludGVydmFsKGxvb3AsIDUwMCk7XG59O1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXBwbHkgdHJlYXRtZW50cyB0byB0aGUgcGFnZSBvbiBzcGVjaWZpYyBtZWRpYSB0eXBlLlxuICogQHBhcmFtIHtNZWRpYVF1ZXJ5TGlzdH0gbWVkaWFRdWVyeUNvbmRpdGlvbiB3aW5kb3cubWF0Y2hNZWRpYShcIihtYXgtd2lkdGg6IDUwMHB4KVwiKVxuICogQHBhcmFtIHtET01Ob2RlTGlzdCB9IGVsZW1lbnRzIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJkaXYucHJvZHVjdF9pbmZvXCIpXG4gKiBAcGFyYW0ge09iamVjdH0gc3R5bGVDaGFuZ2VzTWFwIHsgXCJtYXJnaW4tdG9wXCIgOiBcIjEwcmVtXCJ9XG4gKiBAcmV0dXJuc1xuICovXG5leHBvcnQgY29uc3Qgc3R5bGVBcHBsaWNhdG9yID0gKGVsZW1lbnRzLCBzdHlsZUNoYW5nZXNNYXApID0+IHtcbiAgbG9nZ2VyLmxvZyhcIkFwcGx5aW5nIHN0eWxlIGNoYW5nZXNcIiwgc3R5bGVDaGFuZ2VzTWFwLCBcInRvIGVsZW1lbnRzXCIsIGVsZW1lbnRzKTtcbiAgZm9yIChsZXQgaT0wOyBpPGVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgZWxlbWVudCA9IGVsZW1lbnRzW2ldO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHN0eWxlQ2hhbmdlc01hcCkpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGVba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGluamVjdFN0eWxlU2hlZXQgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IHN0eWxlU2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcbiAgc3R5bGVTaGVldC5yZWwgPSBcInN0eWxlc2hlZXRcIjtcbiAgc3R5bGVTaGVldC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuICBzdHlsZVNoZWV0LmhyZWYgPSBTVFlMRVNIRUVUX0xPQ0FUSU9OO1xuICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpO1xufTtcblxuZXhwb3J0IGNvbnN0IHByZXBhcmVBY3Rpb25zID0gKGFjdGlvbnNUb1ByZXBhcmUsIHN1YlZhcmlhbnRJZCkgPT4ge1xuICBjb25zdCBhY3Rpb25zID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhY3Rpb25zVG9QcmVwYXJlKSk7XG4gIGZvciAoY29uc3QgYWN0aW9uIG9mIGFjdGlvbnMpIHtcbiAgICBjb25zdCB7c3ViVmFyaWFudHN9ID0gYWN0aW9uO1xuICAgIGlmICghc3ViVmFyaWFudHMpIGNvbnRpbnVlO1xuICAgIGZvciAoY29uc3Qgc3ViVmFyaWFudCBvZiBzdWJWYXJpYW50cykge1xuICAgICAgaWYgKHN1YlZhcmlhbnQuaWQgPT09IHN1YlZhcmlhbnRJZCkge1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzdWJWYXJpYW50KSB7XG4gICAgICAgICAgaWYgKGtleSAhPT0gXCJpZFwiKSB7XG4gICAgICAgICAgICBhY3Rpb25ba2V5XSA9IHN1YlZhcmlhbnRba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjdGlvbnM7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBhY3Rpb25zO1xufTtcblxuZXhwb3J0IGNvbnN0IGluaXRpYXRlU2Vzc2lvblN0b3JhZ2VzID0gKCkgPT4ge1xuICBjb25zdCB7UEFHRV9WSUVXUywgUE9QVVBfRElTUExBWV9GTEFHLCBTRVNTSU9OX0lELCBTRVNTSU9OX1RJTUVTVEFNUH0gPSBTRVNTSU9OX1NUT1JBR0VfS0VZUztcbiAgY29uc3QgcGFnZVZpZXdzID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShQQUdFX1ZJRVdTKTtcbiAgY29uc3QgcG9wdXBEaXNwbGF5RmxhZyA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUE9QVVBfRElTUExBWV9GTEFHKTtcbiAgY29uc3Qgc2Vzc2lvbklkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShTRVNTSU9OX0lEKTtcbiAgY29uc3Qgc2Vzc2lvblRpbWVzdGFtcCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oU0VTU0lPTl9USU1FU1RBTVApO1xuICBpZiAoIXBhZ2VWaWV3cykge1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUEFHRV9WSUVXUywgMSk7XG4gIH0gZWxzZSB7XG4gICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShQQUdFX1ZJRVdTLCBwYXJzZUludChwYWdlVmlld3MpICsgMSk7XG4gIH1cbiAgaWYgKHBvcHVwRGlzcGxheUZsYWcgPT09IG51bGwpIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFBPUFVQX0RJU1BMQVlfRkxBRywgMCk7XG4gIH1cbiAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFNFU1NJT05fSUQsIGNyeXB0by5yYW5kb21VVUlEKCkpO1xuICB9XG4gIGlmICghc2Vzc2lvblRpbWVzdGFtcCkge1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oU0VTU0lPTl9USU1FU1RBTVAsIERhdGUubm93KCkpO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgY29uZGl0aW9uQ2hlY2tlciA9IChydW5UaW1lVmFsdWUsIGNvbmRpdGlvbiwgdmFsdWUpID0+IHtcbiAgaWYgKGNvbmRpdGlvbiA9PT0gXCJub3RFeGlzdFwiKSB7XG4gICAgaWYgKCFydW5UaW1lVmFsdWUpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgZG9lcyBub3QgZXhpc3RcIik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgZG9lcyBleGlzdFwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKHJ1blRpbWVWYWx1ZSA9PT0gbnVsbCB8fFxuICAgIHJ1blRpbWVWYWx1ZSA9PT0gdW5kZWZpbmVkIHx8XG4gICAgY29uZGl0aW9uID09PSBudWxsIHx8XG4gICAgY29uZGl0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogcnVuVGltZVZhbHVlIG9yIGNvbmRpdGlvbiBpcyBub3QgZGVmaW5lZFwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgc3dpdGNoIChjb25kaXRpb24pIHtcbiAgICBjYXNlIFwiZXhpc3RcIjpcbiAgICAgIGlmIChydW5UaW1lVmFsdWUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1zYXRpc2ZpZWQtIHRhcmdldCBkb2VzIGV4aXN0XCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtbm90IHNhdGlzZmllZC0gdGFyZ2V0IGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgXCJjb250YWluc1wiOlxuICAgICAgaWYgKHJ1blRpbWVWYWx1ZS5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1zYXRpc2ZpZWQtIHRhcmdldCBjb250YWlucyB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLW5vdCBzYXRpc2ZpZWQtIHRhcmdldCBkb2VzIG5vdCBjb250YWluIHZhbHVlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgXCJub3RDb250YWluc1wiOlxuICAgICAgaWYgKCFydW5UaW1lVmFsdWUuaW5jbHVkZXModmFsdWUpKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgZG9lcyBub3QgY29udGFpbiB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLW5vdCBzYXRpc2ZpZWQtIHRhcmdldCBjb250YWlucyB2YWx1ZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlIFwiZXF1YWxcIjpcbiAgICAgIGlmIChydW5UaW1lVmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgZXF1YWxzIHZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtbm90IHNhdGlzZmllZC0gdGFyZ2V0IGRvZXMgbm90IGVxdWFsIHZhbHVlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgXCJub3RFcXVhbFwiOlxuICAgICAgaWYgKHJ1blRpbWVWYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1zYXRpc2ZpZWQtIHRhcmdldCBkb2VzIG5vdCBlcXVhbCB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLW5vdCBzYXRpc2ZpZWQtIHRhcmdldCBlcXVhbHMgdmFsdWVcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgY2FzZSBcImdyZWF0ZXJUaGFuXCI6XG4gICAgICBpZiAocnVuVGltZVZhbHVlID4gdmFsdWUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1zYXRpc2ZpZWQtIHRhcmdldCBpcyBncmVhdGVyIHRoYW4gdmFsdWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgaXMgbm90IGdyZWF0ZXIgdGhhbiB2YWx1ZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlIFwibGVzc1RoYW5cIjpcbiAgICAgIGlmIChydW5UaW1lVmFsdWUgPCB2YWx1ZSkge1xuICAgICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLXNhdGlzZmllZC0gdGFyZ2V0IGlzIGxlc3MgdGhhbiB2YWx1ZVwiKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLW5vdCBzYXRpc2ZpZWQtIHRhcmdldCBpcyBub3QgbGVzcyB0aGFuIHZhbHVlXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIGNhc2UgXCJncmVhdGVyRXF1YWxzXCI6XG4gICAgICBpZiAocnVuVGltZVZhbHVlID49IHZhbHVlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtc2F0aXNmaWVkLSB0YXJnZXQgaXMgZ3JlYXRlciBvciBlcXVhbCB0aGFuIHZhbHVlXCIpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5sb2coXCJjb25kaXRpb25DaGVja2VyOiAtbm90IHNhdGlzZmllZC0gdGFyZ2V0IGlzIG5vdCBncmVhdGVyIG9yIGVxdWFsIHRoYW4gdmFsdWVcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgY2FzZSBcImxlc3NFcXVhbHNcIjpcbiAgICAgIGlmIChydW5UaW1lVmFsdWUgPD0gdmFsdWUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1zYXRpc2ZpZWQtIHRhcmdldCBpcyBsZXNzIG9yIGVxdWFsIHRoYW4gdmFsdWVcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgaXMgbm90IGxlc3Mgb3IgZXF1YWwgdGhhbiB2YWx1ZVwiKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjYXNlIFwiYmV0d2VlblwiOiB7XG4gICAgICBsZXQgW21pbiwgbWF4XSA9IHZhbHVlLnNwbGl0KFwiLFwiKTtcbiAgICAgIG1pbiA9IHBhcnNlSW50KG1pbik7XG4gICAgICBtYXggPSBwYXJzZUludChtYXgpO1xuICAgICAgaWYgKHJ1blRpbWVWYWx1ZSA+PSBtaW4gJiYgcnVuVGltZVZhbHVlIDw9IG1heCkge1xuICAgICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogLXNhdGlzZmllZC0gdGFyZ2V0IGlzIGJldHdlZW4gbWluIGFuZCBtYXhcIik7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcImNvbmRpdGlvbkNoZWNrZXI6IC1ub3Qgc2F0aXNmaWVkLSB0YXJnZXQgaXMgbm90IGJldHdlZW4gbWluIGFuZCBtYXhcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICBsb2dnZXIubG9nKFwiY29uZGl0aW9uQ2hlY2tlcjogY29uZGl0aW9uIGlzIG5vdCBkZWZpbmVkIFwiLCBjb25kaXRpb24pO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcmFuZG9tVVVJREZhbGxiYWNrID0gKCkgPT4ge1xuICBjcnlwdG8ucmFuZG9tVVVJRCA9IGZ1bmN0aW9uIHJhbmRvbVVVSUQoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIFsxZTddKy0xZTMrLTRlMystOGUzKy0xZTExKS5yZXBsYWNlKC9bMDE4XS9nLFxuICAgICAgICAoYykgPT4gKGMgXiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEpKVswXSAmIDE1ID4+IGMgLyA0KS50b1N0cmluZygxNiksXG4gICAgKTtcbiAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb21wYXJlT2JqZWN0cyA9IChvYmoxLCBvYmoyKSA9PiB7XG4gIGlmIChvYmoxID09PSBvYmoyKSByZXR1cm4gdHJ1ZTtcblxuICBpZiAoXG4gICAgdHlwZW9mIG9iajEgIT09IFwib2JqZWN0XCIgfHxcbiAgICAgIHR5cGVvZiBvYmoyICE9PSBcIm9iamVjdFwiIHx8XG4gICAgICBvYmoxID09IG51bGwgfHxcbiAgICAgIG9iajIgPT0gbnVsbFxuICApIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBjb25zdCBrZXlzQSA9IE9iamVjdC5rZXlzKG9iajEpO1xuICBjb25zdCBrZXlzQiA9IE9iamVjdC5rZXlzKG9iajIpO1xuXG4gIGlmIChrZXlzQS5sZW5ndGggIT09IGtleXNCLmxlbmd0aCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxldCByZXN1bHQgPSB0cnVlO1xuXG4gIGtleXNBLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmICgha2V5c0IuaW5jbHVkZXMoa2V5KSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIG9iajFba2V5XSA9PT0gXCJmdW5jdGlvblwiIHx8XG4gICAgICAgICAgdHlwZW9mIG9iajJba2V5XSA9PT0gXCJmdW5jdGlvblwiXG4gICAgKSB7XG4gICAgICBpZiAob2JqMVtrZXldLnRvU3RyaW5nKCkgIT09IG9iajJba2V5XS50b1N0cmluZygpKSB7XG4gICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY29tcGFyZU9iamVjdHMob2JqMVtrZXldLCBvYmoyW2tleV0pKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgZGVsYXkgPSBtcyA9PiBuZXcgUHJvbWlzZShyZXMgPT4gc2V0VGltZW91dChyZXMsIG1zKSk7XG4iLCJpbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBEYXRhTGF5ZXIgQ2hlY2tlclwiKTtcblxuZXhwb3J0IGNvbnN0IGNoZWNrRGF0YUxheWVyUnVsZSA9IChydWxlKSA9PntcbiAgbG9nZ2VyLmxvZyhcIkNoZWNraW5nIHJ1bGVcIiwgSlNPTi5zdHJpbmdpZnkocnVsZSkpO1xuICBjb25zdCB7b3BlcmF0b3IsIGNvbmRpdGlvbiwgdmFsdWV9ID0gcnVsZTtcbiAgY29uc3QgcnVudGltZVZhbHVlID0gZGF0YUxheWVyRmluZGVyKG9wZXJhdG9yKTtcbiAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIocnVudGltZVZhbHVlLCBjb25kaXRpb24sIHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBkYXRhTGF5ZXJGaW5kZXIgPSAoa2V5KSA9PiB7XG4gIGxvZ2dlci5sb2coXCJTZWFyY2hpbmcgZGF0YUxheWVyIGZvciBrZXlcIiwga2V5KTtcbiAgZm9yIChjb25zdCBvYmogb2Ygd2luZG93LmRhdGFMYXllcikge1xuICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuICAgIGlmIChrZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIGxvZ2dlci5sb2coYEZvdW5kIGtleSAke2tleX0gd2l0aCB2YWx1ZSAke29ialtrZXldfWApO1xuICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH1cbiAgfVxuICBsb2dnZXIubG9nKGBLZXkgJHtrZXl9IG5vdCBmb3VuZCBpbiBkYXRhTGF5ZXJgKTtcbiAgcmV0dXJuIG51bGw7XG59O1xuIiwiLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuaW1wb3J0IHtleGl0U2Nyb2xsTGlzdGVuZXIsIHN0eWxlQXBwbGljYXRvciwgZGVsYXl9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IHtNT0JJTEVfTUVESUFfUVVFUlksIFNFU1NJT05fU1RPUkFHRV9LRVlTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge2RhdGFMYXllckZpbmRlcn0gZnJvbSBcIi4uL05leHRkYXlSdWxlRW5naW5lL2RhdGFMYXllckNoZWNrZXJcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuXG5hc3luYyBmdW5jdGlvbiBhcHBseVRyZWF0bWVudHModHJlYXRtZW50cywgb2JzZXJ2ZXIgPSBmYWxzZSkge1xuICAvLyBHQSBzY3JpcHQgaW5qZWN0aW9uIG9uIGhvbGQgZm9yIHRpbWUgYmVpbmdcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgLy8gY29uc3QgZ2FTY3JpcHQgPSBcIjxzY3JpcHQ+d2luZG93LmRhdGFMYXllcj13aW5kb3cuZGF0YUxheWVyfHxbXTtkYXRhTGF5ZXIucHVzaCh7ZXZlbnQ6J0dMT1YnLEdMT1ZfT046J3RydWUnLHRyZWF0bWVudF9pZHM6J05BJ30pOzwvc2NyaXB0PlwiO1xuXG4gIC8vIGNvbnN0IGluamVjdEdhU2NyaXB0ID0gKHRyZWF0bWVudExpc3QpID0+IHtcbiAgLy8gICBjb25zdCB0cmVhdG1lbnRJZHMgPSB0cmVhdG1lbnRMaXN0LnJlZHVjZSgoaWRzLCB0cmVhdG1lbnQpID0+IHtcbiAgLy8gICAgIGlmICh0cmVhdG1lbnQuaWQgIT09IC0xKSBpZHMucHVzaCh0cmVhdG1lbnQuaWQudG9TdHJpbmcoKSk7XG4gIC8vICAgICByZXR1cm4gaWRzO1xuICAvLyAgIH0sIFtdKTtcbiAgLy8gICBpZiAodHJlYXRtZW50SWRzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gIC8vICAgJChcImhlYWRcIikuYXBwZW5kKGdhU2NyaXB0LnJlcGxhY2UoXCJOQVwiLCB0cmVhdG1lbnRJZHMpKTtcbiAgLy8gfTtcblxuICBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBBcHBseSBUcmVhdG1lbnRzXCIpO1xuICBjb25zdCB7UE9QVVBfRElTUExBWV9GTEFHfSA9IFNFU1NJT05fU1RPUkFHRV9LRVlTO1xuXG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gZnVuY3Rpb24gdHJhbnNmb3JtZXIodHJlYXRtZW50KSB7XG4gICAgbG9nZ2VyLmxvZyhcIkFwcGx5aW5nIHRyZWF0bWVudDogXCIsIEpTT04uc3RyaW5naWZ5KHRyZWF0bWVudCkpO1xuICAgIGNvbnN0IHtcbiAgICAgIG9wZXJhdG9yLFxuICAgICAgdHlwZSxcbiAgICAgIGFwcGx5RXZlbnQsXG4gICAgICBjb250ZW50U2VsZWN0b3IsXG4gICAgICBzZWxlY3RvcixcbiAgICAgIHNlbGVjdG9yRmFsbGJhY2ssXG4gICAgICBtZENvbmRpdGlvbixcbiAgICAgIG1vdmVfc2VsZWN0b3JfMSxcbiAgICAgIG1vdmVfc2VsZWN0b3JfMixcbiAgICAgIHJlcGxhY2VGbixcbiAgICB9ID0gdHJlYXRtZW50O1xuICAgIGxldCB7dmFsdWV9ID0gdHJlYXRtZW50O1xuICAgIGxldCBlbGVtZW50ID0gJChzZWxlY3Rvcik7XG5cbiAgICBjb25zdCBtYyA9IG1kQ29uZGl0aW9uID8gd2luZG93Lm1hdGNoTWVkaWEobWRDb25kaXRpb24pLm1hdGNoZXMgOiB0cnVlO1xuICAgIGlmICghbWMpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJNZWRpYSBjb25kaXRpb24gbWlzbWF0Y2g6IFwiLCBtZENvbmRpdGlvbik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICgobW92ZV9zZWxlY3Rvcl8xICYmICFtb3ZlX3NlbGVjdG9yXzIpIHx8IChtb3ZlX3NlbGVjdG9yXzIgJiYgIW1vdmVfc2VsZWN0b3JfMSkpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJCb3RoIG1vdmUgc2VsZWN0b3JzIGFyZSByZXF1aXJlZFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG1vdmVfc2VsZWN0b3JfMSAmJiBtb3ZlX3NlbGVjdG9yXzIpIHtcbiAgICAgIGlmICghJChtb3ZlX3NlbGVjdG9yXzEpLmxlbmd0aCkge1xuICAgICAgICBsb2dnZXIubG9nKFwiTW92ZSBzZWxlY3RvciAxIG5vdCBmb3VuZDogXCIsIG1vdmVfc2VsZWN0b3JfMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICghJChtb3ZlX3NlbGVjdG9yXzIpLmxlbmd0aCkge1xuICAgICAgICBsb2dnZXIubG9nKFwiTW92ZSBzZWxlY3RvciAyIG5vdCBmb3VuZDogXCIsIG1vdmVfc2VsZWN0b3JfMik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgbG9nZ2VyLmxvZyhcIlNlbGVjdG9yIG5vdCBzcGVjaWZpZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghZWxlbWVudC5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHNlbGVjdG9yICE9PSBcIm5vLXNlbGVjdG9yXCIpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKFwiU2VsZWN0b3Igbm90IGZvdW5kOiBcIiwgc2VsZWN0b3IpO1xuICAgICAgICAgIGxvZ2dlci5sb2coXCJUcnlpbmcgZmFsbGJhY2sgc2VsZWN0b3I6IFwiLCBzZWxlY3RvckZhbGxiYWNrKTtcbiAgICAgICAgICBpZiAoc2VsZWN0b3JGYWxsYmFjaykgZWxlbWVudCA9ICQoc2VsZWN0b3JGYWxsYmFjayk7XG4gICAgICAgICAgaWYgKCFlbGVtZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgbG9nZ2VyLmxvZyhcIkZhbGxiYWNrIHNlbGVjdG9yIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZXBsYWNlRm5FeGVjdXRvciA9IChyZXBsYWNlRm4sIHZhbHVlKSA9PiB7XG4gICAgICBpZiAocmVwbGFjZUZuICYmIHZhbHVlLmluY2x1ZGVzKFwie3tSRVBMQUNFfX1cIikpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIkV4ZWN1dGluZyByZXBsYWNlIGZ1bmN0aW9uOiBcIiwgcmVwbGFjZUZuKTtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IHtcbiAgICAgICAgICBkYXRhTGF5ZXJGaW5kZXIsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHJlcGxhY2VGdW5jdGlvbiA9IEZ1bmN0aW9uKHJlcGxhY2VGbikuYmluZChjb250ZXh0KTtcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlQWxsKFwie3tSRVBMQUNFfX1cIiwgcmVwbGFjZUZ1bmN0aW9uKCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHZhbHVlLmZvckVhY2goKHZhbCwgaSkgPT4ge1xuICAgICAgICBjb25zdCBjdXJyZW50UmVwbGFjZUZuID0gcmVwbGFjZUZuID8gcmVwbGFjZUZuW2ldIHx8IHJlcGxhY2VGbiA6IFwiXCI7XG4gICAgICAgIHZhbHVlW2ldID0gcmVwbGFjZUZuRXhlY3V0b3IoY3VycmVudFJlcGxhY2VGbiwgdmFsKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZSA9IHJlcGxhY2VGbkV4ZWN1dG9yKHJlcGxhY2VGbiwgdmFsdWUpO1xuICAgIH1cblxuXG4gICAgaWYgKG9wZXJhdG9yID09PSBcInJlbW92ZVwiKSB7XG4gICAgICBpZiAoZWxlbWVudCkge1xuICAgICAgICBsb2dnZXIubG9nKFwiUmVtb3Zpbmc6IFwiLCBzZWxlY3Rvcik7XG4gICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICBsb2dnZXIubG9nKFwiQ2Fubm90IGZvdW5kIGVsZW1lbnQgd2l0aCBzZWxlY3RvcjogXCIsIHNlbGVjdG9yKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBcImluc2VydFwiKSB7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImJlZm9yZVwiOlxuICAgICAgICAgIGxvZ2dlci5sb2coXCJJbnNlcnRpbmcgYmVmb3JlOiBcIiwgdmFsdWUpO1xuICAgICAgICAgIGlmIChTdHJpbmcodmFsdWUpLmluY2x1ZGVzKFwibmQtYWRkLXRvLXdpblwiKSkge1xuICAgICAgICAgICAgJChcIi5uZC1hZGQtdG8td2luXCIpLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbGVtZW50LmJlZm9yZSh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhZnRlclwiOlxuICAgICAgICAgIGxvZ2dlci5sb2coXCJJbnNlcnRpbmcgYWZ0ZXI6IFwiLCB2YWx1ZSk7XG4gICAgICAgICAgZWxlbWVudC5hZnRlcih2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJwb3B1cFwiOiB7XG4gICAgICAgICAgaWYgKHBhcnNlSW50KHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oUE9QVVBfRElTUExBWV9GTEFHKSkgIT09IDApIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJQb3B1cCBhbHJlYWR5IGRpc3BsYXllZCBpbiBzZXNzaW9uXCIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxvZ2dlci5sb2coXCJDcmVhdGluZyBQb3B1cDogXCIsIHZhbHVlKTtcbiAgICAgICAgICBjcmVhdGVQb3B1cCh2YWx1ZSwgY29udGVudFNlbGVjdG9yKTtcblxuICAgICAgICAgIGlmIChhcHBseUV2ZW50KSB7XG4gICAgICAgICAgICBjb25zdCBtb2JpbGUgPSB3aW5kb3cubWF0Y2hNZWRpYShNT0JJTEVfTUVESUFfUVVFUlkpLm1hdGNoZXM7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGV2ZW50IG9mIGFwcGx5RXZlbnQpIHtcbiAgICAgICAgICAgICAgc3dpdGNoIChldmVudCkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJleGl0SW50ZW50XCI6XG4gICAgICAgICAgICAgICAgICBsb2dnZXIubG9nKFwiQWRkaW5nIGV4aXQgaW50ZW50IGxpc3RlbmVyXCIpO1xuICAgICAgICAgICAgICAgICAgaWYgKG1vYmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBleGl0U2Nyb2xsTGlzdGVuZXIoZGlzcGxheVBvcHVwKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBkaXNwbGF5UG9wdXAsXG4gICAgICAgICAgICAgICAgICAgICAgICB7b25jZTogdHJ1ZX0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNvcHlJbnRlbnRcIjpcbiAgICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXCJBZGRpbmcgY29weSBpbnRlbnQgbGlzdGVuZXJcIik7XG4gICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvcHlcIiwgZGlzcGxheVBvcHVwLFxuICAgICAgICAgICAgICAgICAgICAgIHtvbmNlOiB0cnVlfSk7XG4gICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhcHBlbmQgcG9wdXAgdG8gYm9keSBhZnRlciB0aW1lb3V0IGV4cGlyZXNcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBkaXNwbGF5UG9wdXAoKTtcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwiZWRpdFwiKSB7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcInRleHRcIjpcbiAgICAgICAgICBsb2dnZXIubG9nKFwiRWRpdGluZyB0ZXh0OiBcIiwgdmFsdWUpO1xuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpLnRleHRDb250ZW50ID0gdmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJzdHlsZUFwcGxpY2F0b3JcIjoge1xuICAgICAgICAgIGxvZ2dlci5sb2coXCJBcHBseWluZyBzdHlsZTogXCIsIHZhbHVlKTtcbiAgICAgICAgICBjb25zdCBlbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgICAgICAgIGNvbnN0IHN0eWxlQ2hhbmdlc01hcCA9IEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgICAgIGxvZ2dlci5sb2coXCJTdHlsZSBDaGFuZ2VzIE1hcDogXCIsIHN0eWxlQ2hhbmdlc01hcCk7XG4gICAgICAgICAgc3R5bGVBcHBsaWNhdG9yKGVsZW1lbnRzLCBzdHlsZUNoYW5nZXNNYXApO1xuICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJhZGRDbGFzc1wiOlxuICAgICAgICAgIGxvZ2dlci5sb2coYGFkZGRpbmcgY2xhc3MgdG8gJHtlbGVtZW50fSBuYW1lZCAke3ZhbHVlfWApO1xuICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3ModmFsdWUpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwicmVtb3ZlQ2xhc3NcIjpcbiAgICAgICAgICBsb2dnZXIubG9nKGByZW1vdmUgY2xhc3MgZnJvbSAke2VsZW1lbnR9IG5hbWVkICR7dmFsdWV9YCk7XG4gICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyh2YWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJkb2N1bWVudFRpdGxlXCI6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgY2hhbmdpbmcgZG9jdW1lbnQgdGl0bGUgZnJvbSAke2VsZW1lbnR9IHRvICR7dmFsdWV9YCk7XG4gICAgICAgICAgaWYgKGFwcGx5RXZlbnQpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZXZlbnQgb2YgYXBwbHlFdmVudCkge1xuICAgICAgICAgICAgICBpZiAoZXZlbnQgPT0gXCJ0YWJDaGFuZ2VcIikge1xuICAgICAgICAgICAgICAgIGxvZ2dlci5sb2coXCJjYXRjaGluZyBldmVudCB0YWJjaGFuZ2UuLlwiKTtcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCAoZSkgPT4gaGFuZGxlVGFiQ2hhbmdlKGUsIHZhbHVlKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChvcGVyYXRvciA9PT0gXCJzZXRhdHRyaWJ1dGVcIikge1xuICAgICAgbG9nZ2VyLmxvZyhcIlNldHRpbmcgYXR0cmlidXRlOiBcIiwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgICBzd2l0Y2ggKGF0dHJpYnV0ZSkge1xuICAgICAgICBjYXNlIFwic3JjXCI6XG4gICAgICAgICAgZWxlbWVudC5jc3MoXCJjb250ZW50XCIsIGB1cmwoJHt2YWx1ZS50cmltKCl9KWApO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY2FzZS1kZWNsYXJhdGlvbnNcbiAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHZhbHVlLnNwbGl0KFwiOlwiKVswXS50cmltKCk7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNhc2UtZGVjbGFyYXRpb25zXG4gICAgICAgICAgY29uc3QgcHJvcGVydHlWYWx1ZSA9IHZhbHVlLnNwbGl0KFwiOlwiKVsxXS50cmltKCk7XG5cbiAgICAgICAgICBlbGVtZW50LmNzcyhwcm9wZXJ0eSwgcHJvcGVydHlWYWx1ZSwgXCIhaW1wb3J0YW50XCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwicmVwbGFjZVwiKSB7XG4gICAgICBsb2dnZXIubG9nKFwiUmVwbGFjaW5nOiBcIiwgdmFsdWUpO1xuICAgICAgZWxlbWVudC5yZXBsYWNlQWxsKHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBcInN3YXBcIikge1xuICAgICAgbG9nZ2VyLmxvZyhcIlN3YXBwaW5nOiBcIiwgbW92ZV9zZWxlY3Rvcl8xLCBtb3ZlX3NlbGVjdG9yXzIpO1xuICAgICAgY29uc3QgbjEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1vdmVfc2VsZWN0b3JfMSk7XG4gICAgICBjb25zdCBuMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW92ZV9zZWxlY3Rvcl8yKTtcbiAgICAgIHN3YXBOb2RlcyhuMSwgbjIpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwiaW5qZWN0c2NyaXB0XCIpIHtcbiAgICAgIGxvZ2dlci5sb2coXCJJbmplY3Rpbmcgc2NyaXB0OiBcIiwgdmFsdWUpO1xuICAgICAgZWxlbWVudC5hcHBlbmQoYDxzY3JpcHQ+JHt2YWx1ZX08L3NjcmlwdD5gKTtcbiAgICB9IGVsc2UgaWYgKG9wZXJhdG9yID09PSBcIm1vdmVcIikge1xuICAgICAgbG9nZ2VyLmxvZyhgTW92aW5nICR7bW92ZV9zZWxlY3Rvcl8xfSB0byAke21vdmVfc2VsZWN0b3JfMn1gKTtcbiAgICAgIGNvbnN0IHNvdXJjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobW92ZV9zZWxlY3Rvcl8xKTtcbiAgICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihtb3ZlX3NlbGVjdG9yXzIpO1xuICAgICAgc291cmNlLnJlbW92ZSgpO1xuICAgICAgZGVzdGluYXRpb24ucHJlcGVuZChzb3VyY2UpO1xuICAgIH0gZWxzZSBpZiAob3BlcmF0b3IgPT09IFwibm9vcFwiKSB7XG4gICAgICBsb2dnZXIubG9nKFwiTm9vcCBPcGVyYXRvcjogTm8gb3BlcmF0aW9uIGlzIGFwcGxpZWQgb24gdGFyZ2V0IFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmxvZyhcIk5vIHN1Y2ggb3BlcmF0b3IgZXhpc3RzIHlldFwiLCBvcGVyYXRvcik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVRhYkNoYW5nZSA9IGFzeW5jIChldmVudCwgdGl0bGVzKSA9PiB7XG4gICAgY29uc3Qgb3JpZ2luYWxUaXRsZSA9IGRvY3VtZW50LnRpdGxlO1xuICAgIGNvbnN0IHBhcnNlZFRpdGxlcyA9ICFBcnJheS5pc0FycmF5KHRpdGxlcykgPyBbdGl0bGVzXSA6IHRpdGxlcztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhcnNlZFRpdGxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGRvY3VtZW50LmhpZGRlbikge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IHBhcnNlZFRpdGxlc1tpXTtcbiAgICAgICAgYXdhaXQgZGVsYXkoMzAwMCk7XG4gICAgICAgIGRvY3VtZW50LnRpdGxlID0gb3JpZ2luYWxUaXRsZTtcbiAgICAgICAgYXdhaXQgZGVsYXkoMzAwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkb2N1bWVudC50aXRsZSA9IG9yaWdpbmFsVGl0bGU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICghZG9jdW1lbnQuaGlkZGVuKSB7XG4gICAgICBkb2N1bWVudC50aXRsZSA9IG9yaWdpbmFsVGl0bGU7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZVRhYkNoYW5nZShldmVudCwgdGl0bGVzKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlUG9wdXBDbGljayA9IChldmVudCkgPT4ge1xuICAgIGNvbnN0IGlkID0gZXZlbnQudGFyZ2V0LmlkO1xuICAgIGlmIChpZCAmJiBpZCA9PT0gXCJuZC1wb3B1cF9fd3JhcHBlclwiKSB7XG4gICAgICAkKFwiI25kLXBvcHVwX193cmFwcGVyXCIpLnJlbW92ZSgpO1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVQb3B1cENsaWNrLCB0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgZGlzcGxheVBvcHVwID0gKCkgPT4ge1xuICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oUE9QVVBfRElTUExBWV9GTEFHLCAxKTtcbiAgICBjb25zdCBxUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dydC1zaGFkb3ctaG9zdFwiKTtcbiAgICBpZiAocVBvcHVwKSBxUG9wdXAuc3R5bGVbXCJkaXNwbGF5XCJdID0gXCJub25lXCI7XG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZC1wb3B1cF9fd3JhcHBlclwiKS5zdHlsZVtcImRpc3BsYXlcIl0gPSBcImJsb2NrXCI7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBoYW5kbGVQb3B1cENsaWNrLCB0cnVlKTtcblxuICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCBkaXNwbGF5UG9wdXAsIHtvbmNlOiB0cnVlfSk7XG4gICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjb3B5XCIsIGRpc3BsYXlQb3B1cCwge29uY2U6IHRydWV9KTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgJChcIiNuZC1wb3B1cF9fd3JhcHBlclwiKS5yZW1vdmUoKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUG9wdXBDbGljaywgdHJ1ZSk7XG4gICAgfSwgMTUwMDApO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZVBvcHVwID0gKHZhbHVlLCBjb250ZW50U2VsZWN0b3IpID0+IHtcbiAgICAvLyBDcmVhdGUgcG9wdXAgd3JhcHBlclxuICAgIGNvbnN0IHBvcHVwV3JhcHBlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICBwb3B1cFdyYXBwZXIuY2xhc3NMaXN0LmFkZChcIm5kLXBvcHVwX193cmFwcGVyXCIpO1xuICAgIHBvcHVwV3JhcHBlci5pZCA9IFwibmQtcG9wdXBfX3dyYXBwZXJcIjtcblxuICAgIC8vIENyZWF0ZSBwb3B1cCBjbG9zZSBidXR0b25cbiAgICBjb25zdCBwb3B1cENsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICBwb3B1cENsb3NlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJuZC1wb3B1cF9fYnV0dG9uLWNsb3NlXCIpO1xuICAgIHBvcHVwQ2xvc2VCdXR0b24uaW5uZXJUZXh0ID0gXCJYXCI7XG4gICAgcG9wdXBDbG9zZUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgJChcIiNuZC1wb3B1cF9fd3JhcHBlclwiKS5yZW1vdmUoKTtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlUG9wdXBDbGljaywgdHJ1ZSk7XG4gICAgfTtcblxuICAgIGlmIChjb250ZW50U2VsZWN0b3IpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnRzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbnRlbnRTZWxlY3RvcikpO1xuICAgICAgd2hpbGUgKHZhbHVlLmluY2x1ZGVzKFwie3tSRVBMQUNFfX1cIikgJiYgY29udGVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoXCJ7e1JFUExBQ0V9fVwiLCBjb250ZW50cy5zaGlmdCgpLnNyYyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHBvcHVwIGZyb20gdHJlYXRtZW50IGFuZCBhcHBlbmQgY2xvc2UgYnV0dG9uXG4gICAgY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGVtcGxhdGVcIik7XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdmFsdWUudHJpbSgpO1xuICAgIGNvbnN0IHBvcHVwID0gdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkO1xuICAgIHBvcHVwLmFwcGVuZENoaWxkKHBvcHVwQ2xvc2VCdXR0b24pO1xuICAgIHBvcHVwV3JhcHBlci5hcHBlbmRDaGlsZChwb3B1cCk7XG5cbiAgICAvLyBSZW1vdmUgb2xkIHBvcHVwIGlmIGV4aXN0cyBiZWZvcmUgYXBwZW5kaW5nIG5ldyBvbmVcbiAgICAkKFwiI25kLXBvcHVwX193cmFwcGVyXCIpLnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocG9wdXBXcmFwcGVyKTtcbiAgfTtcblxuICBjb25zdCBzd2FwTm9kZXMgPSBmdW5jdGlvbiBzd2FwTm9kZXMobjEsIG4yKSB7XG4gICAgY29uc3QgcDEgPSBuMS5wYXJlbnROb2RlO1xuICAgIGNvbnN0IHAyID0gbjIucGFyZW50Tm9kZTtcbiAgICBsZXQgaTE7XG4gICAgbGV0IGkyO1xuXG4gICAgaWYgKCFwMSB8fCAhcDIgfHwgcDEuaXNFcXVhbE5vZGUobjIpIHx8IHAyLmlzRXF1YWxOb2RlKG4xKSkgcmV0dXJuO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwMS5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHAxLmNoaWxkcmVuW2ldLmlzRXF1YWxOb2RlKG4xKSkge1xuICAgICAgICBpMSA9IGk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcDIuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwMi5jaGlsZHJlbltpXS5pc0VxdWFsTm9kZShuMikpIHtcbiAgICAgICAgaTIgPSBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwMS5pc0VxdWFsTm9kZShwMikgJiYgaTEgPCBpMikge1xuICAgICAgaTIrKztcbiAgICB9XG4gICAgcDEuaW5zZXJ0QmVmb3JlKG4yLCBwMS5jaGlsZHJlbltpMV0pO1xuICAgIHAyLmluc2VydEJlZm9yZShuMSwgcDIuY2hpbGRyZW5baTJdKTtcbiAgfTtcblxuICBjb25zdCB0cmVhdG1lbnRBcHBsaWNhdG9yID0gKHRyZWF0bWVudExpc3QpID0+IHtcbiAgICBpZiAoIXdpbmRvdy5qUXVlcnkpIHtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIHRyZWF0bWVudEFwcGxpY2F0b3IodHJlYXRtZW50TGlzdCk7XG4gICAgICB9LCAxMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgdHJlYXRtZW50IG9mIHRyZWF0bWVudExpc3QpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0cmFuc2Zvcm1lcih0cmVhdG1lbnQpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBsb2dnZXIubG9nKFxuICAgICAgICAgICAgICBgQ291bGRuJ3QgYXBwbHkgdHJlYXRtZW50ICR7dHJlYXRtZW50LmlkfSB3aXRoIGVycm9yICR7ZXJyLm1lc3NhZ2V9YCxcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIFNldCBpZCBvZiBmYWlsZWQgdHJlYXRtZW50IHRvIC0xLFxuICAgICAgICAgIC8vIHNvIHdlIGtub3cgbm90IHRvIGxpc3QgaW4gdGhlIGN1c3RvbSBHQSBldmVudFxuICAgICAgICAgIC8vIHRyZWF0bWVudExpc3RbdHJlYXRtZW50XS5pZCA9IC0xO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIEFwcGx5IHRyZWF0bWVudHNcbiAgdHJlYXRtZW50QXBwbGljYXRvcih0cmVhdG1lbnRzKTtcbiAgaWYgKCFvYnNlcnZlcikge1xuICAgIC8vIGluamVjdEdhU2NyaXB0KHRyZWF0bWVudHMpO1xuICB9XG59XG5leHBvcnQgZGVmYXVsdCBhcHBseVRyZWF0bWVudHM7XG4iLCJpbXBvcnQge0xPR19BUElfVVJMLCBMT0NBTF9TVE9SQUdFX0tFWVMsIFNFU1NJT05fU1RPUkFHRV9LRVlTLCBTUExJVF9SQVRJT30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtjb21wYXJlT2JqZWN0c30gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgTG9nZ2VyIGZyb20gXCIuLi9sb2dnZXJcIjtcblxuZXhwb3J0IGNsYXNzIE1vbml0b3Ige1xuICBjb25zdHJ1Y3RvcihhcHBsaWVkVHJlYXRtZW50SWRzLCBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzKSB7XG4gICAgdGhpcy5sb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBNb25pdG9yXCIpO1xuICAgIHRoaXMubG9nZ2VyLmxvZyhcIkluaXRpYWxpemluZyBtb25pdG9yXCIpO1xuXG4gICAgdGhpcy5hcHBsaWVkVHJlYXRtZW50SWRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShhcHBsaWVkVHJlYXRtZW50SWRzKSk7XG4gICAgdGhpcy5lbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzKSk7XG4gICAgdGhpcy5sYXRlc3RDaGFuZ2VzID0gbnVsbDtcbiAgICB0aGlzLmVsaWdpYmxlTm90QXBwbGllZENoYW5nZXMgPSBudWxsO1xuICAgIHRoaXMuc2Vzc2lvbklkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShTRVNTSU9OX1NUT1JBR0VfS0VZUy5TRVNTSU9OX0lEKTtcbiAgICB0aGlzLnZpZXdJZCA9IGNyeXB0by5yYW5kb21VVUlEKCk7XG4gICAgdGhpcy5oZWFkZXJzID0ge1xuICAgICAgdHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfTtcbiAgICB0aGlzLmxvZ2dlci5sb2coXCJJbml0aWFsaXppbmcgd2l0aCBzZXNzaW9uIGlkOiBcIiArIHRoaXMuc2Vzc2lvbklkKTtcbiAgICB0aGlzLmluaXRpYWxpemVFeGl0RXZlbnRMaXN0ZW5lcigpO1xuICAgIHRoaXMuZGVidWdNb2RlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5ORF9ERUJVR19NT0RFKSA/IFwib25cIiA6IFwib2ZmXCI7XG4gIH1cblxuICBhc3luYyBzZW5kTG9ncyhpc09uKSB7XG4gICAgdGhpcy5sb2dnZXIubG9nKFwiU2VuZGluZyBsb2dzXCIpO1xuICAgIGxldCBxdWV1ZWQgPSBmYWxzZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHF1ZXVlZCA9IHRydWU7XG4gICAgfSwgMTAwMCk7XG4gICAgd2hpbGUgKCFxdWV1ZWQpIHtcbiAgICAgIHF1ZXVlZCA9IG5hdmlnYXRvci5zZW5kQmVhY29uKExPR19BUElfVVJMLCB0aGlzLnBhY2thZ2VMb2dEYXRhKGlzT24pKTtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2VuZEVtcHR5TG9nKG1lc3NhZ2UsIGlzT24pIHtcbiAgICBjb25zb2xlLmxvZyhcIk5leHRkYXkgTW9uaXRvcjogU2VuZGluZyBlbXB0eSBsb2dzXCIpO1xuICAgIGxldCBxdWV1ZWQgPSBmYWxzZTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHF1ZXVlZCA9IHRydWU7XG4gICAgfSwgMTAwMCk7XG4gICAgd2hpbGUgKCFxdWV1ZWQpIHtcbiAgICAgIHF1ZXVlZCA9IG5hdmlnYXRvci5zZW5kQmVhY29uKExPR19BUElfVVJMLCB0aGlzLnBhY2thZ2VFbXB0eUxvZ0RhdGEobWVzc2FnZSwgaXNPbikpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZUxhdGVzdENoYW5nZXMoY2hhbmdlcywgZWxpZ2libGVOb3RBcHBsaWVkQ2hhbmdlcykge1xuICAgIGNvbnN0IHthcHBsaWVkVHJlYXRtZW50SWRzLCBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzLCBsb2dnZXJ9ID0gdGhpcztcbiAgICBsb2dnZXIubG9nKFwiVXBkYXRpbmcgbGF0ZXN0IGNoYW5nZXNcIik7XG5cbiAgICBsZXQgY29tcGFyZVRvID0gdGhpcy5sYXRlc3RDaGFuZ2VzIHx8IGFwcGxpZWRUcmVhdG1lbnRJZHM7XG4gICAgaWYgKCFjb21wYXJlT2JqZWN0cyhjb21wYXJlVG8sIGNoYW5nZXMpKSB7XG4gICAgICBsb2dnZXIubG9nKFwiQ2hhbmdlcyBkZXRlY3RlZFwiKTtcbiAgICAgIGxvZ2dlci5sb2coXCJDaGFuZ2VzOiBcIiwgY2hhbmdlcyk7XG4gICAgICB0aGlzLmxhdGVzdENoYW5nZXMgPSBjaGFuZ2VzO1xuICAgIH1cblxuICAgIGNvbXBhcmVUbyA9IHRoaXMuZWxpZ2libGVOb3RBcHBsaWVkQ2hhbmdlcyB8fCBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzO1xuICAgIGlmICghY29tcGFyZU9iamVjdHMoY29tcGFyZVRvLCBlbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzKSkge1xuICAgICAgbG9nZ2VyLmxvZyhcIkNoYW5nZXMgZGV0ZWN0ZWRcIik7XG4gICAgICBsb2dnZXIubG9nKFwiQ2hhbmdlczogXCIsIGNoYW5nZXMpO1xuICAgICAgdGhpcy5lbGlnaWJsZU5vdEFwcGxpZWRDaGFuZ2VzID0gZWxpZ2libGVOb3RBcHBsaWVkQ2hhbmdlcztcbiAgICB9XG4gIH1cblxuICBwYWNrYWdlTG9nRGF0YShpc09uKSB7XG4gICAgY29uc3Qge2FwcGxpZWRUcmVhdG1lbnRJZHMsXG4gICAgICBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzLFxuICAgICAgZGVidWdNb2RlLFxuICAgICAgaGVhZGVycyxcbiAgICAgIHNlc3Npb25JZCxcbiAgICAgIHZpZXdJZH0gPSB0aGlzO1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBPYmplY3Qua2V5cyhhcHBsaWVkVHJlYXRtZW50SWRzKS5sZW5ndGggPyBcIlRyZWF0bWVudHMgYXBwbGllZFwiIDpcbiAgICAgIFwiTm8gdHJlYXRtZW50cyBhcHBsaWVkXCI7XG4gICAgY29uc3QgY3VycmVudFVSTCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICBuOiBgbmV4dGRheS1zZXNzaW9uX2lkLSR7c2Vzc2lvbklkfWAsXG4gICAgICB1OiBjdXJyZW50VVJMLmhyZWYsXG4gICAgICBkOiBjdXJyZW50VVJMLmhvc3RuYW1lLFxuICAgICAgcjogZG9jdW1lbnQucmVmZXJyZXIsXG4gICAgICB3OiB3aW5kb3cuaW5uZXJXaWR0aCxcbiAgICAgIGM6IGRvY3VtZW50LmNvb2tpZSxcbiAgICAgIHdkbDogd2luZG93LmRhdGFMYXllciA/IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkod2luZG93LmRhdGFMYXllcikpIDogW10sXG4gICAgICB0OiBEYXRlLm5vdygpLFxuICAgICAgdjogXCIwLjAuMjJcIixcbiAgICAgIGE6IGFwcGxpZWRUcmVhdG1lbnRJZHMsXG4gICAgICBlOiBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzLFxuICAgICAgdklkOiB2aWV3SWQsXG4gICAgICBzcjogU1BMSVRfUkFUSU8sXG4gICAgICBtOiBtZXNzYWdlLFxuICAgICAgZGJtOiBkZWJ1Z01vZGUsXG4gICAgICBpc09uOiBpc09uLFxuICAgIH07XG4gICAgcmV0dXJuIG5ldyBCbG9iKFtKU09OLnN0cmluZ2lmeShib2R5KV0sIGhlYWRlcnMpO1xuICB9XG5cbiAgcGFja2FnZVVwZGF0ZUxvZ0RhdGEoKSB7XG4gICAgY29uc3Qge2hlYWRlcnMsIGVsaWdpYmxlTm90QXBwbGllZENoYW5nZXMsIGxhdGVzdENoYW5nZXMsIHZpZXdJZH0gPSB0aGlzO1xuICAgIGlmICghbGF0ZXN0Q2hhbmdlcykgcmV0dXJuIGZhbHNlO1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICB0OiBEYXRlLm5vdygpLFxuICAgICAgYTogbGF0ZXN0Q2hhbmdlcyxcbiAgICAgIGU6IGVsaWdpYmxlTm90QXBwbGllZENoYW5nZXMsXG4gICAgICB2SWQ6IHZpZXdJZCxcbiAgICB9O1xuICAgIHJldHVybiBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoYm9keSldLCBoZWFkZXJzKTtcbiAgfVxuXG4gIHN0YXRpYyBwYWNrYWdlRW1wdHlMb2dEYXRhKG1lc3NhZ2UsIGlzT24pIHtcbiAgICBjb25zdCBjdXJyZW50VVJMID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgY29uc3QgZGVidWdNb2RlID0gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKExPQ0FMX1NUT1JBR0VfS0VZUy5ORF9ERUJVR19NT0RFKSA/IFwib25cIiA6IFwib2ZmXCI7XG4gICAgY29uc3Qgc2Vzc2lvbklkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShTRVNTSU9OX1NUT1JBR0VfS0VZUy5TRVNTSU9OX0lEKTtcbiAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgdHlwZTogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgfTtcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgbjogYG5leHRkYXktc2Vzc2lvbl9pZC0ke3Nlc3Npb25JZH1gLFxuICAgICAgdTogY3VycmVudFVSTC5ocmVmLFxuICAgICAgZDogY3VycmVudFVSTC5ob3N0bmFtZSxcbiAgICAgIHI6IGRvY3VtZW50LnJlZmVycmVyLFxuICAgICAgdzogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICBjOiBkb2N1bWVudC5jb29raWUsXG4gICAgICB3ZGw6IHdpbmRvdy5kYXRhTGF5ZXIgPyBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHdpbmRvdy5kYXRhTGF5ZXIpKSA6IFtdLFxuICAgICAgdDogRGF0ZS5ub3coKSxcbiAgICAgIHY6IFwiMC4wLjIyXCIsXG4gICAgICBhOiB7fSxcbiAgICAgIGU6IHt9LFxuICAgICAgdklkOiBudWxsLFxuICAgICAgc3I6IFNQTElUX1JBVElPLFxuICAgICAgbTogbWVzc2FnZSxcbiAgICAgIGRibTogZGVidWdNb2RlLFxuICAgICAgaXNPbjogaXNPbixcbiAgICB9O1xuICAgIHJldHVybiBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoYm9keSldLCBoZWFkZXJzKTtcbiAgfVxuXG4gIGluaXRpYWxpemVFeGl0RXZlbnRMaXN0ZW5lcigpIHtcbiAgICBjb25zdCB7bG9nZ2VyfSA9IHRoaXM7XG4gICAgbG9nZ2VyLmxvZyhcIkluaXRpYWxpemluZyBleGl0IGV2ZW50IGxpc3RlbmVyXCIpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICBcInBhZ2VoaWRlXCIsXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICBsb2dnZXIubG9nKFwiSW4gcGFnZWhpZGUgZXZlbnRcIik7XG4gICAgICAgICAgY29uc3QgbG9nRGF0YSA9IHRoaXMucGFja2FnZVVwZGF0ZUxvZ0RhdGEoKTtcbiAgICAgICAgICBpZiAoIWxvZ0RhdGEpIHtcbiAgICAgICAgICAgIGxvZ2dlci5sb2coXCJObyBjaGFuZ2VzIHRvIGxvZ1wiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IHF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICAgIHdoaWxlICghcXVldWVkKSB7XG4gICAgICAgICAgICBxdWV1ZWQgPSBuYXZpZ2F0b3IuXG4gICAgICAgICAgICAgICAgc2VuZEJlYWNvbihMT0dfQVBJX1VSTCwgbG9nRGF0YSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxvZ2dlci5sb2coXCJMb2dzIHF1ZXVlZCBzdWNjZXNzZnVsbHlcIik7XG4gICAgICAgIH0sXG4gICAgICAgIHtjYXB0dXJlOiB0cnVlfSxcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vbml0b3I7XG4iLCJpbXBvcnQge0xPQ0FMX1NUT1JBR0VfS0VZUywgVFJFQVRNRU5UU19EVVJBVElPTn0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtmZXRjaFRyZWF0bWVudHN9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBUcmVhdG1lbnQgUmVwb3NpdG9yeVwiKTtcblxuY2xhc3MgVHJlYXRtZW50UmVwb3NpdG9yeSB7XG4gIGNvbnN0cnVjdG9yKGJvZHkpIHtcbiAgICBjb25zdCB7Y29va2llUGN0LCB0cmVhdG1lbnRzfSA9IGJvZHk7XG4gICAgdGhpcy50cmVhdG1lbnRzID0gdHJlYXRtZW50cztcbiAgICB0aGlzLmNvb2tpZVBjdCA9IGNvb2tpZVBjdDtcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBnZXRUcmVhdG1lbnRzKCkge1xuICAgIGxvZ2dlci5sb2coXCJMb2FkaW5nIHRyZWF0bWVudHNcIik7XG4gICAgY29uc3Qge1RSRUFUTUVOVFN9ID0gTE9DQUxfU1RPUkFHRV9LRVlTO1xuICAgIGNvbnN0IHRyZWF0bWVudHNPYmogPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRSRUFUTUVOVFMpKTtcbiAgICBsZXQgdHJlYXRtZW50cyA9IHRyZWF0bWVudHNPYmo/LnRyZWF0bWVudHM7XG4gICAgY29uc3QgdGltZXN0YW1wID0gdHJlYXRtZW50c09iaj8udGltZXN0YW1wO1xuICAgIGlmICghdHJlYXRtZW50cyB8fCAhdGltZXN0YW1wKSB7XG4gICAgICBsb2dnZXIubG9nKFwiVHJlYXRtZW50cyBub3QgZm91bmQgaW4gbG9jYWwgc3RvcmFnZVwiKTtcbiAgICAgIHRyZWF0bWVudHMgPSBhd2FpdCBmZXRjaFRyZWF0bWVudHMoKTtcbiAgICAgIGNvbnN0IHRyZWF0bWVudFdpdGhUaW1lc3RhbXAgPSB7XG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgICAgdHJlYXRtZW50cyxcbiAgICAgIH07XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUUkVBVE1FTlRTLCBKU09OLnN0cmluZ2lmeSh0cmVhdG1lbnRXaXRoVGltZXN0YW1wKSk7XG4gICAgICByZXR1cm4gdHJlYXRtZW50cztcbiAgICB9XG4gICAgaWYgKHRpbWVzdGFtcCkge1xuICAgICAgY29uc3QgZWxhcHNlZERheXMgPSAoRGF0ZS5ub3coKSAtIHRpbWVzdGFtcCkgLyAoMTAwMCAqIDM2MDAgKiAyNCk7XG4gICAgICBpZiAoZWxhcHNlZERheXMgPiBUUkVBVE1FTlRTX0RVUkFUSU9OKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJUcmVhdG1lbnRzIGFyZSBleHBpcmVkXCIpO1xuICAgICAgICB0cmVhdG1lbnRzID0gYXdhaXQgZmV0Y2hUcmVhdG1lbnRzKCk7XG4gICAgICAgIGNvbnN0IHRyZWF0bWVudFdpdGhUaW1lc3RhbXAgPSB7XG4gICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgIHRyZWF0bWVudHMsXG4gICAgICAgIH07XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFRSRUFUTUVOVFMsIEpTT04uc3RyaW5naWZ5KHRyZWF0bWVudFdpdGhUaW1lc3RhbXApKTtcbiAgICAgICAgcmV0dXJuIHRyZWF0bWVudHM7XG4gICAgICB9XG4gICAgfVxuICAgIGxvZ2dlci5sb2coXCJUcmVhdG1lbnRzIGFyZSBsb2FkZWQgZnJvbSBsb2NhbCBzdG9yYWdlXCIpO1xuICAgIHJldHVybiB0cmVhdG1lbnRzO1xuICB9XG5cbiAgZ2V0TWF0Y2hlZFRyZWF0bWVudHMoKSB7XG4gICAgY29uc3QgdXNlclNlZ21lbnQgPSB0aGlzLmdldFVzZXJTZWdtZW50KCk7XG5cbiAgICBjb25zdCBzZWdtZW50TWF0Y2hlZFRyZWF0bWVudHMgPSB0aGlzLnRyZWF0bWVudHMuZmlsdGVyKFxuICAgICAgICAodCkgPT5cbiAgICAgICAgICB0LmFwcGx5X29uX3VzZXJfc2VnbWVudCA9PSB1c2VyU2VnbWVudCB8fFxuICAgICAgICB0LmFwcGx5X29uX3VzZXJfc2VnbWVudCA9PT0gXCIqXCIsXG4gICAgKTtcbiAgICBsb2dnZXIubG9nKGAke3NlZ21lbnRNYXRjaGVkVHJlYXRtZW50cy5sZW5ndGh9IHRyZWF0bWVudHMgc2VnbWVudCBtYXRjaGVkYCk7XG4gICAgaWYgKCFzZWdtZW50TWF0Y2hlZFRyZWF0bWVudHMubGVuZ3RoKSByZXR1cm4gW107XG4gICAgcmV0dXJuIHNlZ21lbnRNYXRjaGVkVHJlYXRtZW50cztcbiAgfVxuXG4gIGdldFVzZXJTZWdtZW50KCkge1xuICAgIGlmICh0aGlzLmNvb2tpZVBjdCA9PT0gLTEpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiTmV3IHVzZXIgaGFzIG5vIHNlZ21lbnRcIik7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZXcgVXNlclwiKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29va2llUGN0IDwgNTApIHJldHVybiBcIkFcIjtcbiAgICByZXR1cm4gXCJCXCI7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVHJlYXRtZW50UmVwb3NpdG9yeTtcbiIsImltcG9ydCB7U0VTU0lPTl9TVE9SQUdFX0tFWVMsIExPQ0FMX1NUT1JBR0VfS0VZU30gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHtjb25kaXRpb25DaGVja2VyfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIk5leHRkYXkgQ291bnRlciBDaGVja2VyXCIpO1xuXG5leHBvcnQgY29uc3QgY2hlY2tDb3VudGVyUnVsZSA9IChydWxlKSA9PntcbiAgbG9nZ2VyLmxvZyhcIkNoZWNraW5nIHJ1bGVcIiwgSlNPTi5zdHJpbmdpZnkocnVsZSkpO1xuICBjb25zdCB7b3BlcmF0b3IsIGNvbmRpdGlvbiwgdmFsdWV9ID0gcnVsZTtcbiAgc3dpdGNoIChvcGVyYXRvcikge1xuICAgIGNhc2UgXCJwYWdlVmlld1wiOlxuICAgICAgcmV0dXJuIHBhZ2VWaWV3SGFuZGxlcihjb25kaXRpb24sIHZhbHVlKTtcbiAgICBjYXNlIFwiQ0FCYXNrZXRQcmljZVwiOlxuICAgICAgcmV0dXJuIGNhQmFza2V0UHJpY2VIYW5kbGVyKGNvbmRpdGlvbiwgdmFsdWUpO1xuICAgIGRlZmF1bHQ6XG4gICAgICBsb2dnZXIubG9nKFwiTm8gc3VjaCBvcGVyYXRvclwiLCBvcGVyYXRvcik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG5cbmNvbnN0IGdldENvdW50ZXIgPSAoY291bnRlciwgdHlwZSkgPT4ge1xuICB0cnkge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSBcInNlc3Npb25cIjpcbiAgICAgICAgcmV0dXJuIHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oY291bnRlcik7XG4gICAgICBjYXNlIFwibG9jYWxcIjpcbiAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXRJdGVtKGNvdW50ZXIpO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbG9nZ2VyLmxvZyhcIk5vIHN1Y2ggdHlwZVwiLCB0eXBlKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBsb2dnZXIubG9nKGBDb3VsZCBub3QgZ2V0IGNvdW50ZXIgJHtjb3VudGVyfWAsIGVycik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn07XG5cbmNvbnN0IHBhZ2VWaWV3SGFuZGxlciA9IChjb25kaXRpb24sIHZhbHVlKSA9PiB7XG4gIGNvbnN0IHBhZ2VWaWV3cyA9IHBhcnNlSW50KGdldENvdW50ZXIoU0VTU0lPTl9TVE9SQUdFX0tFWVMuUEFHRV9WSUVXUywgXCJzZXNzaW9uXCIpKTtcbiAgbG9nZ2VyLmxvZyhcIlBhZ2Ugdmlld3MgY291bnRlciB2YWx1ZTogXCIsIHBhZ2VWaWV3cyk7XG4gIGlmIChwYWdlVmlld3MgPT09IG51bGwpIHtcbiAgICBsb2dnZXIubG9nKFwiUGFnZXZpZXdzIGNvdW50ZXIgbm90IGZvdW5kIGluIHNlc3Npb24gc3RvcmFnZVwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIocGFnZVZpZXdzLCBjb25kaXRpb24sIHBhcnNlSW50KHZhbHVlKSk7XG59O1xuXG5jb25zdCBjYUJhc2tldFByaWNlSGFuZGxlciA9IChjb25kaXRpb24sIHZhbHVlKSA9PiB7XG4gIGNvbnN0IGNhQmFza2V0UHJpY2UgPSBwYXJzZUludChcbiAgICAgIGdldENvdW50ZXIoTE9DQUxfU1RPUkFHRV9LRVlTLkNPVVBPTl9BUFBMSUNBQkxFX0JBU0tFVF9QUklDRSwgXCJsb2NhbFwiKSk7XG4gIGxvZ2dlci5sb2coXCJDb3Vwb24gYXBwbGljYWJsZSBiYXNrZXQgcHJpY2UgY291bnRlciB2YWx1ZTogXCIsIGNhQmFza2V0UHJpY2UpO1xuICBpZiAoY2FCYXNrZXRQcmljZSA9PT0gbnVsbCkge1xuICAgIGxvZ2dlci5sb2coXCJDb3Vwb24gYXBwbGljYWJsZSBiYXNrZXQgcHJpY2UgY291bnRlciBub3QgZm91bmQgaW4gbG9jYWwgc3RvcmFnZVwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIoY2FCYXNrZXRQcmljZSwgY29uZGl0aW9uLCBwYXJzZUludCh2YWx1ZSkpO1xufTtcblxuIiwiaW1wb3J0IHtjb25kaXRpb25DaGVja2VyfSBmcm9tIFwiLi4vdXRpbHNcIjtcbmltcG9ydCBMb2dnZXIgZnJvbSBcIi4uL2xvZ2dlclwiO1xuY29uc3QgbG9nZ2VyID0gbmV3IExvZ2dlcihcIk5leHRkYXkgRWxlbWVudCBDaGVja2VyXCIpO1xuXG5leHBvcnQgY29uc3QgY2hlY2tFbGVtZW50UnVsZSA9IChydWxlKSA9PntcbiAgbG9nZ2VyLmxvZyhcIkNoZWNraW5nIHJ1bGVcIiwgSlNPTi5zdHJpbmdpZnkocnVsZSkpO1xuICBjb25zdCB7b3BlcmF0b3IsIGNvbmRpdGlvbiwgdmFsdWUsIHNlbGVjdG9yLCBzZWxlY3RvckFsbCwgc2VsZWN0b3JGYWxsYmFjayA9IG51bGx9ID0gcnVsZTtcbiAgbGV0IG1haW5TZWxlY3RvciA9IHNlbGVjdG9yO1xuICBpZiAobWFpblNlbGVjdG9yICYmICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG1haW5TZWxlY3RvcikpIHtcbiAgICBtYWluU2VsZWN0b3IgPSBzZWxlY3RvckZhbGxiYWNrID8gc2VsZWN0b3JGYWxsYmFjayA6IG1haW5TZWxlY3RvcjtcbiAgfVxuXG4gIGlmIChvcGVyYXRvciA9PT0gbnVsbCkge1xuICAgIHJldHVybiBjb25kaXRpb25DaGVja2VyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobWFpblNlbGVjdG9yKSwgY29uZGl0aW9uLCB2YWx1ZSk7XG4gIH1cbiAgaWYgKG1haW5TZWxlY3RvciAmJiAhZG9jdW1lbnQucXVlcnlTZWxlY3RvcihtYWluU2VsZWN0b3IpKSB7XG4gICAgbG9nZ2VyLmxvZyhcIlNlbGVjdG9yIG5vdCBmb3VuZCBvbiBwYWdlXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBpZiAoc2VsZWN0b3JBbGwgJiYgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JBbGwpKSB7XG4gICAgbG9nZ2VyLmxvZyhcIlNlbGVjdG9yIG5vdCBmb3VuZCBvbiBwYWdlXCIpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGxldCBlbGVtZW50O1xuICBpZiAobWFpblNlbGVjdG9yKSBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihtYWluU2VsZWN0b3IpO1xuICBlbHNlIGlmIChzZWxlY3RvckFsbCkgZWxlbWVudCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvckFsbCkpO1xuXG4gIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICBjYXNlIFwidGV4dC1udW1iZXJcIjoge1xuICAgICAgbGV0IHRlbXBWYWw7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShlbGVtZW50KSkge1xuICAgICAgICB0ZW1wVmFsID0gZWxlbWVudC5yZWR1Y2UoKHJldHVyblZhbCwgZWxlbSkgPT4ge1xuICAgICAgICAgIHJldHVyblZhbCArPSBwYXJzZUludChlbGVtLnRleHRDb250ZW50LnJlcGxhY2UoXCJUTFwiLCBcIlwiKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgICAgICAgcmV0dXJuIHJldHVyblZhbDtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0ZW1wVmFsID0gcGFyc2VJbnQoZG9jdW1lbnQucXVlcnlTZWxlY3RvcihtYWluU2VsZWN0b3IpLnRleHRDb250ZW50XG4gICAgICAgICAgICAucmVwbGFjZShcIlRMXCIsIFwiXCIpLnJlcGxhY2UoXCIuXCIsIFwiXCIpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJ1blRpbWVWYWx1ZSA9IHBhcnNlSW50KHRlbXBWYWwpO1xuICAgICAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIocnVuVGltZVZhbHVlLCBjb25kaXRpb24sIHZhbHVlKTtcbiAgICB9XG4gICAgY2FzZSBcImNsYXNzTGlzdFwiOlxuICAgICAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIoQXJyYXkuZnJvbShlbGVtZW50LmNsYXNzTGlzdCksIGNvbmRpdGlvbiwgdmFsdWUpO1xuICAgIGRlZmF1bHQ6XG4gICAgICBsb2dnZXIubG9nKFwiT3BlcmF0b3Igbm90IGRlZmluZWRcIik7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn07XG4iLCJpbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBGdW5jdGlvbiBDaGVja2VyXCIpO1xuXG5leHBvcnQgY29uc3QgY2hlY2tGdW5jdGlvblJ1bGUgPSAocnVsZSkgPT57XG4gIGxvZ2dlci5sb2coXCJDaGVja2luZyBydWxlXCIsIEpTT04uc3RyaW5naWZ5KHJ1bGUpKTtcbiAgY29uc3Qge29wZXJhdG9yLCBjb25kaXRpb24sIHZhbHVlfSA9IHJ1bGU7XG4gIGlmICghb3BlcmF0b3IpIHtcbiAgICBsb2dnZXIubG9nKFwiUnVsZSBmdW5jdGlvbiBub3QgZGVmaW5lZFwiKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgcnVsZUZ1bmN0aW9uID0gRnVuY3Rpb24ob3BlcmF0b3IpO1xuICBjb25zdCBydW50aW1lVmFsdWUgPSBydWxlRnVuY3Rpb24oKTtcbiAgcmV0dXJuIGNvbmRpdGlvbkNoZWNrZXIocnVudGltZVZhbHVlLCBjb25kaXRpb24sIHZhbHVlKTtcbn07XG4iLCJpbXBvcnQge1NFU1NJT05fU1RPUkFHRV9LRVlTfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5pbXBvcnQge2NvbmRpdGlvbkNoZWNrZXJ9IGZyb20gXCIuLi91dGlsc1wiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBTZXNzaW9uIENoZWNrZXJcIik7XG5cbmV4cG9ydCBjb25zdCBjaGVja1Nlc3Npb25SdWxlID0gKHJ1bGUpID0+e1xuICBsb2dnZXIubG9nKFwiQ2hlY2tpbmcgcnVsZVwiLCBKU09OLnN0cmluZ2lmeShydWxlKSk7XG4gIGNvbnN0IHtvcGVyYXRvciwgY29uZGl0aW9uLCB2YWx1ZX0gPSBydWxlO1xuICBzd2l0Y2ggKG9wZXJhdG9yKSB7XG4gICAgY2FzZSBcImR1cmF0aW9uXCI6XG4gICAgICByZXR1cm4gZHVyYXRpb25IYW5kbGVyKGNvbmRpdGlvbiwgdmFsdWUpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufTtcblxuY29uc3QgZ2V0U2Vzc2lvblRpbWVzdGFtcCA9ICgpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gbmV3IERhdGUocGFyc2VJbnQoc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShTRVNTSU9OX1NUT1JBR0VfS0VZUy5TRVNTSU9OX1RJTUVTVEFNUCkpKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgbG9nZ2VyLmxvZyhcIkNvdWxkIG5vdCBnZXQgc2Vzc2lvbiB0aW1lc3RhbXBcIiwgZXJyKTtcbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxufTtcblxuY29uc3QgZHVyYXRpb25IYW5kbGVyID0gKGNvbmRpdGlvbiwgdmFsdWUpID0+IHtcbiAgY29uc3QgZHVyYXRpb24gPSAoRGF0ZS5ub3coKSAtIGdldFNlc3Npb25UaW1lc3RhbXAoKSkgLyAxMDAwO1xuICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihkdXJhdGlvbiwgY29uZGl0aW9uLCBwYXJzZUludCh2YWx1ZSkpO1xufTtcbiIsImltcG9ydCB7Y29uZGl0aW9uQ2hlY2tlcn0gZnJvbSBcIi4uL3V0aWxzXCI7XG5pbXBvcnQgTG9nZ2VyIGZyb20gXCIuLi9sb2dnZXJcIjtcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoXCJOZXh0ZGF5IFVybCBDaGVja2VyXCIpO1xuXG5leHBvcnQgY29uc3QgY2hlY2tVcmxSdWxlID0gKHJ1bGUpID0+e1xuICBsb2dnZXIubG9nKFwiQ2hlY2tpbmcgcnVsZVwiLCBKU09OLnN0cmluZ2lmeShydWxlKSk7XG4gIGNvbnN0IHtvcGVyYXRvciwgY29uZGl0aW9uLCB2YWx1ZX0gPSBydWxlO1xuXG4gIHN3aXRjaCAob3BlcmF0b3IpIHtcbiAgICBjYXNlIFwicGF0aFwiOiB7XG4gICAgICBjb25zdCByZXF1ZXN0VVJMPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgIGNvbnN0IGlzQWpheCA9IHJlcXVlc3RVUkwuaW5jbHVkZXMoXCJhamF4L21vYmlsZS1zZWFyY2gvbG9hZE90aGVyUGFnZXMucGhwXCIpO1xuICAgICAgY29uc3QgcGF0aCA9ICFpc0FqYXggPyBuZXcgVVJMKHJlcXVlc3RVUkwpLnBhdGhuYW1lIDpcbiAgICAgIGRlY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBuZXcgVVJMKHJlcXVlc3RVUkwpLnNlYXJjaC5yZXBsYWNlKFwiP29yaWdpbmFsUGF0aD1cIiwgXCJcIiksXG4gICAgICApO1xuICAgICAgbG9nZ2VyLmxvZyhgQ2hlY2tpbmcgcGF0aCAke3BhdGh9IG1hdGNoZXMgcnVsZSBwYXRoICR7dmFsdWV9YCk7XG4gICAgICByZXR1cm4gY29uZGl0aW9uQ2hlY2tlcihwYXRoLCBjb25kaXRpb24sIHZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG4iLCJpbXBvcnQge2NoZWNrQ291bnRlclJ1bGV9IGZyb20gXCIuL2NvdW50ZXJDaGVja2VyXCI7XG5pbXBvcnQge2NoZWNrRGF0YUxheWVyUnVsZX0gZnJvbSBcIi4vZGF0YUxheWVyQ2hlY2tlclwiO1xuaW1wb3J0IHtjaGVja0VsZW1lbnRSdWxlfSBmcm9tIFwiLi9lbGVtZW50Q2hlY2tlclwiO1xuaW1wb3J0IHtjaGVja0Z1bmN0aW9uUnVsZX0gZnJvbSBcIi4vZnVuY3Rpb25DaGVja2VyXCI7XG5pbXBvcnQge2NoZWNrU2Vzc2lvblJ1bGV9IGZyb20gXCIuL3Nlc3Npb25DaGVja2VyXCI7XG5pbXBvcnQge2NoZWNrVXJsUnVsZX0gZnJvbSBcIi4vdXJsQ2hlY2tlclwiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKFwiTmV4dGRheSBSdWxlIEVuZ2luZVwiKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUnVsZUVuZ2luZSB7XG4gIGNvbnN0cnVjdG9yKGJvZHkpIHtcbiAgICBjb25zdCB7YmFzZVJ1bGVTZXQsIHN1YlZhcmlhbnRSdWxlU2V0LCBjYWxsYmFjayA9IG51bGx9ID0gYm9keTtcbiAgICB0aGlzLmJhc2VSdWxlU2V0ID0gYmFzZVJ1bGVTZXQ7XG4gICAgdGhpcy5zdWJWYXJpYW50UnVsZVNldCA9IHN1YlZhcmlhbnRSdWxlU2V0O1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgfVxuXG4gIGNoZWNrUnVsZXMoKSB7XG4gICAgZm9yIChjb25zdCBydWxlIG9mIHRoaXMuYmFzZVJ1bGVTZXQpIHtcbiAgICAgIGNvbnN0IHJ1bGVTYXRpc2ZpZWQgPSB0aGlzLmNoZWNrUnVsZShydWxlKTtcbiAgICAgIGlmICghcnVsZVNhdGlzZmllZCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgY2hlY2tTdWJWYXJpYW50UnVsZXMoKSB7XG4gICAgZm9yIChjb25zdCBydWxlIG9mIHRoaXMuc3ViVmFyaWFudFJ1bGVTZXQpIHtcbiAgICAgIGNvbnN0IHJ1bGVTYXRpc2ZpZWQgPSB0aGlzLmNoZWNrUnVsZShydWxlKTtcbiAgICAgIGlmIChydWxlU2F0aXNmaWVkKSB7XG4gICAgICAgIHJldHVybiBydWxlLnN1YlZhcmlhbnRJZDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY2hlY2tSdWxlKHJ1bGUpIHtcbiAgICBjb25zdCB7Y2hhaW4sIGNoYWluX2NvbmRpdGlvbiwgdHlwZX0gPSBydWxlO1xuICAgIGxldCBydWxlU2F0aXNmaWVkID0gbnVsbDtcbiAgICAvLyBjaGVjayBydWxlXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIFwic2Vzc2lvblwiOlxuICAgICAgICBydWxlU2F0aXNmaWVkID0gY2hlY2tTZXNzaW9uUnVsZShydWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiY291bnRlclwiOlxuICAgICAgICBydWxlU2F0aXNmaWVkID0gY2hlY2tDb3VudGVyUnVsZShydWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZWxlbWVudFwiOlxuICAgICAgICBydWxlU2F0aXNmaWVkID0gY2hlY2tFbGVtZW50UnVsZShydWxlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiZGF0YUxheWVyXCI6XG4gICAgICAgIHJ1bGVTYXRpc2ZpZWQgPSBjaGVja0RhdGFMYXllclJ1bGUocnVsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcInVybFwiOlxuICAgICAgICBydWxlU2F0aXNmaWVkID0gY2hlY2tVcmxSdWxlKHJ1bGUpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCJmdW5jdGlvblwiOlxuICAgICAgICBydWxlU2F0aXNmaWVkID0gY2hlY2tGdW5jdGlvblJ1bGUocnVsZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgbG9nZ2VyLmxvZyhgTm8gc3VjaCBydWxlIHR5cGU6ICR7dHlwZX1gKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKGNoYWluKSB7XG4gICAgICBzd2l0Y2ggKGNoYWluX2NvbmRpdGlvbikge1xuICAgICAgICBjYXNlIFwiYW5kXCI6XG4gICAgICAgICAgcnVsZVNhdGlzZmllZCA9IHJ1bGVTYXRpc2ZpZWQgJiYgdGhpcy5jaGVja1J1bGUoY2hhaW4pO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwib3JcIjpcbiAgICAgICAgICBydWxlU2F0aXNmaWVkID0gcnVsZVNhdGlzZmllZCB8fCB0aGlzLmNoZWNrUnVsZShjaGFpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJ4b3JcIjpcbiAgICAgICAgICBydWxlU2F0aXNmaWVkID0gcnVsZVNhdGlzZmllZCAhPSB0aGlzLmNoZWNrUnVsZShjaGFpbik7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIk5vIHN1Y2ggY2hhaW4gY29uZGl0aW9uXCIpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcnVsZVNhdGlzZmllZDtcbiAgfVxufVxuIiwiaW1wb3J0IGFwcGx5VHJlYXRtZW50cyBmcm9tIFwiLi4vTmV4dGRheUFwcGx5VHJlYXRtZW50cy9pbmRleFwiO1xuaW1wb3J0IExvZ2dlciBmcm9tIFwiLi4vbG9nZ2VyXCI7XG5pbXBvcnQgTW9uaXRvciBmcm9tIFwiLi4vTmV4dGRheU1vbml0b3IvaW5kZXhcIjtcbmltcG9ydCBUcmVhdG1lbnRSZXBvc2l0b3J5IGZyb20gXCIuLi9OZXh0ZGF5VHJlYXRtZW50UmVwb3NpdG9yeS9pbmRleFwiO1xuaW1wb3J0IFJ1bGVFbmdpbmUgZnJvbSBcIi4uL05leHRkYXlSdWxlRW5naW5lXCI7XG5pbXBvcnQge0NPT0tJRV9OQU1FLFxuICAvLyBFUFNJTE9OLFxuICBNT0JJTEVfTUVESUFfUVVFUlksXG4gIFNQTElUX1JBVElPLFxuICBMT0NBTF9TVE9SQUdFX0tFWVMsXG59IGZyb20gXCIuLi9jb25zdGFudHNcIjtcbmltcG9ydCB7XG4gIGV4dHJhY3RDb29raWVJZGVudGlmaWVyLFxuICBpbml0aWF0ZVNlc3Npb25TdG9yYWdlcyxcbiAgaW5qZWN0U3R5bGVTaGVldCxcbiAgcmVtb3ZlRG9jdW1lbnRIaWRlLFxuICBwYXJzZUNvb2tpZSxcbiAgcHJlcGFyZUFjdGlvbnMsXG59IGZyb20gXCIuLi91dGlsc1wiO1xuXG4oYXN5bmMgZnVuY3Rpb24oKSB7XG4gIGxldCBpc09uID0gbnVsbDtcbiAgdHJ5IHtcbiAgICBjb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG4gICAgbG9nZ2VyLmluZm8oXCJOZXh0ZGF5IGluaXRpYXRlZFwiKTtcblxuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDtcbiAgICBpZiAocXVlcnlTdHJpbmcuaW5jbHVkZXMoXCJuZF9kZWJ1Zz0xXCIpKSB7XG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLk5EX0RFQlVHX01PREUsIDEpO1xuICAgIH0gZWxzZSBpZiAocXVlcnlTdHJpbmcuaW5jbHVkZXMoXCJuZF9kZWJ1Zz0wXCIpKSB7XG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oTE9DQUxfU1RPUkFHRV9LRVlTLk5EX0RFQlVHX01PREUpO1xuICAgIH1cblxuICAgIGNvbnN0IGlkZW50aWZpZXIgPSBleHRyYWN0Q29va2llSWRlbnRpZmllcihkb2N1bWVudC5jb29raWUsIENPT0tJRV9OQU1FKTtcbiAgICBsb2dnZXIubG9nKFwiRm91bmQgY29va2llIGlkZW50aWZpZXI6IFwiLCBpZGVudGlmaWVyKTtcbiAgICBjb25zdCBjb29raWVQY3QgPSBhd2FpdCBwYXJzZUNvb2tpZShpZGVudGlmaWVyKTtcbiAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShMT0NBTF9TVE9SQUdFX0tFWVMuTkRfREVCVUdfTU9ERSkpIHtcbiAgICAgIGlmIChjb29raWVQY3QgPCBTUExJVF9SQVRJTykge1xuICAgICAgICBpZiAoY29va2llUGN0ID09PSAtMSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkIG5vdCBwYXJzZSBjb29raWVcIik7XG4gICAgICAgIH1cbiAgICAgICAgaXNPbiA9IGZhbHNlO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb250cm9sIGdyb3VwOiBubyB0cmVhdG1lbnRzIGFwcGxpZWRcIik7XG4gICAgICB9IGlzT24gPSB0cnVlO1xuICAgIH0gZWxzZSBsb2dnZXIuaW5mbyhcIkRlYnVnIG1vZGUgb246IGFsbCBhcHBsaWNhYmxlIHRyZWF0bWVudHMgd2lsbCBiZSBhcHBsaWVkXCIpO1xuXG4gICAgaWYgKCFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibmV4dERheS1oaWRlXCIpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJOZXh0ZGF5IHNjcmlwdCB0aW1lZCBvdXRcIik7XG4gICAgfVxuXG4gICAgaW5qZWN0U3R5bGVTaGVldCgpO1xuICAgIGluaXRpYXRlU2Vzc2lvblN0b3JhZ2VzKCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICByZW1vdmVEb2N1bWVudEhpZGUoKTtcbiAgICB9LCAyMDAwKTtcbiAgICBjb25zdCB0cmVhdG1lbnRzUHJvbWlzZSA9IFRyZWF0bWVudFJlcG9zaXRvcnkuZ2V0VHJlYXRtZW50cygpO1xuICAgIGNvbnN0IGlzTW9iaWxlID0gd2luZG93Lm1hdGNoTWVkaWEoTU9CSUxFX01FRElBX1FVRVJZKS5tYXRjaGVzO1xuICAgIGNvbnN0IE9CU0VSVkVSX0NPTkZJRyA9IHtzdWJ0cmVlOiB0cnVlLCBjaGlsZExpc3Q6IHRydWV9O1xuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICBjb25zdCBlbmdhZ2VUcmVhdG1lbnQgPSBhc3luYyAodHJlYXRtZW50LCBhcHBsaWVkVHJlYXRtZW50SWRzLCBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzKSA9PiB7XG4gICAgICBjb25zdCB7YWN0aW9ucywgYmFzZVJ1bGVTZXQsIGRldmljZSwgc3ViVmFyaWFudFJ1bGVTZXR9ID0gdHJlYXRtZW50O1xuICAgICAgaWYgKGRldmljZSA9PT0gXCJtb2JpbGVcIiAmJiAhaXNNb2JpbGUpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIlRyZWF0bWVudCBkZXZpY2UgJ21vYmlsZScgbWlzbWF0Y2hcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChkZXZpY2UgPT09IFwiZGVza3RvcFwiICYmIGlzTW9iaWxlKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJUcmVhdG1lbnQgZGV2aWNlICdkZXNrdG9wJyBtaXNtYXRjaFwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcnVsZUVuZ2luZSA9IG5ldyBSdWxlRW5naW5lKHtiYXNlUnVsZVNldCwgc3ViVmFyaWFudFJ1bGVTZXR9KTtcbiAgICAgIGxvZ2dlci5sb2coXCJTdGFydGluZyBiYXNlIHJ1bGUgc2V0IGNoZWNrIGZvciB0cmVhdG1lbnQ6IFwiICsgdHJlYXRtZW50LmlkKTtcbiAgICAgIGlmICghYmFzZVJ1bGVTZXQgfHwgcnVsZUVuZ2luZS5jaGVja1J1bGVzKCkpIHtcbiAgICAgICAgaWYgKCFzdWJWYXJpYW50UnVsZVNldCkge1xuICAgICAgICAvLyBpZiAoTWF0aC5yYW5kb20oKSA8IEVQU0lMT04pIHtcbiAgICAgICAgLy8gZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50c1t0cmVhdG1lbnQuaWRdID0ge3N1YlZhcmlhbnRJZDogbnVsbCwgYWN0aW9uc307XG4gICAgICAgIC8vIH0gZWxzZSB7XG4gICAgICAgICAgYXBwbHlUcmVhdG1lbnRzKGFjdGlvbnMpO1xuICAgICAgICAgIGFwcGxpZWRUcmVhdG1lbnRJZHNbdHJlYXRtZW50LmlkXSA9IHtzdWJWYXJpYW50SWQ6IG51bGwsIGFjdGlvbnN9O1xuICAgICAgICAgIC8vIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZyhcIlN0YXJ0aW5nIHN1YiB2YXJpYW50IHJ1bGUgc2V0IGNoZWNrIGZvciB0cmVhdG1lbnQ6IFwiICsgdHJlYXRtZW50LmlkKTtcbiAgICAgICAgY29uc3Qgc3ViVmFyaWFudElkID0gcnVsZUVuZ2luZS5jaGVja1N1YlZhcmlhbnRSdWxlcygpO1xuICAgICAgICBsZXQgcHJlcGFyZWQgPSBhY3Rpb25zO1xuICAgICAgICBpZiAoc3ViVmFyaWFudElkKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIkFwcGx5aW5nIHN1YiB2YXJpYW50IHdpdGggaWQ6IFwiLCBzdWJWYXJpYW50SWQpO1xuICAgICAgICAgIHByZXBhcmVkID0gcHJlcGFyZUFjdGlvbnMoYWN0aW9ucywgc3ViVmFyaWFudElkKTtcbiAgICAgICAgfSBlbHNlIGxvZ2dlci5sb2coXCJBcHBseWluZyB0cmVhdG1lbnQgd2l0aCBkZWZhdWx0IHZhbHVlc1wiKTtcbiAgICAgICAgLy8gaWYgKE1hdGgucmFuZG9tKCkgPCBFUFNJTE9OKSB7XG4gICAgICAgIC8vIGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHNbdHJlYXRtZW50LmlkXSA9IHtzdWJWYXJpYW50SWQ6IG51bGwsIGFjdGlvbnN9O1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICBhcHBseVRyZWF0bWVudHMocHJlcGFyZWQpO1xuICAgICAgICBhcHBsaWVkVHJlYXRtZW50SWRzW3RyZWF0bWVudC5pZF0gPSB7c3ViVmFyaWFudElkLCBhY3Rpb25zOiBwcmVwYXJlZH07XG4gICAgICAgIC8vIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbG9nZ2VyLmxvZyhcIlJ1bGUgY2hlY2sgZmFpbGVkIGZvciB0cmVhdG1lbnQ6IFwiLCB0cmVhdG1lbnQuaWQpO1xuICAgIH07XG5cbiAgICAvLyBUZW1wb3JhcnkgY29kZSBibG9jayB0byB0cmFjayBjb3Vwb24gYXBwbGljYWJsZSBiYXNrZXQgdG90YWwgcHJpY2VcbiAgICAvLyBUT0RPOiBSZW1vdmUgb25jZSB0aGUgaW5mbyBjYW4gYmUgb2J0YWluZWQgdmlhIExvb2t1cCBBUElcbiAgICBjb25zdCBjb2xsZWN0Q0FCYXNrZXRQcmljZSA9ICgpID0+IHtcbiAgICAgIGNvbnN0IHtDT1VQT05fQVBQTElDQUJMRV9CQVNLRVRfUFJJQ0V9ID0gTE9DQUxfU1RPUkFHRV9LRVlTO1xuICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiL3NpcGFyaXMtbGlzdGVzaS5odG1sXCIpKSB7XG4gICAgICAgIGNvbnN0IHByaWNlRWxlbWVudHMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucHJpY2VcIikpO1xuICAgICAgICBwcmljZUVsZW1lbnRzLnB1c2goLi4uQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5ldy1wcmljZVwiKSkpO1xuICAgICAgICBpZiAoIXByaWNlRWxlbWVudHMubGVuZ3RoKSB7XG4gICAgICAgICAgbG9nZ2VyLmxvZyhcIlByaWNlIGVsZW1lbnRzIG5vdCBmb3VuZFwiKTtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oQ09VUE9OX0FQUExJQ0FCTEVfQkFTS0VUX1BSSUNFLCAwKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbG9nZ2VyLmxvZyhcIlByaWNlIGVsZW1lbnRzOiBcIiwgcHJpY2VFbGVtZW50cyk7XG4gICAgICAgIGNvbnN0IGNvdXBvbkFwcGxpY2FibGVUb3RhbFByaWNlID0gcHJpY2VFbGVtZW50cy5yZWR1Y2UoKHJldHVyblZhbCwgZWxlbSkgPT4ge1xuICAgICAgICAgIHJldHVyblZhbCArPSBwYXJzZUludChlbGVtLnRleHRDb250ZW50LnJlcGxhY2UoXCJUTFwiLCBcIlwiKS5yZXBsYWNlKFwiLlwiLCBcIlwiKSk7XG4gICAgICAgICAgcmV0dXJuIHJldHVyblZhbDtcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIGxvZ2dlci5sb2coXCJDb3Vwb24gYXBwbGljYWJsZSB0b3RhbCBwcmljZTogXCIsIGNvdXBvbkFwcGxpY2FibGVUb3RhbFByaWNlKTtcbiAgICAgICAgaWYgKGNvdXBvbkFwcGxpY2FibGVUb3RhbFByaWNlID49IDApIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXG4gICAgICAgICAgICAgIENPVVBPTl9BUFBMSUNBQkxFX0JBU0tFVF9QUklDRSwgY291cG9uQXBwbGljYWJsZVRvdGFsUHJpY2UpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiL3NpcGFyaXMtb3pldGkuaHRtbFwiKSkge1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oQ09VUE9OX0FQUExJQ0FCTEVfQkFTS0VUX1BSSUNFLCAwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGNhQmFza2V0UHJpY2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oQ09VUE9OX0FQUExJQ0FCTEVfQkFTS0VUX1BSSUNFKTtcbiAgICAgICAgaWYgKGNhQmFza2V0UHJpY2UgPT09IG51bGwpIHtcbiAgICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oQ09VUE9OX0FQUExJQ0FCTEVfQkFTS0VUX1BSSUNFLCAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBjb2xsZWN0Q0FCYXNrZXRQcmljZSgpO1xuICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcIi9zaXBhcmlzLWxpc3Rlc2kuaHRtbFwiKSkge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgbG9nZ2VyLmxvZyhcIk11dGF0aW9uIG9ic2VydmVkLCBjYWxsaW5nIGNvbGxlY3RDQUJhc2tldFByaWNlXCIpO1xuICAgICAgICBjb2xsZWN0Q0FCYXNrZXRQcmljZSgpO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBiYXNrZXRDaGVja291dEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NoZWNrb3V0Rm9ybVwiKTtcbiAgICAgIGlmIChiYXNrZXRDaGVja291dEZvcm0pIG9ic2VydmVyLm9ic2VydmUoYmFza2V0Q2hlY2tvdXRGb3JtLCBPQlNFUlZFUl9DT05GSUcpO1xuICAgIH1cbiAgICAvLyBFbmQgb2YgdGVtcG9yYXJ5IGNvZGUgYmxvY2tcblxuICAgIGNvbnN0IHRyZWF0bWVudHMgPSBhd2FpdCB0cmVhdG1lbnRzUHJvbWlzZTtcblxuICAgIGxvZ2dlci5sb2coXCJGb3VuZCB0cmVhdG1lbnRzOiBcIiwgdHJlYXRtZW50cyk7XG4gICAgbG9nZ2VyLmxvZyhcIkZvdW5kIGNvb2tpZSBwZXJjZW50YWdlOiBcIiwgY29va2llUGN0KTtcbiAgICBsb2dnZXIubG9nKFwiU3BsaXRfcmF0aW86IFwiLCBTUExJVF9SQVRJTyk7XG4gICAgbG9nZ2VyLmxvZyhcImNvb2tpZVBjdCA8IFNQTElUX1JBVElPXCIsIGNvb2tpZVBjdCA8IFNQTElUX1JBVElPKTtcbiAgICBsb2dnZXIuaW5mbyhgQ29udHJvbCBncm91cCByYXRpbzogJHtTUExJVF9SQVRJT30lYCk7XG5cbiAgICBjb25zdCB0cmVhdG1lbnRSZXBvc2l0b3J5ID0gbmV3IFRyZWF0bWVudFJlcG9zaXRvcnkoe1xuICAgICAgdHJlYXRtZW50cyxcbiAgICAgIGNvb2tpZVBjdCxcbiAgICB9KTtcbiAgICBjb25zdCBtYXRjaGVkVHJlYXRtZW50cyA9IHRyZWF0bWVudFJlcG9zaXRvcnkuZ2V0TWF0Y2hlZFRyZWF0bWVudHMoKTtcbiAgICBpZiAoIW1hdGNoZWRUcmVhdG1lbnRzLmxlbmd0aCkge1xuICAgICAgbG9nZ2VyLmxvZyhcIk5vIHRyZWF0bWVudHMgbWF0Y2hlZCwgcmV0dXJuaW5nIHdpdGhvdXQgZnVydGhlciBhY3Rpb25cIik7XG4gICAgICByZW1vdmVEb2N1bWVudEhpZGUoKTtcbiAgICAgIE1vbml0b3Iuc2VuZEVtcHR5TG9nKFwiTm8gdHJlYXRtZW50cyBtYXRjaGVkXCIsIGlzT24pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhcHBsaWVkVHJlYXRtZW50SWRzID0ge307XG4gICAgY29uc3QgZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cyA9IHt9O1xuICAgIGNvbnN0IHJlQXBwbHlUcmVhdG1lbnRzTWFwID0ge307XG4gICAgZm9yIChjb25zdCB0cmVhdG1lbnQgb2YgbWF0Y2hlZFRyZWF0bWVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHtpZCwgcmVhcHBseV9ldmVudCA9IG51bGx9ID0gdHJlYXRtZW50O1xuICAgICAgICBpZiAocmVhcHBseV9ldmVudCkge1xuICAgICAgICAgIGxldCByZWFwcGx5X2V2ZW50X2FycmF5ID0gcmVhcHBseV9ldmVudDtcbiAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVhcHBseV9ldmVudCkpIHJlYXBwbHlfZXZlbnRfYXJyYXkgPSBbcmVhcHBseV9ldmVudF07XG4gICAgICAgICAgbG9nZ2VyLmxvZyhgUmVhcHBseSBldmVudCAnJHtyZWFwcGx5X2V2ZW50fScgZm91bmQgZm9yIHRyZWF0bWVudDogJHtpZH1gKTtcbiAgICAgICAgICBmb3IgKGNvbnN0IHJlYXBwbHlFdmVudCBvZiByZWFwcGx5X2V2ZW50X2FycmF5KSB7XG4gICAgICAgICAgICBjb25zdCBwcmV2aW91c1ZhbHVlID0gcmVBcHBseVRyZWF0bWVudHNNYXBbcmVhcHBseUV2ZW50XSA/XG4gICAgICAgICAgICAgICAgcmVBcHBseVRyZWF0bWVudHNNYXBbcmVhcHBseUV2ZW50XSA6IFtdO1xuICAgICAgICAgICAgcmVBcHBseVRyZWF0bWVudHNNYXBbcmVhcHBseUV2ZW50XSA9IFsuLi5wcmV2aW91c1ZhbHVlLCBpZF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IGVuZ2FnZVRyZWF0bWVudCh0cmVhdG1lbnQsIGFwcGxpZWRUcmVhdG1lbnRJZHMsIGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHMpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGxvZ2dlci5sb2coXCJFcnJvciBleGVjdXRpbmcgcnVsZXNcIiwgZXJyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgbG9nZ2VyLmluZm8oXCJUcmVhdG1lbnRzIGFwcGxpZWRcIik7XG4gICAgcmVtb3ZlRG9jdW1lbnRIaWRlKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIG1vbml0b3Igd2l0aCBhcHBsaWVkIHRyZWF0bWVudHNcbiAgICBsb2dnZXIubG9nKFwiQXBwbGllZCB0cmVhdG1lbnRzOiBcIiwgYXBwbGllZFRyZWF0bWVudElkcyk7XG4gICAgY29uc3QgbW9uaXRvciA9IG5ldyBNb25pdG9yKGFwcGxpZWRUcmVhdG1lbnRJZHMsIGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHMpO1xuICAgIG1vbml0b3Iuc2VuZExvZ3MoaXNPbik7XG5cbiAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICBtb25pdG9yLnVwZGF0ZUxhdGVzdENoYW5nZXMoYXBwbGllZFRyZWF0bWVudElkcywgZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cyk7XG4gICAgfSwgMTAwMCk7XG5cbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhyZUFwcGx5VHJlYXRtZW50c01hcCkpIHtcbiAgICAgIGNvbnN0IHRyZWF0bWVudElkcyA9IHJlQXBwbHlUcmVhdG1lbnRzTWFwW2tleV07XG4gICAgICBjb25zdCByZUFwcGx5VHJlYXRtZW50cyA9IG1hdGNoZWRUcmVhdG1lbnRzLmZpbHRlcigodCkgPT4gdHJlYXRtZW50SWRzLmluY2x1ZGVzKHQuaWQpKTtcbiAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgIGNhc2UgXCJpbmZpbml0ZV9zY3JvbGxcIjoge1xuICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmVhdG1lbnQgb2YgcmVBcHBseVRyZWF0bWVudHMpIHtcbiAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhgUmV0cnlpbmcgdHJlYXRtZW50ICR7dHJlYXRtZW50LmlkfSBmcm9tIGluZmluaXRlX3Njcm9sbGApO1xuICAgICAgICAgICAgICBlbmdhZ2VUcmVhdG1lbnQodHJlYXRtZW50LCBhcHBsaWVkVHJlYXRtZW50SWRzLCBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcInRpbWVvdXRcIjoge1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCB0cmVhdG1lbnQgb2YgcmVBcHBseVRyZWF0bWVudHMpIHtcbiAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhgUmV0cnlpbmcgdHJlYXRtZW50ICR7dHJlYXRtZW50LmlkfSBmcm9tIHRpbWVvdXRgKTtcbiAgICAgICAgICAgICAgZW5nYWdlVHJlYXRtZW50KHRyZWF0bWVudCwgYXBwbGllZFRyZWF0bWVudElkcywgZWxpZ2libGVOb3RBcHBsaWVkVHJlYXRtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiZWxlbWVudF9jaGFuZ2VcIjoge1xuICAgICAgICAgIGZvciAoY29uc3QgdHJlYXRtZW50IG9mIHJlQXBwbHlUcmVhdG1lbnRzKSB7XG4gICAgICAgICAgICBjb25zdCByZWFwcGx5U2VsZWN0b3JMaXN0ID0gQXJyYXkuaXNBcnJheSh0cmVhdG1lbnQucmVhcHBseV9zZWxlY3RvcikgP1xuICAgICAgICAgICAgdHJlYXRtZW50LnJlYXBwbHlfc2VsZWN0b3IgOiBbdHJlYXRtZW50LnJlYXBwbHlfc2VsZWN0b3JdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzZWxlY3RvciBvZiByZWFwcGx5U2VsZWN0b3JMaXN0KSB7XG4gICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcbiAgICAgICAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgbG9nZ2VyLmxvZyhgUmV0cnlpbmcgdHJlYXRtZW50ICR7dHJlYXRtZW50LmlkfSBmcm9tIGVsZW1lbnRfY2hhbmdlYCk7XG4gICAgICAgICAgICAgICAgICBlbmdhZ2VUcmVhdG1lbnQodHJlYXRtZW50LCBhcHBsaWVkVHJlYXRtZW50SWRzLCBlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQsIE9CU0VSVkVSX0NPTkZJRyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIm9uX3Njcm9sbFwiOiB7XG4gICAgICAgICAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHRyZWF0bWVudCBvZiByZUFwcGx5VHJlYXRtZW50cykge1xuICAgICAgICAgICAgICBsb2dnZXIubG9nKGBSZXRyeWluZyB0cmVhdG1lbnQgJHt0cmVhdG1lbnQuaWR9IGZyb20gb25fc2Nyb2xsYCk7XG4gICAgICAgICAgICAgIGVuZ2FnZVRyZWF0bWVudCh0cmVhdG1lbnQsIGFwcGxpZWRUcmVhdG1lbnRJZHMsIGVsaWdpYmxlTm90QXBwbGllZFRyZWF0bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBsb2dnZXIubG9nKFwiUmVhcHBseSBldmVudCBub3QgZm91bmQ6IFwiLCBrZXkpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmVtb3ZlRG9jdW1lbnRIaWRlKCk7XG4gICAgY29uc29sZS53YXJuKFwiTmV4dGRheTogXCIsIGVyci5tZXNzYWdlKTtcbiAgICBsZXQgbWVzc2FnZSA9IGVyci5tZXNzYWdlO1xuICAgIGlmIChlcnIubWVzc2FnZSAhPT0gXCJDb3VsZCBub3QgcGFyc2UgY29va2llXCIgJiYgZXJyLm1lc3NhZ2UgIT09IFwiQ29udHJvbCBncm91cDogbm8gdHJlYXRtZW50cyBhcHBsaWVkXCIpIHtcbiAgICAgIG1lc3NhZ2UgPSBgRXJyb3Igd2hlbiBhcHBseWluZyB0cmVhdG1lbnRzOiAke2Vyci5tZXNzYWdlfWA7XG4gICAgfVxuICAgIE1vbml0b3Iuc2VuZEVtcHR5TG9nKG1lc3NhZ2UsIGlzT24pO1xuICB9XG59KSgpO1xuIl0sIm5hbWVzIjpbIm1vZHVsZSIsImV4cG9ydHMiLCJydW50aW1lIiwidW5kZWZpbmVkIiwiT3AiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd24iLCJoYXNPd25Qcm9wZXJ0eSIsIiRTeW1ib2wiLCJTeW1ib2wiLCJpdGVyYXRvclN5bWJvbCIsIml0ZXJhdG9yIiwiYXN5bmNJdGVyYXRvclN5bWJvbCIsImFzeW5jSXRlcmF0b3IiLCJ0b1N0cmluZ1RhZ1N5bWJvbCIsInRvU3RyaW5nVGFnIiwiZGVmaW5lIiwib2JqIiwia2V5IiwidmFsdWUiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImVyciIsIndyYXAiLCJpbm5lckZuIiwib3V0ZXJGbiIsInNlbGYiLCJ0cnlMb2NzTGlzdCIsInByb3RvR2VuZXJhdG9yIiwiR2VuZXJhdG9yIiwiZ2VuZXJhdG9yIiwiY3JlYXRlIiwiY29udGV4dCIsIkNvbnRleHQiLCJfaW52b2tlIiwic3RhdGUiLCJHZW5TdGF0ZVN1c3BlbmRlZFN0YXJ0IiwibWV0aG9kIiwiYXJnIiwiR2VuU3RhdGVFeGVjdXRpbmciLCJFcnJvciIsIkdlblN0YXRlQ29tcGxldGVkIiwiZG9uZVJlc3VsdCIsImRlbGVnYXRlIiwiZGVsZWdhdGVSZXN1bHQiLCJtYXliZUludm9rZURlbGVnYXRlIiwiQ29udGludWVTZW50aW5lbCIsInNlbnQiLCJfc2VudCIsImRpc3BhdGNoRXhjZXB0aW9uIiwiYWJydXB0IiwicmVjb3JkIiwidHJ5Q2F0Y2giLCJ0eXBlIiwiZG9uZSIsIkdlblN0YXRlU3VzcGVuZGVkWWllbGQiLCJtYWtlSW52b2tlTWV0aG9kIiwiZm4iLCJjYWxsIiwiR2VuZXJhdG9yRnVuY3Rpb24iLCJHZW5lcmF0b3JGdW5jdGlvblByb3RvdHlwZSIsIkl0ZXJhdG9yUHJvdG90eXBlIiwidGhpcyIsImdldFByb3RvIiwiZ2V0UHJvdG90eXBlT2YiLCJOYXRpdmVJdGVyYXRvclByb3RvdHlwZSIsInZhbHVlcyIsIkdwIiwiZGVmaW5lSXRlcmF0b3JNZXRob2RzIiwiZm9yRWFjaCIsIkFzeW5jSXRlcmF0b3IiLCJQcm9taXNlSW1wbCIsImludm9rZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXN1bHQiLCJfX2F3YWl0IiwidGhlbiIsInVud3JhcHBlZCIsImVycm9yIiwicHJldmlvdXNQcm9taXNlIiwiY2FsbEludm9rZVdpdGhNZXRob2RBbmRBcmciLCJUeXBlRXJyb3IiLCJpbmZvIiwicmVzdWx0TmFtZSIsIm5leHQiLCJuZXh0TG9jIiwicHVzaFRyeUVudHJ5IiwibG9jcyIsImVudHJ5IiwidHJ5TG9jIiwiY2F0Y2hMb2MiLCJmaW5hbGx5TG9jIiwiYWZ0ZXJMb2MiLCJ0cnlFbnRyaWVzIiwicHVzaCIsInJlc2V0VHJ5RW50cnkiLCJjb21wbGV0aW9uIiwicmVzZXQiLCJpdGVyYWJsZSIsIml0ZXJhdG9yTWV0aG9kIiwiaXNOYU4iLCJsZW5ndGgiLCJpIiwiZGlzcGxheU5hbWUiLCJpc0dlbmVyYXRvckZ1bmN0aW9uIiwiZ2VuRnVuIiwiY3RvciIsImNvbnN0cnVjdG9yIiwibmFtZSIsIm1hcmsiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsImF3cmFwIiwiYXN5bmMiLCJQcm9taXNlIiwiaXRlciIsImtleXMiLCJvYmplY3QiLCJyZXZlcnNlIiwicG9wIiwic2tpcFRlbXBSZXNldCIsInByZXYiLCJjaGFyQXQiLCJzbGljZSIsInN0b3AiLCJyb290UmVjb3JkIiwicnZhbCIsImV4Y2VwdGlvbiIsImhhbmRsZSIsImxvYyIsImNhdWdodCIsImhhc0NhdGNoIiwiaGFzRmluYWxseSIsImZpbmFsbHlFbnRyeSIsImNvbXBsZXRlIiwiZmluaXNoIiwidGhyb3duIiwiZGVsZWdhdGVZaWVsZCIsInJlZ2VuZXJhdG9yUnVudGltZSIsImFjY2lkZW50YWxTdHJpY3RNb2RlIiwiZ2xvYmFsVGhpcyIsIkZ1bmN0aW9uIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwibyIsImdldCIsInByb3AiLCJfdHlwZW9mIiwiX2FycmF5TGlrZVRvQXJyYXkiLCJhcnIiLCJsZW4iLCJhcnIyIiwiQXJyYXkiLCJfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkiLCJtaW5MZW4iLCJ0b1N0cmluZyIsImZyb20iLCJ0ZXN0IiwiX3RvQ29uc3VtYWJsZUFycmF5IiwiaXNBcnJheSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsImdlbiIsIl9uZXh0IiwiX3Rocm93IiwiX2FzeW5jVG9HZW5lcmF0b3IiLCJhcmdzIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfc2xpY2VkVG9BcnJheSIsIl9pIiwiX3MiLCJfZSIsIl9hcnIiLCJfbiIsIl9kIiwiVFJFQVRNRU5UU19MT0NBVElPTiIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImluY2x1ZGVzIiwiTE9HX0FQSV9VUkwiLCJNT0JJTEVfTUVESUFfUVVFUlkiLCJTUExJVF9SQVRJTyIsIlNFU1NJT05fU1RPUkFHRV9LRVlTIiwiTE9DQUxfU1RPUkFHRV9LRVlTIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwidGFyZ2V0IiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiX2NyZWF0ZUNsYXNzIiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiTG9nZ2VyIiwib3JpZ2luIiwiREVCVUciLCJjb25zb2xlIiwibG9nIiwibG9nZ2VyIiwiY3J5cHRvIiwicmFuZG9tVVVJREZhbGxiYWNrIiwicmVtb3ZlRG9jdW1lbnRIaWRlIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJmZXRjaFRyZWF0bWVudHMiLCJmZXRjaCIsInRyZWF0bWVudHMiLCJqc29uIiwiZXh0cmFjdENvb2tpZUlkZW50aWZpZXIiLCJjb29raWVTdHJpbmciLCJjb29raWVOYW1lIiwiaWRlbnRpZmllciIsInNwbGl0IiwibWFwIiwidiIsInJlZHVjZSIsImFjYyIsImRlY29kZVVSSUNvbXBvbmVudCIsInRyaW0iLCJwYXJzZUNvb2tpZSIsImNvb2tpZUVuY29kZWQiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsInN1YnRsZSIsImRpZ2VzdCIsImhhc2hCdWZmZXIiLCJoYXNoQXJyYXkiLCJVaW50OEFycmF5IiwiY29va2llSGFzaCIsImIiLCJwYWRTdGFydCIsImpvaW4iLCJoYXNoTnVtYmVyIiwicGFyc2VJbnQiLCJzdWJzdHJpbmciLCJleGl0U2Nyb2xsTGlzdGVuZXIiLCJjYWxsQmFjayIsImxhc3RTY3JvbGxUb3AiLCJzY3JvbGxUb3AiLCJleGl0U2Nyb2xsSW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJzdHlsZUFwcGxpY2F0b3IiLCJlbGVtZW50cyIsInN0eWxlQ2hhbmdlc01hcCIsImVsZW1lbnQiLCJlbnRyaWVzIiwic3R5bGUiLCJpbmplY3RTdHlsZVNoZWV0Iiwic3R5bGVTaGVldCIsImNyZWF0ZUVsZW1lbnQiLCJyZWwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJwcmVwYXJlQWN0aW9ucyIsImFjdGlvbnNUb1ByZXBhcmUiLCJzdWJWYXJpYW50SWQiLCJhY3Rpb25zIiwiSlNPTiIsInBhcnNlIiwic3RyaW5naWZ5IiwiYWN0aW9uIiwic3ViVmFyaWFudHMiLCJzdWJWYXJpYW50IiwiaWQiLCJjb25kaXRpb25DaGVja2VyIiwicnVuVGltZVZhbHVlIiwiY29uZGl0aW9uIiwibWluIiwibWF4IiwicmFuZG9tVVVJRCIsInJlcGxhY2UiLCJjIiwiZ2V0UmFuZG9tVmFsdWVzIiwiY29tcGFyZU9iamVjdHMiLCJvYmoxIiwib2JqMiIsImtleXNBIiwia2V5c0IiLCJkZWxheSIsIm1zIiwicmVzIiwic2V0VGltZW91dCIsImRhdGFMYXllckZpbmRlciIsImRhdGFMYXllciIsIlBPUFVQX0RJU1BMQVlfRkxBRyIsInRyYW5zZm9ybWVyIiwidHJlYXRtZW50Iiwib3BlcmF0b3IiLCJhcHBseUV2ZW50IiwiY29udGVudFNlbGVjdG9yIiwic2VsZWN0b3IiLCJzZWxlY3RvckZhbGxiYWNrIiwibWRDb25kaXRpb24iLCJtb3ZlX3NlbGVjdG9yXzEiLCJtb3ZlX3NlbGVjdG9yXzIiLCJyZXBsYWNlRm4iLCIkIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJyZXBsYWNlRm5FeGVjdXRvciIsInJlcGxhY2VGdW5jdGlvbiIsImJpbmQiLCJyZXBsYWNlQWxsIiwidmFsIiwiY3VycmVudFJlcGxhY2VGbiIsIlN0cmluZyIsImJlZm9yZSIsImFmdGVyIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwiY3JlYXRlUG9wdXAiLCJtb2JpbGUiLCJkaXNwbGF5UG9wdXAiLCJhZGRFdmVudExpc3RlbmVyIiwib25jZSIsInRpbWVvdXQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImUiLCJoYW5kbGVUYWJDaGFuZ2UiLCJhdHRyaWJ1dGUiLCJjc3MiLCJwcm9wZXJ0eSIsInByb3BlcnR5VmFsdWUiLCJuMSIsIm4yIiwic3dhcE5vZGVzIiwiYXBwZW5kIiwic291cmNlIiwiZGVzdGluYXRpb24iLCJwcmVwZW5kIiwiZXZlbnQiLCJ0aXRsZXMiLCJvcmlnaW5hbFRpdGxlIiwidGl0bGUiLCJwYXJzZWRUaXRsZXMiLCJoaWRkZW4iLCJoYW5kbGVQb3B1cENsaWNrIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInNldEl0ZW0iLCJxUG9wdXAiLCJnZXRFbGVtZW50QnlJZCIsInBvcHVwV3JhcHBlciIsImFkZCIsInBvcHVwQ2xvc2VCdXR0b24iLCJpbm5lclRleHQiLCJvbmNsaWNrIiwiY29udGVudHMiLCJzaGlmdCIsInNyYyIsInRlbXBsYXRlIiwiaW5uZXJIVE1MIiwicG9wdXAiLCJjb250ZW50IiwiZmlyc3RDaGlsZCIsImJvZHkiLCJpMSIsImkyIiwicDEiLCJwYXJlbnROb2RlIiwicDIiLCJpc0VxdWFsTm9kZSIsImNoaWxkcmVuIiwiaW5zZXJ0QmVmb3JlIiwidHJlYXRtZW50QXBwbGljYXRvciIsInRyZWF0bWVudExpc3QiLCJqUXVlcnkiLCJtZXNzYWdlIiwiTW9uaXRvciIsImFwcGxpZWRUcmVhdG1lbnRJZHMiLCJlbGlnaWJsZU5vdEFwcGxpZWRUcmVhdG1lbnRzIiwibGF0ZXN0Q2hhbmdlcyIsImVsaWdpYmxlTm90QXBwbGllZENoYW5nZXMiLCJzZXNzaW9uSWQiLCJ2aWV3SWQiLCJoZWFkZXJzIiwiaW5pdGlhbGl6ZUV4aXRFdmVudExpc3RlbmVyIiwiZGVidWdNb2RlIiwibG9jYWxTdG9yYWdlIiwiaXNPbiIsInF1ZXVlZCIsIm5hdmlnYXRvciIsInNlbmRCZWFjb24iLCJwYWNrYWdlTG9nRGF0YSIsImNoYW5nZXMiLCJjb21wYXJlVG8iLCJjdXJyZW50VVJMIiwiVVJMIiwidSIsImhvc3RuYW1lIiwiciIsInJlZmVycmVyIiwidyIsImlubmVyV2lkdGgiLCJjb29raWUiLCJ3ZGwiLCJ0IiwiRGF0ZSIsIm5vdyIsInZJZCIsInNyIiwibSIsImRibSIsIkJsb2IiLCJsb2dEYXRhIiwicGFja2FnZVVwZGF0ZUxvZ0RhdGEiLCJjYXB0dXJlIiwicGFja2FnZUVtcHR5TG9nRGF0YSIsIlRyZWF0bWVudFJlcG9zaXRvcnkiLCJjb29raWVQY3QiLCJ1c2VyU2VnbWVudCIsImdldFVzZXJTZWdtZW50Iiwic2VnbWVudE1hdGNoZWRUcmVhdG1lbnRzIiwiZmlsdGVyIiwiYXBwbHlfb25fdXNlcl9zZWdtZW50IiwiVFJFQVRNRU5UUyIsInRyZWF0bWVudHNPYmoiLCJ0aW1lc3RhbXAiLCJ0cmVhdG1lbnRXaXRoVGltZXN0YW1wIiwiZ2V0Q291bnRlciIsImNvdW50ZXIiLCJSdWxlRW5naW5lIiwiYmFzZVJ1bGVTZXQiLCJzdWJWYXJpYW50UnVsZVNldCIsImNhbGxiYWNrIiwicnVsZSIsImNoZWNrUnVsZSIsImNoYWluIiwiY2hhaW5fY29uZGl0aW9uIiwicnVsZVNhdGlzZmllZCIsImR1cmF0aW9uIiwiZ2V0U2Vzc2lvblRpbWVzdGFtcCIsImR1cmF0aW9uSGFuZGxlciIsImNoZWNrU2Vzc2lvblJ1bGUiLCJwYWdlVmlld3MiLCJwYWdlVmlld0hhbmRsZXIiLCJjYUJhc2tldFByaWNlIiwiY2FCYXNrZXRQcmljZUhhbmRsZXIiLCJjaGVja0NvdW50ZXJSdWxlIiwic2VsZWN0b3JBbGwiLCJtYWluU2VsZWN0b3IiLCJ0ZW1wVmFsIiwicmV0dXJuVmFsIiwiZWxlbSIsImNoZWNrRWxlbWVudFJ1bGUiLCJydW50aW1lVmFsdWUiLCJjaGVja0RhdGFMYXllclJ1bGUiLCJyZXF1ZXN0VVJMIiwicGF0aCIsInNlYXJjaCIsInBhdGhuYW1lIiwiY2hlY2tVcmxSdWxlIiwicnVsZUZ1bmN0aW9uIiwiY2hlY2tGdW5jdGlvblJ1bGUiLCJxdWVyeVN0cmluZyIsInJlbW92ZUl0ZW0iLCJjb250YWlucyIsIlBBR0VfVklFV1MiLCJTRVNTSU9OX0lEIiwiU0VTU0lPTl9USU1FU1RBTVAiLCJwb3B1cERpc3BsYXlGbGFnIiwic2Vzc2lvblRpbWVzdGFtcCIsInRyZWF0bWVudHNQcm9taXNlIiwiaXNNb2JpbGUiLCJPQlNFUlZFUl9DT05GSUciLCJzdWJ0cmVlIiwiY2hpbGRMaXN0IiwiZW5nYWdlVHJlYXRtZW50IiwiZGV2aWNlIiwicnVsZUVuZ2luZSIsImNoZWNrUnVsZXMiLCJhcHBseVRyZWF0bWVudHMiLCJjaGVja1N1YlZhcmlhbnRSdWxlcyIsInByZXBhcmVkIiwiY29sbGVjdENBQmFza2V0UHJpY2UiLCJDT1VQT05fQVBQTElDQUJMRV9CQVNLRVRfUFJJQ0UiLCJwcmljZUVsZW1lbnRzIiwiY291cG9uQXBwbGljYWJsZVRvdGFsUHJpY2UiLCJvYnNlcnZlciIsIk11dGF0aW9uT2JzZXJ2ZXIiLCJiYXNrZXRDaGVja291dEZvcm0iLCJvYnNlcnZlIiwidHJlYXRtZW50UmVwb3NpdG9yeSIsIm1hdGNoZWRUcmVhdG1lbnRzIiwiZ2V0TWF0Y2hlZFRyZWF0bWVudHMiLCJyZUFwcGx5VHJlYXRtZW50c01hcCIsInJlYXBwbHlfZXZlbnQiLCJyZWFwcGx5X2V2ZW50X2FycmF5IiwicmVhcHBseUV2ZW50IiwicHJldmlvdXNWYWx1ZSIsIm1vbml0b3IiLCJzZW5kTG9ncyIsInVwZGF0ZUxhdGVzdENoYW5nZXMiLCJ0cmVhdG1lbnRJZHMiLCJyZUFwcGx5VHJlYXRtZW50cyIsIlJlc2l6ZU9ic2VydmVyIiwicmVhcHBseV9zZWxlY3RvciIsIm9uc2Nyb2xsIiwid2FybiJdLCJzb3VyY2VSb290IjoiIn0=
